import{o as a,k as v,w as t,b as e,a as s,u as x,l as w,_ as T,c as p,r as b,d,f as h,n as D,O as y,h as B,F as C,e as N,Z as H,P as L,m as A,p as P,t as F,q as E}from"./app.b1aa069a.js";import{u as I}from"./useNotifications.dfa7e6fe.js";import{_ as O}from"./PageHeader.8a922d40.js";import{_ as R}from"./Panel.4a6fbe86.js";import{_ as z,a as G,T as q,b as U}from"./Trash.b45f5c62.js";import{_ as Y}from"./Account.78778422.js";import{T as Z,F as S}from"./Facebook.20f80b8c.js";import{_ as J}from"./Input.3731e800.js";import{_ as V}from"./PrimaryButton.ef46ed08.js";import{H as K}from"./HorizontalGroup.59e1825b.js";import{M as Q}from"./ProviderIcon.1c0ce7ab.js";import{E as W}from"./EllipsisVertical.c5c631d8.js";import{_ as X}from"./Alert.f1e73501.js";import{_ as ee}from"./PureButton.24339801.js";import"./ExclamationCircle.e7bb309f.js";const se={class:"flex mr-4"},te=e("span",{class:"flex flex-col items-start"},[e("span",{class:"font-semibold"},"Twitter"),e("span",null,"Connect a new Twitter profile")],-1),oe={__name:"AddTwitterAccount",setup(m){return(n,r)=>(a(),v(x(w),{href:n.route("mixpost.accounts.add",{provider:"twitter"}),method:"post",as:"button",type:"button",class:"w-full flex items-center px-lg py-4 hover:bg-twitter hover:bg-opacity-20 ease-in-out duration-200"},{default:t(()=>[e("span",se,[s(Z,{class:"text-twitter"})]),te]),_:1},8,["href"]))}},ae={class:"flex mr-4"},ne=e("span",{class:"flex flex-col items-start"},[e("span",{class:"font-semibold"},"Facebook Page"),e("span",null,"Connect a new Facebook page")],-1),re={__name:"AddFacebookPage",setup(m){return(n,r)=>(a(),v(x(w),{href:n.route("mixpost.accounts.add",{provider:"facebook_page"}),method:"post",as:"button",type:"button",class:"w-full flex items-center px-lg py-4 hover:bg-facebook hover:bg-opacity-20 ease-in-out duration-200"},{default:t(()=>[e("span",ae,[s(S,{class:"text-facebook"})]),ne]),_:1},8,["href"]))}},ce={class:"flex mr-4"},le=e("span",{class:"flex flex-col items-start"},[e("span",{class:"font-semibold"},"Facebook Group"),e("span",null,"Connect a new Facebook group")],-1),ie={__name:"AddFacebookGroup",setup(m){return(n,r)=>(a(),v(x(w),{href:n.route("mixpost.accounts.add",{provider:"facebook_group"}),method:"post",as:"button",type:"button",class:"w-full flex items-center px-lg py-4 hover:bg-facebook hover:bg-opacity-20 ease-in-out duration-200"},{default:t(()=>[e("span",ce,[s(S,{class:"text-facebook"})]),le]),_:1},8,["href"]))}},ue={},de={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},pe=e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3"},null,-1),_e=[pe];function fe(m,n){return a(),p("svg",de,_e)}const me=T(ue,[["render",fe]]),he={class:"flex mr-md"},ve=e("span",{class:"flex flex-col items-start"},[e("span",{class:"font-semibold"},"Mastodon"),e("span",null,"Connect a new Mastodon profile")],-1),ge={key:0,class:"px-lg py-md"},be=e("span",{class:"mr-xs"},"Next",-1),xe={__name:"AddMastodonAccount",setup(m){const{notify:n}=I(),r=b(!1),l=b(""),c=b(!1),_=()=>new Promise((f,i)=>{axios.post(route("mixpost.services.createMastodonApp"),{server:l.value}).then(()=>{f()}).catch(function(o){i(o)})}),k=()=>{r.value=!0,y.post(route("mixpost.accounts.add",{provider:"mastodon"}),{server:l.value},{onSuccess(){r.value=!1}})},$=async()=>{r.value=!0,await _().then(()=>{k()}).catch(f=>{if(f.response.status!==422){n("error",f.response.data.message);return}n("error",f.response.data.errors)}).finally(()=>{r.value=!1})};return(f,i)=>(a(),p("div",{class:D({"bg-mastodon bg-opacity-20":c.value})},[e("div",{role:"button",onClick:i[0]||(i[0]=o=>c.value=!c.value),type:"button",class:"w-full flex items-center px-lg py-md hover:bg-mastodon hover:bg-opacity-20 ease-in-out duration-200"},[e("span",he,[s(Q,{class:"text-mastodon"})]),ve]),c.value?(a(),p("div",ge,[s(K,null,{title:t(()=>[d("Enter your Mastodon server")]),default:t(()=>[s(J,{type:"text",modelValue:l.value,"onUpdate:modelValue":i[1]||(i[1]=o=>l.value=o),placeholder:"example.server"},null,8,["modelValue"])]),_:1}),s(V,{onClick:$,disabled:!l.value||r.value,isLoading:r.value,class:"mt-xs md:mt-0"},{default:t(()=>[be,e("span",null,[s(me,{class:"!w-5 !h-5"})])]),_:1},8,["disabled","isLoading"])])):h("",!0)],2))}},we={},ke={xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},$e=e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1),ye=[$e];function Ce(m,n){return a(),p("svg",ke,ye)}const Ae=T(we,[["render",Ce]]),Fe={class:"w-full max-w-5xl mx-auto row-py"},Me={class:"mt-lg row-px w-full"},Te={key:0,class:"mb-md"},Ie={key:0},Se={key:1},Ve=e("p",{class:"mt-xs italic"},"Click on the button below to configure the third-party services.",-1),je={class:"w-full grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6"},De={class:"block p-lg"},Be={class:"flex flex-col justify-center items-center"},Ne=e("span",{class:"mt-xs text-lg"},"Add account",-1),He={class:"absolute top-0 right-0 mt-sm mr-sm"},Le={class:"flex flex-col justify-center"},Pe={class:"mt-sm font-semibold text-center break-words"},Ee={class:"mt-1 text-center text-stone-800"},Oe={class:"flex flex-col"},M="Social Accounts",os={__name:"Accounts",props:{has_service:{required:!0,type:Object}},setup(m){const n=m,{notify:r}=I(),l=b(!1),c=b(null),_=b(!1),k=B(()=>Object.keys(n.has_service).some(o=>n.has_service[o]!==!0)),$=o=>{y.put(route("mixpost.accounts.update",{account:o}),{},{preserveScroll:!0,onSuccess(g){g.props.flash.error||r("success","The account has been refreshed")}})},f=()=>{y.delete(route("mixpost.accounts.delete",{account:c.value}),{preserveScroll:!0,onStart(){_.value=!0},onSuccess(){c.value=null,r("success","Account deleted")},onFinish(){_.value=!1}})},i=()=>{_.value||(c.value=null)};return(o,g)=>(a(),p(C,null,[s(x(H),{title:M}),e("div",Fe,[s(O,{title:M},{description:t(()=>[d(" Connect a social account you'd like to manage. ")]),_:1}),e("div",Me,[k.value?(a(),p("div",Te,[s(X,{variant:"warning",closeable:!1,class:"mb-md"},{default:t(()=>[o.$page.props.has_service.twitter?h("",!0):(a(),p("p",Ie,"You have not configured Twitter service.")),o.$page.props.has_service.facebook?h("",!0):(a(),p("p",Se,"You have not configured Facebook service.")),Ve]),_:1}),s(x(w),{href:o.route("mixpost.services.index"),class:"inline-block"},{default:t(()=>[s(V,null,{default:t(()=>[d("Configure services")]),_:1})]),_:1},8,["href"])])):h("",!0),e("div",je,[e("button",{onClick:g[0]||(g[0]=u=>l.value=!0),class:"border border-indigo-800 rounded-lg hover:border-indigo-500 hover:text-indigo-500 transition-colors ease-in-out duration-200"},[e("span",De,[e("span",Be,[s(L,{class:"w-7 h-7"}),Ne])])]),(a(!0),p(C,null,N(o.$page.props.accounts,u=>(a(),v(R,{key:u.id,class:"relative"},{default:t(()=>[e("div",He,[s(P,{"width-classes":"w-32"},{trigger:t(()=>[s(ee,null,{default:t(()=>[s(W)]),_:1})]),content:t(()=>[s(A,{onClick:j=>$(u.id),as:"button"},{default:t(()=>[s(Ae,{class:"!w-5 !h-5 mr-1"}),d(" Refresh ")]),_:2},1032,["onClick"]),s(A,{onClick:j=>c.value=u.id,as:"button"},{default:t(()=>[s(q,{class:"!w-5 !h-5 mr-1 text-red-500"}),d(" Delete ")]),_:2},1032,["onClick"])]),_:2},1024)]),e("div",Le,[s(Y,{size:"lg","img-url":u.image,provider:u.provider,active:!0},null,8,["img-url","provider"]),e("div",Pe,F(u.name),1),e("div",Ee,"Added: "+F(u.created_at),1)])]),_:2},1024))),128))])])]),s(z,{show:c.value!==null,onClose:i,variant:"danger"},{header:t(()=>[d(" Delete account ")]),body:t(()=>[d(" Are you sure you want to delete this account? ")]),footer:t(()=>[s(E,{onClick:i,disabled:_.value,class:"mr-xs"},{default:t(()=>[d("Cancel ")]),_:1},8,["disabled"]),s(U,{onClick:f,"is-loading":_.value,disabled:_.value},{default:t(()=>[d("Delete ")]),_:1},8,["is-loading","disabled"])]),_:1},8,["show"]),s(G,{show:l.value,closeable:!0,onClose:g[1]||(g[1]=u=>l.value=!1)},{default:t(()=>[e("div",Oe,[o.$page.props.has_service.facebook?(a(),v(re,{key:0})):h("",!0),o.$page.props.has_service.facebook?(a(),v(ie,{key:1})):h("",!0),s(xe),o.$page.props.has_service.twitter?(a(),v(oe,{key:2})):h("",!0)])]),_:1},8,["show"])],64))}};export{os as default};
