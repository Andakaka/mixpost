import{o as x,c as E,g as Hn,j as At,G as pd,k as Xl,u as V,b as v,n as Ve,t as we,h as L,_ as zr,q as ma,m as K,w as $,e as _e,M as he,F as se,r as fe,a as R,f as ce,S as Vr,x as Yi,U as Xi,V as un,W as md,J as Ql,A as gd,Y as vd,Z as yd,$ as bd,a0 as Dd,a1 as xd,s as kd,B as wd,y as Cd,D as Ed,X as Sd,a2 as Ad,a3 as Od,p as ga,d as Ds}from"./app.b4464951.js";import{u as Td,h as Md,j as va}from"./SearchInput.b6293a16.js";import{_ as Eo}from"./ProviderIcon.d601bfaf.js";import{_ as qn,T as _d,d as Fd,c as Nd,a as Bd}from"./Alert.85ccf04b.js";import{_ as Qi,a as Rd}from"./PrimaryButton.960a9bd1.js";import{u as Id}from"./useNotifications.2fb33d77.js";import{_ as xs,a as Pd}from"./DropdownItem.5adefc7a.js";import{_ as Ld}from"./Input.df0c9ffc.js";const $d=["type"],ax={__name:"PureButton",props:{type:{type:String,default:"button"}},setup(n){return(e,t)=>(x(),E("button",{type:n.type,class:"relative inline-flex items-center text-gray-400 hover:text-indigo-500 transition-colors ease-in-out duration-200"},[Hn(e.$slots,"default")],8,$d))}},zd={class:"flex items-center"},Vd={key:0,class:"ml-xs"},lx={__name:"PostStatus",props:{value:{type:String,required:!0},showName:{type:Boolean,required:!1,default:!0}},setup(n){const e=n,t=At(()=>({DRAFT:"bg-gray-500",PUBLISHED:"bg-lime-500",PUBLISHING:"bg-violet-500",SCHEDULED:"bg-cyan-500",FAILED:"bg-red-500"})[e.value]),r=At(()=>({DRAFT:"Draft",PUBLISHED:"Published",PUBLISHING:"Publishing",SCHEDULED:"Scheduled",FAILED:"Failed"})[e.value]);return(i,s)=>{const o=pd("tooltip");return x(),E("div",zd,[Xl(v("div",{class:Ve([[V(t)],"w-4 h-4 rounded-full"])},null,2),[[o,`${n.showName?"":V(r)}`]]),n.showName?(x(),E("div",Vd,we(V(r)),1)):L("",!0)])}}},jd={},Hd={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},qd=v("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"},null,-1),Wd=[qd];function Ud(n,e){return x(),E("svg",Hd,Wd)}const Kd=zr(jd,[["render",Ud]]);function ge(n){this.content=n}ge.prototype={constructor:ge,find:function(n){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===n)return e;return-1},get:function(n){var e=this.find(n);return e==-1?void 0:this.content[e+1]},update:function(n,e,t){var r=t&&t!=n?this.remove(t):this,i=r.find(n),s=r.content.slice();return i==-1?s.push(t||n,e):(s[i+1]=e,t&&(s[i]=t)),new ge(s)},remove:function(n){var e=this.find(n);if(e==-1)return this;var t=this.content.slice();return t.splice(e,2),new ge(t)},addToStart:function(n,e){return new ge([n,e].concat(this.remove(n).content))},addToEnd:function(n,e){var t=this.remove(n).content.slice();return t.push(n,e),new ge(t)},addBefore:function(n,e,t){var r=this.remove(e),i=r.content.slice(),s=r.find(n);return i.splice(s==-1?i.length:s,0,e,t),new ge(i)},forEach:function(n){for(var e=0;e<this.content.length;e+=2)n(this.content[e],this.content[e+1])},prepend:function(n){return n=ge.from(n),n.size?new ge(n.content.concat(this.subtract(n).content)):this},append:function(n){return n=ge.from(n),n.size?new ge(this.subtract(n).content.concat(n.content)):this},subtract:function(n){var e=this;n=ge.from(n);for(var t=0;t<n.content.length;t+=2)e=e.remove(n.content[t]);return e},get size(){return this.content.length>>1}};ge.from=function(n){if(n instanceof ge)return n;var e=[];if(n)for(var t in n)e.push(t,n[t]);return new ge(e)};function Zl(n,e,t){for(let r=0;;r++){if(r==n.childCount||r==e.childCount)return n.childCount==e.childCount?null:t;let i=n.child(r),s=e.child(r);if(i==s){t+=i.nodeSize;continue}if(!i.sameMarkup(s))return t;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)t++;return t}if(i.content.size||s.content.size){let o=Zl(i.content,s.content,t+1);if(o!=null)return o}t+=i.nodeSize}}function eu(n,e,t,r){for(let i=n.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:t,b:r};let o=n.child(--i),a=e.child(--s),l=o.nodeSize;if(o==a){t-=l,r-=l;continue}if(!o.sameMarkup(a))return{a:t,b:r};if(o.isText&&o.text!=a.text){let c=0,u=Math.min(o.text.length,a.text.length);for(;c<u&&o.text[o.text.length-c-1]==a.text[a.text.length-c-1];)c++,t--,r--;return{a:t,b:r}}if(o.content.size||a.content.size){let c=eu(o.content,a.content,t-1,r-1);if(c)return c}t-=l,r-=l}}class w{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,t,r,i=0,s){for(let o=0,a=0;a<t;o++){let l=this.content[o],c=a+l.nodeSize;if(c>e&&r(l,i+a,s||null,o)!==!1&&l.content.size){let u=a+1;l.nodesBetween(Math.max(0,e-u),Math.min(l.content.size,t-u),r,i+u)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,r,i){let s="",o=!0;return this.nodesBetween(e,t,(a,l)=>{a.isText?(s+=a.text.slice(Math.max(e,l)-l,t-l),o=!r):a.isLeaf?(i?s+=typeof i=="function"?i(a):i:a.type.spec.leafText&&(s+=a.type.spec.leafText(a)),o=!r):!o&&a.isBlock&&(s+=r,o=!0)},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,r=e.firstChild,i=this.content.slice(),s=0;for(t.isText&&t.sameMarkup(r)&&(i[i.length-1]=t.withText(t.text+r.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new w(i,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let r=[],i=0;if(t>e)for(let s=0,o=0;o<t;s++){let a=this.content[s],l=o+a.nodeSize;l>e&&((o<e||l>t)&&(a.isText?a=a.cut(Math.max(0,e-o),Math.min(a.text.length,t-o)):a=a.cut(Math.max(0,e-o-1),Math.min(a.content.size,t-o-1))),r.push(a),i+=a.nodeSize),o=l}return new w(r,i)}cutByIndex(e,t){return e==t?w.empty:e==0&&t==this.content.length?this:new w(this.content.slice(e,t))}replaceChild(e,t){let r=this.content[e];if(r==t)return this;let i=this.content.slice(),s=this.size+t.nodeSize-r.nodeSize;return i[e]=t,new w(i,s)}addToStart(e){return new w([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new w(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,r=0;t<this.content.length;t++){let i=this.content[t];e(i,r,t),r+=i.nodeSize}}findDiffStart(e,t=0){return Zl(this,e,t)}findDiffEnd(e,t=this.size,r=e.size){return eu(this,e,t,r)}findIndex(e,t=-1){if(e==0)return ni(0,e);if(e==this.size)return ni(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let s=this.child(r),o=i+s.nodeSize;if(o>=e)return o==e||t>0?ni(r+1,o):ni(r,i);i=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return w.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new w(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return w.empty;let t,r=0;for(let i=0;i<e.length;i++){let s=e[i];r+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(t||(t=e.slice(0,i)),t[t.length-1]=s.withText(t[t.length-1].text+s.text)):t&&t.push(s)}return new w(t||e,r)}static from(e){if(!e)return w.empty;if(e instanceof w)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new w([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}w.empty=new w([],0);const ks={index:0,offset:0};function ni(n,e){return ks.index=n,ks.offset=e,ks}function fi(n,e){if(n===e)return!0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(n);if(Array.isArray(e)!=t)return!1;if(t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!fi(n[r],e[r]))return!1}else{for(let r in n)if(!(r in e)||!fi(n[r],e[r]))return!1;for(let r in e)if(!(r in n))return!1}return!0}class X{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,r=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))t||(t=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(t||(t=e.slice(0,i)),t.push(this),r=!0),t&&t.push(s)}}return t||(t=e.slice()),r||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&fi(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[t.type];if(!r)throw new RangeError(`There is no mark type ${t.type} in this schema`);return r.create(t.attrs)}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(t[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return X.none;if(e instanceof X)return[e];let t=e.slice();return t.sort((r,i)=>r.type.rank-i.type.rank),t}}X.none=[];class Nr extends Error{}class T{constructor(e,t,r){this.content=e,this.openStart=t,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let r=nu(this.content,e+this.openStart,t);return r&&new T(r,this.openStart,this.openEnd)}removeBetween(e,t){return new T(tu(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return T.empty;let r=t.openStart||0,i=t.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new T(w.fromJSON(e,t.content),r,i)}static maxOpen(e,t=!0){let r=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.lastChild)i++;return new T(e,r,i)}}T.empty=new T(w.empty,0,0);function tu(n,e,t){let{index:r,offset:i}=n.findIndex(e),s=n.maybeChild(r),{index:o,offset:a}=n.findIndex(t);if(i==e||s.isText){if(a!=t&&!n.child(o).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(r!=o)throw new RangeError("Removing non-flat range");return n.replaceChild(r,s.copy(tu(s.content,e-i-1,t-i-1)))}function nu(n,e,t,r){let{index:i,offset:s}=n.findIndex(e),o=n.maybeChild(i);if(s==e||o.isText)return r&&!r.canReplace(i,i,t)?null:n.cut(0,e).append(t).append(n.cut(e));let a=nu(o.content,e-s-1,t);return a&&n.replaceChild(i,o.copy(a))}function Jd(n,e,t){if(t.openStart>n.depth)throw new Nr("Inserted content deeper than insertion position");if(n.depth-t.openStart!=e.depth-t.openEnd)throw new Nr("Inconsistent open depths");return ru(n,e,t,0)}function ru(n,e,t,r){let i=n.index(r),s=n.node(r);if(i==e.index(r)&&r<n.depth-t.openStart){let o=ru(n,e,t,r+1);return s.copy(s.content.replaceChild(i,o))}else if(t.content.size)if(!t.openStart&&!t.openEnd&&n.depth==r&&e.depth==r){let o=n.parent,a=o.content;return dn(o,a.cut(0,n.parentOffset).append(t.content).append(a.cut(e.parentOffset)))}else{let{start:o,end:a}=Gd(t,n);return dn(s,su(n,o,a,e,r))}else return dn(s,hi(n,e,r))}function iu(n,e){if(!e.type.compatibleContent(n.type))throw new Nr("Cannot join "+e.type.name+" onto "+n.type.name)}function Xs(n,e,t){let r=n.node(t);return iu(r,e.node(t)),r}function cn(n,e){let t=e.length-1;t>=0&&n.isText&&n.sameMarkup(e[t])?e[t]=n.withText(e[t].text+n.text):e.push(n)}function xr(n,e,t,r){let i=(e||n).node(t),s=0,o=e?e.index(t):i.childCount;n&&(s=n.index(t),n.depth>t?s++:n.textOffset&&(cn(n.nodeAfter,r),s++));for(let a=s;a<o;a++)cn(i.child(a),r);e&&e.depth==t&&e.textOffset&&cn(e.nodeBefore,r)}function dn(n,e){if(!n.type.validContent(e))throw new Nr("Invalid content for node "+n.type.name);return n.copy(e)}function su(n,e,t,r,i){let s=n.depth>i&&Xs(n,e,i+1),o=r.depth>i&&Xs(t,r,i+1),a=[];return xr(null,n,i,a),s&&o&&e.index(i)==t.index(i)?(iu(s,o),cn(dn(s,su(n,e,t,r,i+1)),a)):(s&&cn(dn(s,hi(n,e,i+1)),a),xr(e,t,i,a),o&&cn(dn(o,hi(t,r,i+1)),a)),xr(r,null,i,a),new w(a)}function hi(n,e,t){let r=[];if(xr(null,n,t,r),n.depth>t){let i=Xs(n,e,t+1);cn(dn(i,hi(n,e,t+1)),r)}return xr(e,null,t,r),new w(r)}function Gd(n,e){let t=e.depth-n.openStart,i=e.node(t).copy(n.content);for(let s=t-1;s>=0;s--)i=e.node(s).copy(w.from(i));return{start:i.resolveNoCache(n.openStart+t),end:i.resolveNoCache(i.content.size-n.openEnd-t)}}class Br{constructor(e,t,r){this.pos=e,this.path=t,this.parentOffset=r,this.depth=t.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(t);return r?e.child(t).cut(r):i}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):e==0?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let r=this.path[t*3],i=t==0?0:this.path[t*3-1]+1;for(let s=0;s<e;s++)i+=r.child(s).nodeSize;return i}marks(){let e=this.parent,t=this.index();if(e.content.size==0)return X.none;if(this.textOffset)return e.child(t).marks;let r=e.maybeChild(t-1),i=e.maybeChild(t);if(!r){let a=r;r=i,i=a}let s=r.marks;for(var o=0;o<s.length;o++)s[o].type.spec.inclusive===!1&&(!i||!s[o].isInSet(i.marks))&&(s=s[o--].removeFromSet(s));return s}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let r=t.marks,i=e.parent.maybeChild(e.index());for(var s=0;s<r.length;s++)r[s].type.spec.inclusive===!1&&(!i||!r[s].isInSet(i.marks))&&(r=r[s--].removeFromSet(r));return r}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!t||t(this.node(r))))return new pi(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let r=[],i=0,s=t;for(let o=e;;){let{index:a,offset:l}=o.content.findIndex(s),c=s-l;if(r.push(o,a,i+l),!c||(o=o.child(a),o.isText))break;s=c-1,i+=l+1}return new Br(t,r,s)}static resolveCached(e,t){for(let i=0;i<ws.length;i++){let s=ws[i];if(s.pos==t&&s.doc==e)return s}let r=ws[Cs]=Br.resolve(e,t);return Cs=(Cs+1)%Yd,r}}let ws=[],Cs=0,Yd=12;class pi{constructor(e,t,r){this.$from=e,this.$to=t,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const Xd=Object.create(null);class ft{constructor(e,t,r,i=X.none){this.type=e,this.attrs=t,this.marks=i,this.content=r||w.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,r,i=0){this.content.nodesBetween(e,t,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,r,i){return this.content.textBetween(e,t,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,r){return this.type==e&&fi(this.attrs,t||e.defaultAttrs||Xd)&&X.sameSet(this.marks,r||X.none)}copy(e=null){return e==this.content?this:new ft(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new ft(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return e==0&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,r=!1){if(e==t)return T.empty;let i=this.resolve(e),s=this.resolve(t),o=r?0:i.sharedDepth(t),a=i.start(o),c=i.node(o).content.cut(i.pos-a,s.pos-a);return new T(c,i.depth-o,s.depth-o)}replace(e,t,r){return Jd(this.resolve(e),this.resolve(t),r)}nodeAt(e){for(let t=this;;){let{index:r,offset:i}=t.content.findIndex(e);if(t=t.maybeChild(r),!t)return null;if(i==e||t.isText)return t;e-=i+1}}childAfter(e){let{index:t,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:t,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(t),index:t,offset:r};let i=this.content.child(t-1);return{node:i,index:t-1,offset:r-i.nodeSize}}resolve(e){return Br.resolveCached(this,e)}resolveNoCache(e){return Br.resolve(this,e)}rangeHasMark(e,t,r){let i=!1;return t>e&&this.nodesBetween(e,t,s=>(r.isInSet(s.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),ou(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,r=w.empty,i=0,s=r.childCount){let o=this.contentMatchAt(e).matchFragment(r,i,s),a=o&&o.matchFragment(this.content,t);if(!a||!a.validEnd)return!1;for(let l=i;l<s;l++)if(!this.type.allowsMarks(r.child(l).marks))return!1;return!0}canReplaceWith(e,t,r,i){if(i&&!this.type.allowsMarks(i))return!1;let s=this.contentMatchAt(e).matchType(r),o=s&&s.matchFragment(this.content,t);return o?o.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){if(!this.type.validContent(this.content))throw new RangeError(`Invalid content for node ${this.type.name}: ${this.content.toString().slice(0,50)}`);let e=X.none;for(let t=0;t<this.marks.length;t++)e=this.marks[t].addToSet(e);if(!X.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(t=>t.type.name)}`);this.content.forEach(t=>t.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(t=>t.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let r=null;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=t.marks.map(e.markFromJSON)}if(t.type=="text"){if(typeof t.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(t.text,r)}let i=w.fromJSON(e,t.content);return e.nodeType(t.type).create(t.attrs,i,r)}}ft.prototype.text=void 0;class mi extends ft{constructor(e,t,r,i){if(super(e,t,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):ou(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new mi(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new mi(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return e==0&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function ou(n,e){for(let t=n.length-1;t>=0;t--)e=n[t].type.name+"("+e+")";return e}class mn{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let r=new Qd(e,t);if(r.next==null)return mn.empty;let i=au(r);r.next&&r.err("Unexpected trailing text");let s=of(sf(i));return af(s,r),s}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,r=e.childCount){let i=this;for(let s=t;i&&s<r;s++)i=i.matchType(e.child(s).type);return i}get inlineContent(){return this.next.length&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let r=0;r<e.next.length;r++)if(this.next[t].type==e.next[r].type)return!0;return!1}fillBefore(e,t=!1,r=0){let i=[this];function s(o,a){let l=o.matchFragment(e,r);if(l&&(!t||l.validEnd))return w.from(a.map(c=>c.createAndFill()));for(let c=0;c<o.next.length;c++){let{type:u,next:d}=o.next[c];if(!(u.isText||u.hasRequiredAttrs())&&i.indexOf(d)==-1){i.push(d);let f=s(d,a.concat(u));if(f)return f}}return null}return s(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),s=i.match;if(s.matchType(e)){let o=[];for(let a=i;a.type;a=a.via)o.push(a.type);return o.reverse()}for(let o=0;o<s.next.length;o++){let{type:a,next:l}=s.next[o];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in t)&&(!i.type||l.validEnd)&&(r.push({match:a.contentMatch,type:a,via:i}),t[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function t(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&t(r.next[i].next)}return t(this),e.map((r,i)=>{let s=i+(r.validEnd?"*":" ")+" ";for(let o=0;o<r.next.length;o++)s+=(o?", ":"")+r.next[o].type.name+"->"+e.indexOf(r.next[o].next);return s}).join(`
`)}}mn.empty=new mn(!0);class Qd{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function au(n){let e=[];do e.push(Zd(n));while(n.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function Zd(n){let e=[];do e.push(ef(n));while(n.next&&n.next!=")"&&n.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function ef(n){let e=rf(n);for(;;)if(n.eat("+"))e={type:"plus",expr:e};else if(n.eat("*"))e={type:"star",expr:e};else if(n.eat("?"))e={type:"opt",expr:e};else if(n.eat("{"))e=tf(n,e);else break;return e}function ya(n){/\D/.test(n.next)&&n.err("Expected number, got '"+n.next+"'");let e=Number(n.next);return n.pos++,e}function tf(n,e){let t=ya(n),r=t;return n.eat(",")&&(n.next!="}"?r=ya(n):r=-1),n.eat("}")||n.err("Unclosed braced range"),{type:"range",min:t,max:r,expr:e}}function nf(n,e){let t=n.nodeTypes,r=t[e];if(r)return[r];let i=[];for(let s in t){let o=t[s];o.groups.indexOf(e)>-1&&i.push(o)}return i.length==0&&n.err("No node type or group '"+e+"' found"),i}function rf(n){if(n.eat("(")){let e=au(n);return n.eat(")")||n.err("Missing closing paren"),e}else if(/\W/.test(n.next))n.err("Unexpected token '"+n.next+"'");else{let e=nf(n,n.next).map(t=>(n.inline==null?n.inline=t.isInline:n.inline!=t.isInline&&n.err("Mixing inline and block content"),{type:"name",value:t}));return n.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function sf(n){let e=[[]];return i(s(n,0),t()),e;function t(){return e.push([])-1}function r(o,a,l){let c={term:l,to:a};return e[o].push(c),c}function i(o,a){o.forEach(l=>l.to=a)}function s(o,a){if(o.type=="choice")return o.exprs.reduce((l,c)=>l.concat(s(c,a)),[]);if(o.type=="seq")for(let l=0;;l++){let c=s(o.exprs[l],a);if(l==o.exprs.length-1)return c;i(c,a=t())}else if(o.type=="star"){let l=t();return r(a,l),i(s(o.expr,l),l),[r(l)]}else if(o.type=="plus"){let l=t();return i(s(o.expr,a),l),i(s(o.expr,l),l),[r(l)]}else{if(o.type=="opt")return[r(a)].concat(s(o.expr,a));if(o.type=="range"){let l=a;for(let c=0;c<o.min;c++){let u=t();i(s(o.expr,l),u),l=u}if(o.max==-1)i(s(o.expr,l),l);else for(let c=o.min;c<o.max;c++){let u=t();r(l,u),i(s(o.expr,l),u),l=u}return[r(l)]}else{if(o.type=="name")return[r(a,void 0,o.value)];throw new Error("Unknown expr type")}}}}function lu(n,e){return e-n}function ba(n,e){let t=[];return r(e),t.sort(lu);function r(i){let s=n[i];if(s.length==1&&!s[0].term)return r(s[0].to);t.push(i);for(let o=0;o<s.length;o++){let{term:a,to:l}=s[o];!a&&t.indexOf(l)==-1&&r(l)}}}function of(n){let e=Object.create(null);return t(ba(n,0));function t(r){let i=[];r.forEach(o=>{n[o].forEach(({term:a,to:l})=>{if(!a)return;let c;for(let u=0;u<i.length;u++)i[u][0]==a&&(c=i[u][1]);ba(n,l).forEach(u=>{c||i.push([a,c=[]]),c.indexOf(u)==-1&&c.push(u)})})});let s=e[r.join(",")]=new mn(r.indexOf(n.length-1)>-1);for(let o=0;o<i.length;o++){let a=i[o][1].sort(lu);s.next.push({type:i[o][0],next:e[a.join(",")]||t(a)})}return s}}function af(n,e){for(let t=0,r=[n];t<r.length;t++){let i=r[t],s=!i.validEnd,o=[];for(let a=0;a<i.next.length;a++){let{type:l,next:c}=i.next[a];o.push(l.name),s&&!(l.isText||l.hasRequiredAttrs())&&(s=!1),r.indexOf(c)==-1&&r.push(c)}s&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function uu(n){let e=Object.create(null);for(let t in n){let r=n[t];if(!r.hasDefault)return null;e[t]=r.default}return e}function cu(n,e){let t=Object.create(null);for(let r in n){let i=e&&e[r];if(i===void 0){let s=n[r];if(s.hasDefault)i=s.default;else throw new RangeError("No value supplied for attribute "+r)}t[r]=i}return t}function du(n){let e=Object.create(null);if(n)for(let t in n)e[t]=new lf(n[t]);return e}class gi{constructor(e,t,r){this.name=e,this.schema=t,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=du(r.attrs),this.defaultAttrs=uu(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==mn.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:cu(this.attrs,e)}create(e=null,t,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new ft(this,this.computeAttrs(e),w.from(t),X.setFrom(r))}createChecked(e=null,t,r){if(t=w.from(t),!this.validContent(t))throw new RangeError("Invalid content for node "+this.name);return new ft(this,this.computeAttrs(e),t,X.setFrom(r))}createAndFill(e=null,t,r){if(e=this.computeAttrs(e),t=w.from(t),t.size){let o=this.contentMatch.fillBefore(t);if(!o)return null;t=o.append(t)}let i=this.contentMatch.matchFragment(t),s=i&&i.fillBefore(w.empty,!0);return s?new ft(this,e,t.append(s),X.setFrom(r)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let t;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?t&&t.push(e[r]):t||(t=e.slice(0,r));return t?t.length?t:X.none:e}static compile(e,t){let r=Object.create(null);e.forEach((s,o)=>r[s]=new gi(s,t,o));let i=t.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let s in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}}class lf{constructor(e){this.hasDefault=Object.prototype.hasOwnProperty.call(e,"default"),this.default=e.default}get isRequired(){return!this.hasDefault}}class Zi{constructor(e,t,r,i){this.name=e,this.rank=t,this.schema=r,this.spec=i,this.attrs=du(i.attrs),this.excluded=null;let s=uu(this.attrs);this.instance=s?new X(this,s):null}create(e=null){return!e&&this.instance?this.instance:new X(this,cu(this.attrs,e))}static compile(e,t){let r=Object.create(null),i=0;return e.forEach((s,o)=>r[s]=new Zi(s,i++,t,o)),r}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}excludes(e){return this.excluded.indexOf(e)>-1}}class uf{constructor(e){this.cached=Object.create(null),this.spec={nodes:ge.from(e.nodes),marks:ge.from(e.marks||{}),topNode:e.topNode},this.nodes=gi.compile(this.spec.nodes,this),this.marks=Zi.compile(this.spec.marks,this);let t=Object.create(null);for(let r in this.nodes){if(r in this.marks)throw new RangeError(r+" can not be both a node and a mark");let i=this.nodes[r],s=i.spec.content||"",o=i.spec.marks;i.contentMatch=t[s]||(t[s]=mn.parse(s,this.nodes)),i.inlineContent=i.contentMatch.inlineContent,i.markSet=o=="_"?null:o?Da(this,o.split(" ")):o==""||!i.inlineContent?[]:null}for(let r in this.marks){let i=this.marks[r],s=i.spec.excludes;i.excluded=s==null?[i]:s==""?[]:Da(this,s.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof gi){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(t,r,i)}text(e,t){let r=this.nodes.text;return new mi(r,r.defaultAttrs,e,X.setFrom(t))}mark(e,t){return typeof e=="string"&&(e=this.marks[e]),e.create(t)}nodeFromJSON(e){return ft.fromJSON(this,e)}markFromJSON(e){return X.fromJSON(this,e)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}function Da(n,e){let t=[];for(let r=0;r<e.length;r++){let i=e[r],s=n.marks[i],o=s;if(s)t.push(s);else for(let a in n.marks){let l=n.marks[a];(i=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(i)>-1)&&t.push(o=l)}if(!o)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return t}class Wn{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[],t.forEach(r=>{r.tag?this.tags.push(r):r.style&&this.styles.push(r)}),this.normalizeLists=!this.tags.some(r=>{if(!/^(ul|ol)\b/.test(r.tag)||!r.node)return!1;let i=e.nodes[r.node];return i.contentMatch.matchType(i)})}parse(e,t={}){let r=new ka(this,t,!1);return r.addAll(e,t.from,t.to),r.finish()}parseSlice(e,t={}){let r=new ka(this,t,!0);return r.addAll(e,t.from,t.to),T.maxOpen(r.finish())}matchTag(e,t,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(ff(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||t.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(e);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(e,t,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],a=o.style;if(!(a.indexOf(e)!=0||o.context&&!r.matchesContext(o.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=t))){if(o.getAttrs){let l=o.getAttrs(t);if(l===!1)continue;o.attrs=l||void 0}return o}}}static schemaRules(e){let t=[];function r(i){let s=i.priority==null?50:i.priority,o=0;for(;o<t.length;o++){let a=t[o];if((a.priority==null?50:a.priority)<s)break}t.splice(o,0,i)}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(o=>{r(o=wa(o)),o.mark=i})}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(o=>{r(o=wa(o)),o.node=i})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Wn(e,Wn.schemaRules(e)))}}const fu={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},cf={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},hu={ol:!0,ul:!0},vi=1,yi=2,kr=4;function xa(n,e,t){return e!=null?(e?vi:0)|(e==="full"?yi:0):n&&n.whitespace=="pre"?vi|yi:t&~kr}class ri{constructor(e,t,r,i,s,o,a){this.type=e,this.attrs=t,this.marks=r,this.pendingMarks=i,this.solid=s,this.options=a,this.content=[],this.activeMarks=X.none,this.stashMarks=[],this.match=o||(a&kr?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(w.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&vi)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let t=w.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(w.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}popFromStashMark(e){for(let t=this.stashMarks.length-1;t>=0;t--)if(e.eq(this.stashMarks[t]))return this.stashMarks.splice(t,1)[0]}applyPending(e){for(let t=0,r=this.pendingMarks;t<r.length;t++){let i=r[t];(this.type?this.type.allowsMarkType(i.type):pf(i.type,e))&&!i.isInSet(this.activeMarks)&&(this.activeMarks=i.addToSet(this.activeMarks),this.pendingMarks=i.removeFromSet(this.pendingMarks))}}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!fu.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class ka{constructor(e,t,r){this.parser=e,this.options=t,this.isOpen=r,this.open=0;let i=t.topNode,s,o=xa(null,t.preserveWhitespace,0)|(r?kr:0);i?s=new ri(i.type,i.attrs,X.none,X.none,!0,t.topMatch||i.type.contentMatch,o):r?s=new ri(null,null,X.none,X.none,!0,null,o):s=new ri(e.schema.topNodeType,null,X.none,X.none,!0,null,o),this.nodes=[s],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e){if(e.nodeType==3)this.addTextNode(e);else if(e.nodeType==1){let t=e.getAttribute("style"),r=t?this.readStyles(hf(t)):null,i=this.top;if(r!=null)for(let s=0;s<r.length;s++)this.addPendingMark(r[s]);if(this.addElement(e),r!=null)for(let s=0;s<r.length;s++)this.removePendingMark(r[s],i)}}addTextNode(e){let t=e.nodeValue,r=this.top;if(r.options&yi||r.inlineContext(e)||/[^ \t\r\n\u000c]/.test(t)){if(r.options&vi)r.options&yi?t=t.replace(/\r\n?/g,`
`):t=t.replace(/\r?\n|\r/g," ");else if(t=t.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(t)&&this.open==this.nodes.length-1){let i=r.content[r.content.length-1],s=e.previousSibling;(!i||s&&s.nodeName=="BR"||i.isText&&/[ \t\r\n\u000c]$/.test(i.text))&&(t=t.slice(1))}t&&this.insertNode(this.parser.schema.text(t)),this.findInText(e)}else this.findInside(e)}addElement(e,t){let r=e.nodeName.toLowerCase(),i;hu.hasOwnProperty(r)&&this.parser.normalizeLists&&df(e);let s=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(i=this.parser.matchTag(e,this,t));if(s?s.ignore:cf.hasOwnProperty(r))this.findInside(e),this.ignoreFallback(e);else if(!s||s.skip||s.closeParent){s&&s.closeParent?this.open=Math.max(0,this.open-1):s&&s.skip.nodeType&&(e=s.skip);let o,a=this.top,l=this.needsBlock;if(fu.hasOwnProperty(r))o=!0,a.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e);return}this.addAll(e),o&&this.sync(a),this.needsBlock=l}else this.addElementByRule(e,s,s.consuming===!1?i:void 0)}leafFallback(e){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`))}ignoreFallback(e){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))}readStyles(e){let t=X.none;e:for(let r=0;r<e.length;r+=2)for(let i=void 0;;){let s=this.parser.matchStyle(e[r],e[r+1],this,i);if(!s)continue e;if(s.ignore)return null;if(t=this.parser.schema.marks[s.mark].create(s.attrs).addToSet(t),s.consuming===!1)i=s;else break}return t}addElementByRule(e,t,r){let i,s,o;t.node?(s=this.parser.schema.nodes[t.node],s.isLeaf?this.insertNode(s.create(t.attrs))||this.leafFallback(e):i=this.enter(s,t.attrs||null,t.preserveWhitespace)):(o=this.parser.schema.marks[t.mark].create(t.attrs),this.addPendingMark(o));let a=this.top;if(s&&s.isLeaf)this.findInside(e);else if(r)this.addElement(e,r);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l));else{let l=e;typeof t.contentElement=="string"?l=e.querySelector(t.contentElement):typeof t.contentElement=="function"?l=t.contentElement(e):t.contentElement&&(l=t.contentElement),this.findAround(e,l,!0),this.addAll(l)}i&&this.sync(a)&&this.open--,o&&this.removePendingMark(o,a)}addAll(e,t,r){let i=t||0;for(let s=t?e.childNodes[t]:e.firstChild,o=r==null?null:e.childNodes[r];s!=o;s=s.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(s);this.findAtPoint(e,i)}findPlace(e){let t,r;for(let i=this.open;i>=0;i--){let s=this.nodes[i],o=s.findWrapping(e);if(o&&(!t||t.length>o.length)&&(t=o,r=s,!o.length)||s.solid)break}if(!t)return!1;this.sync(r);for(let i=0;i<t.length;i++)this.enterInner(t[i],null,!1);return!0}insertNode(e){if(e.isInline&&this.needsBlock&&!this.top.type){let t=this.textblockFromContext();t&&this.enterInner(t)}if(this.findPlace(e)){this.closeExtra();let t=this.top;t.applyPending(e.type),t.match&&(t.match=t.match.matchType(e.type));let r=t.activeMarks;for(let i=0;i<e.marks.length;i++)(!t.type||t.type.allowsMarkType(e.marks[i].type))&&(r=e.marks[i].addToSet(r));return t.content.push(e.mark(r)),!0}return!1}enter(e,t,r){let i=this.findPlace(e.create(t));return i&&this.enterInner(e,t,!0,r),i}enterInner(e,t=null,r=!1,i){this.closeExtra();let s=this.top;s.applyPending(e),s.match=s.match&&s.match.matchType(e);let o=xa(e,i,s.options);s.options&kr&&s.content.length==0&&(o|=kr),this.nodes.push(new ri(e,t,s.activeMarks,s.pendingMarks,r,null,o)),this.open++}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let t=this.open;t>=0;t--)if(this.nodes[t]==e)return this.open=t,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let r=this.nodes[t].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==t&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,r){if(e!=t&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&t.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),o=(a,l)=>{for(;a>=0;a--){let c=t[a];if(c==""){if(a==t.length-1||a==0)continue;for(;l>=s;l--)if(o(a-1,l))return!0;return!1}else{let u=l>0||l==0&&i?this.nodes[l].type:r&&l>=s?r.node(l-s).type:null;if(!u||u.name!=c&&u.groups.indexOf(c)==-1)return!1;l--}}return!0};return o(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let r=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let t in this.parser.schema.nodes){let r=this.parser.schema.nodes[t];if(r.isTextblock&&r.defaultAttrs)return r}}addPendingMark(e){let t=mf(e,this.top.pendingMarks);t&&this.top.stashMarks.push(t),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)}removePendingMark(e,t){for(let r=this.open;r>=0;r--){let i=this.nodes[r];if(i.pendingMarks.lastIndexOf(e)>-1)i.pendingMarks=e.removeFromSet(i.pendingMarks);else{i.activeMarks=e.removeFromSet(i.activeMarks);let o=i.popFromStashMark(e);o&&i.type&&i.type.allowsMarkType(o.type)&&(i.activeMarks=o.addToSet(i.activeMarks))}if(i==t)break}}}function df(n){for(let e=n.firstChild,t=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&hu.hasOwnProperty(r)&&t?(t.appendChild(e),e=t):r=="li"?t=e:r&&(t=null)}}function ff(n,e){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,e)}function hf(n){let e=/\s*([\w-]+)\s*:\s*([^;]+)/g,t,r=[];for(;t=e.exec(n);)r.push(t[1],t[2].trim());return r}function wa(n){let e={};for(let t in n)e[t]=n[t];return e}function pf(n,e){let t=e.schema.nodes;for(let r in t){let i=t[r];if(!i.allowsMarkType(n))continue;let s=[],o=a=>{s.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:u}=a.edge(l);if(c==e||s.indexOf(u)<0&&o(u))return!0}};if(o(i.contentMatch))return!0}}function mf(n,e){for(let t=0;t<e.length;t++)if(n.eq(e[t]))return e[t]}class ct{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},r){r||(r=Es(t).createDocumentFragment());let i=r,s=[];return e.forEach(o=>{if(s.length||o.marks.length){let a=0,l=0;for(;a<s.length&&l<o.marks.length;){let c=o.marks[l];if(!this.marks[c.type.name]){l++;continue}if(!c.eq(s[a][0])||c.type.spec.spanning===!1)break;a++,l++}for(;a<s.length;)i=s.pop()[1];for(;l<o.marks.length;){let c=o.marks[l++],u=this.serializeMark(c,o.isInline,t);u&&(s.push([c,i]),i.appendChild(u.dom),i=u.contentDOM||u.dom)}}i.appendChild(this.serializeNodeInner(o,t))}),r}serializeNodeInner(e,t){let{dom:r,contentDOM:i}=ct.renderSpec(Es(t),this.nodes[e.type.name](e));if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,i)}return r}serializeNode(e,t={}){let r=this.serializeNodeInner(e,t);for(let i=e.marks.length-1;i>=0;i--){let s=this.serializeMark(e.marks[i],e.isInline,t);s&&((s.contentDOM||s.dom).appendChild(r),r=s.dom)}return r}serializeMark(e,t,r={}){let i=this.marks[e.type.name];return i&&ct.renderSpec(Es(r),i(e,t))}static renderSpec(e,t,r=null){if(typeof t=="string")return{dom:e.createTextNode(t)};if(t.nodeType!=null)return{dom:t};if(t.dom&&t.dom.nodeType!=null)return t;let i=t[0],s=i.indexOf(" ");s>0&&(r=i.slice(0,s),i=i.slice(s+1));let o,a=r?e.createElementNS(r,i):e.createElement(i),l=t[1],c=1;if(l&&typeof l=="object"&&l.nodeType==null&&!Array.isArray(l)){c=2;for(let u in l)if(l[u]!=null){let d=u.indexOf(" ");d>0?a.setAttributeNS(u.slice(0,d),u.slice(d+1),l[u]):a.setAttribute(u,l[u])}}for(let u=c;u<t.length;u++){let d=t[u];if(d===0){if(u<t.length-1||u>c)throw new RangeError("Content hole must be the only child of its parent node");return{dom:a,contentDOM:a}}else{let{dom:f,contentDOM:h}=ct.renderSpec(e,d,r);if(a.appendChild(f),h){if(o)throw new RangeError("Multiple content holes");o=h}}}return{dom:a,contentDOM:o}}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new ct(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=Ca(e.nodes);return t.text||(t.text=r=>r.text),t}static marksFromSchema(e){return Ca(e.marks)}}function Ca(n){let e={};for(let t in n){let r=n[t].spec.toDOM;r&&(e[t]=r)}return e}function Es(n){return n.document||window.document}const pu=65535,mu=Math.pow(2,16);function gf(n,e){return n+e*mu}function Ea(n){return n&pu}function vf(n){return(n-(n&pu))/mu}const gu=1,vu=2,li=4,yu=8;class Qs{constructor(e,t,r){this.pos=e,this.delInfo=t,this.recover=r}get deleted(){return(this.delInfo&yu)>0}get deletedBefore(){return(this.delInfo&(gu|li))>0}get deletedAfter(){return(this.delInfo&(vu|li))>0}get deletedAcross(){return(this.delInfo&li)>0}}class Qe{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&Qe.empty)return Qe.empty}recover(e){let t=0,r=Ea(e);if(!this.inverted)for(let i=0;i<r;i++)t+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+t+vf(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,r){let i=0,s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?i:0);if(l>e)break;let c=this.ranges[a+s],u=this.ranges[a+o],d=l+c;if(e<=d){let f=c?e==l?-1:e==d?1:t:t,h=l+i+(f<0?0:u);if(r)return h;let p=e==(t<0?l:d)?null:gf(a/3,e-l),m=e==l?vu:e==d?gu:li;return(t<0?e!=l:e!=d)&&(m|=yu),new Qs(h,m,p)}i+=u-c}return r?e+i:new Qs(e+i,0,null)}touches(e,t){let r=0,i=Ea(t),s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>e)break;let c=this.ranges[a+s],u=l+c;if(e<=u&&a==i*3)return!0;r+=this.ranges[a+o]-c}return!1}forEach(e){let t=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,s=0;i<this.ranges.length;i+=3){let o=this.ranges[i],a=o-(this.inverted?s:0),l=o+(this.inverted?0:s),c=this.ranges[i+t],u=this.ranges[i+r];e(a,a+c,l,l+u),s+=u-c}}invert(){return new Qe(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?Qe.empty:new Qe(e<0?[0,-e,0]:[0,0,e])}}Qe.empty=new Qe([]);class wr{constructor(e=[],t,r=0,i=e.length){this.maps=e,this.mirror=t,this.from=r,this.to=i}slice(e=0,t=this.maps.length){return new wr(this.maps,this.mirror,e,t)}copy(){return new wr(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,t){this.to=this.maps.push(e),t!=null&&this.setMirror(this.maps.length-1,t)}appendMapping(e){for(let t=0,r=this.maps.length;t<e.maps.length;t++){let i=e.getMirror(t);this.appendMap(e.maps[t],i!=null&&i<t?r+i:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,r=this.maps.length+e.maps.length;t>=0;t--){let i=e.getMirror(t);this.appendMap(e.maps[t].invert(),i!=null&&i>t?r-i-1:void 0)}}invert(){let e=new wr;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let r=this.from;r<this.to;r++)e=this.maps[r].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,r){let i=0;for(let s=this.from;s<this.to;s++){let o=this.maps[s],a=o.mapResult(e,t);if(a.recover!=null){let l=this.getMirror(s);if(l!=null&&l>s&&l<this.to){s=l,e=this.maps[l].recover(a.recover);continue}}i|=a.delInfo,e=a.pos}return r?e:new Qs(e,i,null)}}const Ss=Object.create(null);class qt{getMap(){return Qe.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=Ss[t.stepType];if(!r)throw new RangeError(`No step type ${t.stepType} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in Ss)throw new RangeError("Duplicate use of step JSON ID "+e);return Ss[e]=t,t.prototype.jsonID=e,t}}class $e{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new $e(e,null)}static fail(e){return new $e(null,e)}static fromReplace(e,t,r,i){try{return $e.ok(e.replace(t,r,i))}catch(s){if(s instanceof Nr)return $e.fail(s.message);throw s}}}function So(n,e,t){let r=[];for(let i=0;i<n.childCount;i++){let s=n.child(i);s.content.size&&(s=s.copy(So(s.content,e,s))),s.isInline&&(s=e(s,t,i)),r.push(s)}return w.fromArray(r)}class It extends qt{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),s=new T(So(t.content,(o,a)=>!o.isAtom||!a.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),i),t.openStart,t.openEnd);return $e.fromReplace(e,this.from,this.to,s)}invert(){return new dt(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new It(t.pos,r.pos,this.mark)}merge(e){return e instanceof It&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new It(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new It(t.from,t.to,e.markFromJSON(t.mark))}}qt.jsonID("addMark",It);class dt extends qt{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=new T(So(t.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),t.openStart,t.openEnd);return $e.fromReplace(e,this.from,this.to,r)}invert(){return new It(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new dt(t.pos,r.pos,this.mark)}merge(e){return e instanceof dt&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new dt(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new dt(t.from,t.to,e.markFromJSON(t.mark))}}qt.jsonID("removeMark",dt);class ke extends qt{constructor(e,t,r,i=!1){super(),this.from=e,this.to=t,this.slice=r,this.structure=i}apply(e){return this.structure&&Zs(e,this.from,this.to)?$e.fail("Structure replace would overwrite content"):$e.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new Qe([this.from,this.to-this.from,this.slice.size])}invert(e){return new ke(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deletedAcross&&r.deletedAcross?null:new ke(t.pos,Math.max(t.pos,r.pos),this.slice)}merge(e){if(!(e instanceof ke)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let t=this.slice.size+e.slice.size==0?T.empty:new T(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new ke(this.from,this.to+(e.to-e.from),t,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let t=this.slice.size+e.slice.size==0?T.empty:new T(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new ke(e.from,this.to,t,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new ke(t.from,t.to,T.fromJSON(e,t.slice),!!t.structure)}}qt.jsonID("replace",ke);class pe extends qt{constructor(e,t,r,i,s,o,a=!1){super(),this.from=e,this.to=t,this.gapFrom=r,this.gapTo=i,this.slice=s,this.insert=o,this.structure=a}apply(e){if(this.structure&&(Zs(e,this.from,this.gapFrom)||Zs(e,this.gapTo,this.to)))return $e.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return $e.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,t.content);return r?$e.fromReplace(e,this.from,this.to,r):$e.fail("Content does not fit in gap")}getMap(){return new Qe([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new pe(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=e.map(this.gapFrom,-1),s=e.map(this.gapTo,1);return t.deletedAcross&&r.deletedAcross||i<t.pos||s>r.pos?null:new pe(t.pos,r.pos,i,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number"||typeof t.gapFrom!="number"||typeof t.gapTo!="number"||typeof t.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new pe(t.from,t.to,t.gapFrom,t.gapTo,T.fromJSON(e,t.slice),t.insert,!!t.structure)}}qt.jsonID("replaceAround",pe);function Zs(n,e,t){let r=n.resolve(e),i=t-e,s=r.depth;for(;i>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,i--;if(i>0){let o=r.node(s).maybeChild(r.indexAfter(s));for(;i>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,i--}}return!1}function yf(n,e,t,r){let i=[],s=[],o,a;n.doc.nodesBetween(e,t,(l,c,u)=>{if(!l.isInline)return;let d=l.marks;if(!r.isInSet(d)&&u.type.allowsMarkType(r.type)){let f=Math.max(c,e),h=Math.min(c+l.nodeSize,t),p=r.addToSet(d);for(let m=0;m<d.length;m++)d[m].isInSet(p)||(o&&o.to==f&&o.mark.eq(d[m])?o.to=h:i.push(o=new dt(f,h,d[m])));a&&a.to==f?a.to=h:s.push(a=new It(f,h,r))}}),i.forEach(l=>n.step(l)),s.forEach(l=>n.step(l))}function bf(n,e,t,r){let i=[],s=0;n.doc.nodesBetween(e,t,(o,a)=>{if(!o.isInline)return;s++;let l=null;if(r instanceof Zi){let c=o.marks,u;for(;u=r.isInSet(c);)(l||(l=[])).push(u),c=u.removeFromSet(c)}else r?r.isInSet(o.marks)&&(l=[r]):l=o.marks;if(l&&l.length){let c=Math.min(a+o.nodeSize,t);for(let u=0;u<l.length;u++){let d=l[u],f;for(let h=0;h<i.length;h++){let p=i[h];p.step==s-1&&d.eq(i[h].style)&&(f=p)}f?(f.to=c,f.step=s):i.push({style:d,from:Math.max(a,e),to:c,step:s})}}}),i.forEach(o=>n.step(new dt(o.from,o.to,o.style)))}function Df(n,e,t,r=t.contentMatch){let i=n.doc.nodeAt(e),s=[],o=e+1;for(let a=0;a<i.childCount;a++){let l=i.child(a),c=o+l.nodeSize,u=r.matchType(l.type);if(!u)s.push(new ke(o,c,T.empty));else{r=u;for(let d=0;d<l.marks.length;d++)t.allowsMarkType(l.marks[d].type)||n.step(new dt(o,c,l.marks[d]))}o=c}if(!r.validEnd){let a=r.fillBefore(w.empty,!0);n.replace(o,o,new T(a,0,0))}for(let a=s.length-1;a>=0;a--)n.step(s[a])}function xf(n,e,t){return(e==0||n.canReplace(e,n.childCount))&&(t==n.childCount||n.canReplace(0,t))}function rr(n){let t=n.parent.content.cutByIndex(n.startIndex,n.endIndex);for(let r=n.depth;;--r){let i=n.$from.node(r),s=n.$from.index(r),o=n.$to.indexAfter(r);if(r<n.depth&&i.canReplace(s,o,t))return r;if(r==0||i.type.spec.isolating||!xf(i,s,o))break}return null}function kf(n,e,t){let{$from:r,$to:i,depth:s}=e,o=r.before(s+1),a=i.after(s+1),l=o,c=a,u=w.empty,d=0;for(let p=s,m=!1;p>t;p--)m||r.index(p)>0?(m=!0,u=w.from(r.node(p).copy(u)),d++):l--;let f=w.empty,h=0;for(let p=s,m=!1;p>t;p--)m||i.after(p+1)<i.end(p)?(m=!0,f=w.from(i.node(p).copy(f)),h++):c++;n.step(new pe(l,c,o,a,new T(u.append(f),d,h),u.size-d,!0))}function bu(n,e,t=null,r=n){let i=wf(n,e),s=i&&Cf(r,e);return s?i.map(Sa).concat({type:e,attrs:t}).concat(s.map(Sa)):null}function Sa(n){return{type:n,attrs:null}}function wf(n,e){let{parent:t,startIndex:r,endIndex:i}=n,s=t.contentMatchAt(r).findWrapping(e);if(!s)return null;let o=s.length?s[0]:e;return t.canReplaceWith(r,i,o)?s:null}function Cf(n,e){let{parent:t,startIndex:r,endIndex:i}=n,s=t.child(r),o=e.contentMatch.findWrapping(s.type);if(!o)return null;let l=(o.length?o[o.length-1]:e).contentMatch;for(let c=r;l&&c<i;c++)l=l.matchType(t.child(c).type);return!l||!l.validEnd?null:o}function Ef(n,e,t){let r=w.empty;for(let o=t.length-1;o>=0;o--){if(r.size){let a=t[o].type.contentMatch.matchFragment(r);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=w.from(t[o].type.create(t[o].attrs,r))}let i=e.start,s=e.end;n.step(new pe(i,s,i,s,new T(r,0,0),t.length,!0))}function Sf(n,e,t,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=n.steps.length;n.doc.nodesBetween(e,t,(o,a)=>{if(o.isTextblock&&!o.hasMarkup(r,i)&&Af(n.doc,n.mapping.slice(s).map(a),r)){n.clearIncompatible(n.mapping.slice(s).map(a,1),r);let l=n.mapping.slice(s),c=l.map(a,1),u=l.map(a+o.nodeSize,1);return n.step(new pe(c,u,c+1,u-1,new T(w.from(r.create(i,null,o.marks)),0,0),1,!0)),!1}})}function Af(n,e,t){let r=n.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,t)}function Of(n,e,t,r,i){let s=n.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");t||(t=s.type);let o=t.create(r,null,i||s.marks);if(s.isLeaf)return n.replaceWith(e,e+s.nodeSize,o);if(!t.validContent(s.content))throw new RangeError("Invalid content for node type "+t.name);n.step(new pe(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new T(w.from(o),0,0),1,!0))}function zn(n,e,t=1,r){let i=n.resolve(e),s=i.depth-t,o=r&&r[r.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!o.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let c=i.depth-1,u=t-2;c>s;c--,u--){let d=i.node(c),f=i.index(c);if(d.type.spec.isolating)return!1;let h=d.content.cutByIndex(f,d.childCount),p=r&&r[u]||d;if(p!=d&&(h=h.replaceChild(0,p.type.create(p.attrs))),!d.canReplace(f+1,d.childCount)||!p.type.validContent(h))return!1}let a=i.indexAfter(s),l=r&&r[0];return i.node(s).canReplaceWith(a,a,l?l.type:i.node(s+1).type)}function Tf(n,e,t=1,r){let i=n.doc.resolve(e),s=w.empty,o=w.empty;for(let a=i.depth,l=i.depth-t,c=t-1;a>l;a--,c--){s=w.from(i.node(a).copy(s));let u=r&&r[c];o=w.from(u?u.type.create(u.attrs,o):i.node(a).copy(o))}n.step(new ke(e,e,new T(s.append(o),t,t),!0))}function es(n,e){let t=n.resolve(e),r=t.index();return Mf(t.nodeBefore,t.nodeAfter)&&t.parent.canReplace(r,r+1)}function Mf(n,e){return!!(n&&e&&!n.isLeaf&&n.canAppend(e))}function _f(n,e,t){let r=new ke(e-t,e+t,T.empty,!0);n.step(r)}function Ff(n,e,t){let r=n.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),t))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let s=r.index(i);if(r.node(i).canReplaceWith(s,s,t))return r.before(i+1);if(s>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let s=r.indexAfter(i);if(r.node(i).canReplaceWith(s,s,t))return r.after(i+1);if(s<r.node(i).childCount)return null}return null}function Nf(n,e,t){let r=n.resolve(e);if(!t.content.size)return e;let i=t.content;for(let s=0;s<t.openStart;s++)i=i.firstChild.content;for(let s=1;s<=(t.openStart==0&&t.size?2:1);s++)for(let o=r.depth;o>=0;o--){let a=o==r.depth?0:r.pos<=(r.start(o+1)+r.end(o+1))/2?-1:1,l=r.index(o)+(a>0?1:0),c=r.node(o),u=!1;if(s==1)u=c.canReplace(l,l,i);else{let d=c.contentMatchAt(l).findWrapping(i.firstChild.type);u=d&&c.canReplaceWith(l,l,d[0])}if(u)return a==0?r.pos:a<0?r.before(o+1):r.after(o+1)}return null}function Ao(n,e,t=e,r=T.empty){if(e==t&&!r.size)return null;let i=n.resolve(e),s=n.resolve(t);return Du(i,s,r)?new ke(e,t,r):new Bf(i,s,r).fit()}function Du(n,e,t){return!t.openStart&&!t.openEnd&&n.start()==e.start()&&n.parent.canReplace(n.index(),e.index(),t.content)}class Bf{constructor(e,t,r){this.$from=e,this.$to=t,this.unplaced=r,this.frontier=[],this.placed=w.empty;for(let i=0;i<=e.depth;i++){let s=e.node(i);this.frontier.push({type:s.type,match:s.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=w.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let s=this.placed,o=r.depth,a=i.depth;for(;o&&a&&s.childCount==1;)s=s.firstChild.content,o--,a--;let l=new T(s,o,a);return e>-1?new pe(r.pos,e,this.$to.pos,this.$to.end(),l,t):l.size||r.pos!=this.$to.pos?new ke(r.pos,i.pos,l):null}findFittable(){for(let e=1;e<=2;e++)for(let t=this.unplaced.openStart;t>=0;t--){let r,i=null;t?(i=As(this.unplaced.content,t-1).firstChild,r=i.content):r=this.unplaced.content;let s=r.firstChild;for(let o=this.depth;o>=0;o--){let{type:a,match:l}=this.frontier[o],c,u=null;if(e==1&&(s?l.matchType(s.type)||(u=l.fillBefore(w.from(s),!1)):i&&a.compatibleContent(i.type)))return{sliceDepth:t,frontierDepth:o,parent:i,inject:u};if(e==2&&s&&(c=l.findWrapping(s.type)))return{sliceDepth:t,frontierDepth:o,parent:i,wrap:c};if(i&&l.matchType(i.type))break}}}openMore(){let{content:e,openStart:t,openEnd:r}=this.unplaced,i=As(e,t);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new T(e,t+1,Math.max(r,i.size+t>=e.size-r?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:r}=this.unplaced,i=As(e,t);if(i.childCount<=1&&t>0){let s=e.size-t<=t+i.size;this.unplaced=new T(vr(e,t-1,1),t-1,s?t-1:r)}else this.unplaced=new T(vr(e,t,1),t,r)}placeNodes({sliceDepth:e,frontierDepth:t,parent:r,inject:i,wrap:s}){for(;this.depth>t;)this.closeFrontierNode();if(s)for(let m=0;m<s.length;m++)this.openFrontierNode(s[m]);let o=this.unplaced,a=r?r.content:o.content,l=o.openStart-e,c=0,u=[],{match:d,type:f}=this.frontier[t];if(i){for(let m=0;m<i.childCount;m++)u.push(i.child(m));d=d.matchFragment(i)}let h=a.size+e-(o.content.size-o.openEnd);for(;c<a.childCount;){let m=a.child(c),y=d.matchType(m.type);if(!y)break;c++,(c>1||l==0||m.content.size)&&(d=y,u.push(xu(m.mark(f.allowedMarks(m.marks)),c==1?l:0,c==a.childCount?h:-1)))}let p=c==a.childCount;p||(h=-1),this.placed=yr(this.placed,t,w.from(u)),this.frontier[t].match=d,p&&h<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let m=0,y=a;m<h;m++){let b=y.lastChild;this.frontier.push({type:b.type,match:b.contentMatchAt(b.childCount)}),y=b.content}this.unplaced=p?e==0?T.empty:new T(vr(o.content,e-1,1),e-1,h<0?o.openEnd:e-1):new T(vr(o.content,e,c),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!Os(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:r,type:i}=this.frontier[t],s=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),o=Os(e,t,i,r,s);if(!!o){for(let a=t-1;a>=0;a--){let{match:l,type:c}=this.frontier[a],u=Os(e,a,c,l,!0);if(!u||u.childCount)continue e}return{depth:t,fit:o,move:s?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=yr(this.placed,t.depth,t.fit)),e=t.move;for(let r=t.depth+1;r<=e.depth;r++){let i=e.node(r),s=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,s)}return e}openFrontierNode(e,t=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=yr(this.placed,this.depth,w.from(e.create(t,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(w.empty,!0);t.childCount&&(this.placed=yr(this.placed,this.frontier.length,t))}}function vr(n,e,t){return e==0?n.cutByIndex(t,n.childCount):n.replaceChild(0,n.firstChild.copy(vr(n.firstChild.content,e-1,t)))}function yr(n,e,t){return e==0?n.append(t):n.replaceChild(n.childCount-1,n.lastChild.copy(yr(n.lastChild.content,e-1,t)))}function As(n,e){for(let t=0;t<e;t++)n=n.firstChild.content;return n}function xu(n,e,t){if(e<=0)return n;let r=n.content;return e>1&&(r=r.replaceChild(0,xu(r.firstChild,e-1,r.childCount==1?t-1:0))),e>0&&(r=n.type.contentMatch.fillBefore(r).append(r),t<=0&&(r=r.append(n.type.contentMatch.matchFragment(r).fillBefore(w.empty,!0)))),n.copy(r)}function Os(n,e,t,r,i){let s=n.node(e),o=i?n.indexAfter(e):n.index(e);if(o==s.childCount&&!t.compatibleContent(s.type))return null;let a=r.fillBefore(s.content,!0,o);return a&&!Rf(t,s.content,o)?a:null}function Rf(n,e,t){for(let r=t;r<e.childCount;r++)if(!n.allowsMarks(e.child(r).marks))return!0;return!1}function If(n){return n.spec.defining||n.spec.definingForContent}function Pf(n,e,t,r){if(!r.size)return n.deleteRange(e,t);let i=n.doc.resolve(e),s=n.doc.resolve(t);if(Du(i,s,r))return n.step(new ke(e,t,r));let o=wu(i,n.doc.resolve(t));o[o.length-1]==0&&o.pop();let a=-(i.depth+1);o.unshift(a);for(let f=i.depth,h=i.pos-1;f>0;f--,h--){let p=i.node(f).type.spec;if(p.defining||p.definingAsContext||p.isolating)break;o.indexOf(f)>-1?a=f:i.before(f)==h&&o.splice(1,0,-f)}let l=o.indexOf(a),c=[],u=r.openStart;for(let f=r.content,h=0;;h++){let p=f.firstChild;if(c.push(p),h==r.openStart)break;f=p.content}for(let f=u-1;f>=0;f--){let h=c[f].type,p=If(h);if(p&&i.node(l).type!=h)u=f;else if(p||!h.isTextblock)break}for(let f=r.openStart;f>=0;f--){let h=(f+u+1)%(r.openStart+1),p=c[h];if(!!p)for(let m=0;m<o.length;m++){let y=o[(m+l)%o.length],b=!0;y<0&&(b=!1,y=-y);let k=i.node(y-1),O=i.index(y-1);if(k.canReplaceWith(O,O,p.type,p.marks))return n.replace(i.before(y),b?s.after(y):t,new T(ku(r.content,0,r.openStart,h),h,r.openEnd))}}let d=n.steps.length;for(let f=o.length-1;f>=0&&(n.replace(e,t,r),!(n.steps.length>d));f--){let h=o[f];h<0||(e=i.before(h),t=s.after(h))}}function ku(n,e,t,r,i){if(e<t){let s=n.firstChild;n=n.replaceChild(0,s.copy(ku(s.content,e+1,t,r,s)))}if(e>r){let s=i.contentMatchAt(0),o=s.fillBefore(n).append(n);n=o.append(s.matchFragment(o).fillBefore(w.empty,!0))}return n}function Lf(n,e,t,r){if(!r.isInline&&e==t&&n.doc.resolve(e).parent.content.size){let i=Ff(n.doc,e,r.type);i!=null&&(e=t=i)}n.replaceRange(e,t,new T(w.from(r),0,0))}function $f(n,e,t){let r=n.doc.resolve(e),i=n.doc.resolve(t),s=wu(r,i);for(let o=0;o<s.length;o++){let a=s[o],l=o==s.length-1;if(l&&a==0||r.node(a).type.contentMatch.validEnd)return n.delete(r.start(a),i.end(a));if(a>0&&(l||r.node(a-1).canReplace(r.index(a-1),i.indexAfter(a-1))))return n.delete(r.before(a),i.after(a))}for(let o=1;o<=r.depth&&o<=i.depth;o++)if(e-r.start(o)==r.depth-o&&t>r.end(o)&&i.end(o)-t!=i.depth-o)return n.delete(r.before(o),t);n.delete(e,t)}function wu(n,e){let t=[],r=Math.min(n.depth,e.depth);for(let i=r;i>=0;i--){let s=n.start(i);if(s<n.pos-(n.depth-i)||e.end(i)>e.pos+(e.depth-i)||n.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(s==e.start(i)||i==n.depth&&i==e.depth&&n.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==s-1)&&t.push(i)}return t}let Un=class extends Error{};Un=function n(e){let t=Error.call(this,e);return t.__proto__=n.prototype,t};Un.prototype=Object.create(Error.prototype);Un.prototype.constructor=Un;Un.prototype.name="TransformError";class Cu{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new wr}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new Un(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,r=T.empty){let i=Ao(this.doc,e,t,r);return i&&this.step(i),this}replaceWith(e,t,r){return this.replace(e,t,new T(w.from(r),0,0))}delete(e,t){return this.replace(e,t,T.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,r){return Pf(this,e,t,r),this}replaceRangeWith(e,t,r){return Lf(this,e,t,r),this}deleteRange(e,t){return $f(this,e,t),this}lift(e,t){return kf(this,e,t),this}join(e,t=1){return _f(this,e,t),this}wrap(e,t){return Ef(this,e,t),this}setBlockType(e,t=e,r,i=null){return Sf(this,e,t,r,i),this}setNodeMarkup(e,t,r=null,i=[]){return Of(this,e,t,r,i),this}split(e,t=1,r){return Tf(this,e,t,r),this}addMark(e,t,r){return yf(this,e,t,r),this}removeMark(e,t,r){return bf(this,e,t,r),this}clearIncompatible(e,t,r){return Df(this,e,t,r),this}}const Ts=Object.create(null);class j{constructor(e,t,r){this.$anchor=e,this.$head=t,this.ranges=r||[new zf(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=T.empty){let r=t.content.lastChild,i=null;for(let a=0;a<t.openEnd;a++)i=r,r=r.lastChild;let s=e.steps.length,o=this.ranges;for(let a=0;a<o.length;a++){let{$from:l,$to:c}=o[a],u=e.mapping.slice(s);e.replaceRange(u.map(l.pos),u.map(c.pos),a?T.empty:t),a==0&&Ta(e,s,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,t){let r=e.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:o,$to:a}=i[s],l=e.mapping.slice(r),c=l.map(o.pos),u=l.map(a.pos);s?e.deleteRange(c,u):(e.replaceRangeWith(c,u,t),Ta(e,r,t.isInline?-1:1))}}static findFrom(e,t,r=!1){let i=e.parent.inlineContent?new q(e):An(e.node(0),e.parent,e.pos,e.index(),t,r);if(i)return i;for(let s=e.depth-1;s>=0;s--){let o=t<0?An(e.node(0),e.node(s),e.before(s+1),e.index(s),t,r):An(e.node(0),e.node(s),e.after(s+1),e.index(s)+1,t,r);if(o)return o}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new tt(e.node(0))}static atStart(e){return An(e,e,0,0,1)||new tt(e)}static atEnd(e){return An(e,e,e.content.size,e.childCount,-1)||new tt(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=Ts[t.type];if(!r)throw new RangeError(`No selection type ${t.type} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in Ts)throw new RangeError("Duplicate use of selection JSON ID "+e);return Ts[e]=t,t.prototype.jsonID=e,t}getBookmark(){return q.between(this.$anchor,this.$head).getBookmark()}}j.prototype.visible=!0;class zf{constructor(e,t){this.$from=e,this.$to=t}}let Aa=!1;function Oa(n){!Aa&&!n.parent.inlineContent&&(Aa=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+n.parent.type.name+")"))}class q extends j{constructor(e,t=e){Oa(e),Oa(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let r=e.resolve(t.map(this.head));if(!r.parent.inlineContent)return j.near(r);let i=e.resolve(t.map(this.anchor));return new q(i.parent.inlineContent?i:r,r)}replace(e,t=T.empty){if(super.replace(e,t),t==T.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof q&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new ts(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if(typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new q(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,r=t){let i=e.resolve(t);return new this(i,r==t?i:e.resolve(r))}static between(e,t,r){let i=e.pos-t.pos;if((!r||i)&&(r=i>=0?1:-1),!t.parent.inlineContent){let s=j.findFrom(t,r,!0)||j.findFrom(t,-r,!0);if(s)t=s.$head;else return j.near(t,r)}return e.parent.inlineContent||(i==0?e=t:(e=(j.findFrom(e,-r,!0)||j.findFrom(e,r,!0)).$anchor,e.pos<t.pos!=i<0&&(e=t))),new q(e,t)}}j.jsonID("text",q);class ts{constructor(e,t){this.anchor=e,this.head=t}map(e){return new ts(e.map(this.anchor),e.map(this.head))}resolve(e){return q.between(e.resolve(this.anchor),e.resolve(this.head))}}class P extends j{constructor(e){let t=e.nodeAfter,r=e.node(0).resolve(e.pos+t.nodeSize);super(e,r),this.node=t}map(e,t){let{deleted:r,pos:i}=t.mapResult(this.anchor),s=e.resolve(i);return r?j.near(s):new P(s)}content(){return new T(w.from(this.node),0,0)}eq(e){return e instanceof P&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new Oo(this.anchor)}static fromJSON(e,t){if(typeof t.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new P(e.resolve(t.anchor))}static create(e,t){return new P(e.resolve(t))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}P.prototype.visible=!1;j.jsonID("node",P);class Oo{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:r}=e.mapResult(this.anchor);return t?new ts(r,r):new Oo(r)}resolve(e){let t=e.resolve(this.anchor),r=t.nodeAfter;return r&&P.isSelectable(r)?new P(t):j.near(t)}}class tt extends j{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=T.empty){if(t==T.empty){e.delete(0,e.doc.content.size);let r=j.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new tt(e)}map(e){return new tt(e)}eq(e){return e instanceof tt}getBookmark(){return Vf}}j.jsonID("all",tt);const Vf={map(){return this},resolve(n){return new tt(n)}};function An(n,e,t,r,i,s=!1){if(e.inlineContent)return q.create(n,t);for(let o=r-(i>0?0:1);i>0?o<e.childCount:o>=0;o+=i){let a=e.child(o);if(a.isAtom){if(!s&&P.isSelectable(a))return P.create(n,t-(i<0?a.nodeSize:0))}else{let l=An(n,a,t+i,i<0?a.childCount:0,i,s);if(l)return l}t+=a.nodeSize*i}return null}function Ta(n,e,t){let r=n.steps.length-1;if(r<e)return;let i=n.steps[r];if(!(i instanceof ke||i instanceof pe))return;let s=n.mapping.maps[r],o;s.forEach((a,l,c,u)=>{o==null&&(o=u)}),n.setSelection(j.near(n.doc.resolve(o),t))}const Ma=1,ii=2,_a=4;class jf extends Cu{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|Ma)&~ii,this.storedMarks=null,this}get selectionSet(){return(this.updated&Ma)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=ii,this}ensureMarks(e){return X.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&ii)>0}addStep(e,t){super.addStep(e,t),this.updated=this.updated&~ii,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let r=this.selection;return t&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||X.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,r){let i=this.doc.type.schema;if(t==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=t),r=r==null?t:r,!e)return this.deleteRange(t,r);let s=this.storedMarks;if(!s){let o=this.doc.resolve(t);s=r==t?o.marks():o.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(t,r,i.text(e,s)),this.selection.empty||this.setSelection(j.near(this.selection.$to)),this}}setMeta(e,t){return this.meta[typeof e=="string"?e:e.key]=t,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=_a,this}get scrolledIntoView(){return(this.updated&_a)>0}}function Fa(n,e){return!e||!n?n:n.bind(e)}class br{constructor(e,t,r){this.name=e,this.init=Fa(t.init,r),this.apply=Fa(t.apply,r)}}const Hf=[new br("doc",{init(n){return n.doc||n.schema.topNodeType.createAndFill()},apply(n){return n.doc}}),new br("selection",{init(n,e){return n.selection||j.atStart(e.doc)},apply(n){return n.selection}}),new br("storedMarks",{init(n){return n.storedMarks||null},apply(n,e,t,r){return r.selection.$cursor?n.storedMarks:null}}),new br("scrollToSelection",{init(){return 0},apply(n,e){return n.scrolledIntoView?e+1:e}})];class Ms{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=Hf.slice(),t&&t.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new br(r.key,r.spec.state,r))})}}class Mn{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=t){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],r=this.applyInner(e),i=null;for(;;){let s=!1;for(let o=0;o<this.config.plugins.length;o++){let a=this.config.plugins[o];if(a.spec.appendTransaction){let l=i?i[o].n:0,c=i?i[o].state:this,u=l<t.length&&a.spec.appendTransaction.call(a,l?t.slice(l):t,c,r);if(u&&r.filterTransaction(u,o)){if(u.setMeta("appendedTransaction",e),!i){i=[];for(let d=0;d<this.config.plugins.length;d++)i.push(d<o?{state:r,n:t.length}:{state:this,n:0})}t.push(u),r=r.applyInner(u),s=!0}i&&(i[o]={state:r,n:t.length})}}if(!s)return{state:r,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new Mn(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let s=r[i];t[s.name]=s.apply(e,this[s.name],this,t)}return t}get tr(){return new jf(this)}static create(e){let t=new Ms(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new Mn(t);for(let i=0;i<t.fields.length;i++)r[t.fields[i].name]=t.fields[i].init(e,r);return r}reconfigure(e){let t=new Ms(this.schema,e.plugins),r=t.fields,i=new Mn(t);for(let s=0;s<r.length;s++){let o=r[s].name;i[o]=this.hasOwnProperty(o)?this[o]:r[s].init(e,i)}return i}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],s=i.spec.state;s&&s.toJSON&&(t[r]=s.toJSON.call(i,this[i.key]))}return t}static fromJSON(e,t,r){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new Ms(e.schema,e.plugins),s=new Mn(i);return i.fields.forEach(o=>{if(o.name=="doc")s.doc=ft.fromJSON(e.schema,t.doc);else if(o.name=="selection")s.selection=j.fromJSON(s.doc,t.selection);else if(o.name=="storedMarks")t.storedMarks&&(s.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let a in r){let l=r[a],c=l.spec.state;if(l.key==o.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(t,a)){s[o.name]=c.fromJSON.call(l,e,t[a],s);return}}s[o.name]=o.init(e,s)}}),s}}function Eu(n,e,t){for(let r in n){let i=n[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=Eu(i,e,{})),t[r]=i}return t}class je{constructor(e){this.spec=e,this.props={},e.props&&Eu(e.props,this,this.props),this.key=e.key?e.key.key:Su("plugin")}getState(e){return e[this.key]}}const _s=Object.create(null);function Su(n){return n in _s?n+"$"+ ++_s[n]:(_s[n]=0,n+"$")}class vt{constructor(e="key"){this.key=Su(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const Vt=typeof navigator<"u"?navigator:null,Na=typeof document<"u"?document:null,Wt=Vt&&Vt.userAgent||"",eo=/Edge\/(\d+)/.exec(Wt),Au=/MSIE \d/.exec(Wt),to=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Wt),ze=!!(Au||to||eo),Lt=Au?document.documentMode:to?+to[1]:eo?+eo[1]:0,pt=!ze&&/gecko\/(\d+)/i.test(Wt);pt&&+(/Firefox\/(\d+)/.exec(Wt)||[0,0])[1];const no=!ze&&/Chrome\/(\d+)/.exec(Wt),Se=!!no,qf=no?+no[1]:0,Be=!ze&&!!Vt&&/Apple Computer/.test(Vt.vendor),Kn=Be&&(/Mobile\/\w+/.test(Wt)||!!Vt&&Vt.maxTouchPoints>2),Ue=Kn||(Vt?/Mac/.test(Vt.platform):!1),lt=/Android \d/.test(Wt),ns=!!Na&&"webkitFontSmoothing"in Na.documentElement.style,Wf=ns?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,Le=function(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e},To=function(n){let e=n.assignedSlot||n.parentNode;return e&&e.nodeType==11?e.host:e};let Ba=null;const kt=function(n,e,t){let r=Ba||(Ba=document.createRange());return r.setEnd(n,t==null?n.nodeValue.length:t),r.setStart(n,e||0),r},Rr=function(n,e,t,r){return t&&(Ra(n,e,t,r,-1)||Ra(n,e,t,r,1))},Uf=/^(img|br|input|textarea|hr)$/i;function Ra(n,e,t,r,i){for(;;){if(n==t&&e==r)return!0;if(e==(i<0?0:ut(n))){let s=n.parentNode;if(!s||s.nodeType!=1||Jf(n)||Uf.test(n.nodeName)||n.contentEditable=="false")return!1;e=Le(n)+(i<0?0:1),n=s}else if(n.nodeType==1){if(n=n.childNodes[e+(i<0?-1:0)],n.contentEditable=="false")return!1;e=i<0?ut(n):0}else return!1}}function ut(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function Kf(n,e,t){for(let r=e==0,i=e==ut(n);r||i;){if(n==t)return!0;let s=Le(n);if(n=n.parentNode,!n)return!1;r=r&&s==0,i=i&&s==ut(n)}}function Jf(n){let e;for(let t=n;t&&!(e=t.pmViewDesc);t=t.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==n||e.contentDOM==n)}const Mo=function(n){let e=n.isCollapsed;return e&&Se&&n.rangeCount&&!n.getRangeAt(0).collapsed&&(e=!1),e};function _n(n,e){let t=document.createEvent("Event");return t.initEvent("keydown",!0,!0),t.keyCode=n,t.key=t.code=e,t}function Gf(n){return{left:0,right:n.documentElement.clientWidth,top:0,bottom:n.documentElement.clientHeight}}function _t(n,e){return typeof n=="number"?n:n[e]}function Yf(n){let e=n.getBoundingClientRect(),t=e.width/n.offsetWidth||1,r=e.height/n.offsetHeight||1;return{left:e.left,right:e.left+n.clientWidth*t,top:e.top,bottom:e.top+n.clientHeight*r}}function Ia(n,e,t){let r=n.someProp("scrollThreshold")||0,i=n.someProp("scrollMargin")||5,s=n.dom.ownerDocument;for(let o=t||n.dom;o;o=To(o)){if(o.nodeType!=1)continue;let a=o,l=a==s.body,c=l?Gf(s):Yf(a),u=0,d=0;if(e.top<c.top+_t(r,"top")?d=-(c.top-e.top+_t(i,"top")):e.bottom>c.bottom-_t(r,"bottom")&&(d=e.bottom-c.bottom+_t(i,"bottom")),e.left<c.left+_t(r,"left")?u=-(c.left-e.left+_t(i,"left")):e.right>c.right-_t(r,"right")&&(u=e.right-c.right+_t(i,"right")),u||d)if(l)s.defaultView.scrollBy(u,d);else{let f=a.scrollLeft,h=a.scrollTop;d&&(a.scrollTop+=d),u&&(a.scrollLeft+=u);let p=a.scrollLeft-f,m=a.scrollTop-h;e={left:e.left-p,top:e.top-m,right:e.right-p,bottom:e.bottom-m}}if(l)break}}function Xf(n){let e=n.dom.getBoundingClientRect(),t=Math.max(0,e.top),r,i;for(let s=(e.left+e.right)/2,o=t+1;o<Math.min(innerHeight,e.bottom);o+=5){let a=n.root.elementFromPoint(s,o);if(!a||a==n.dom||!n.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=t-20){r=a,i=l.top;break}}return{refDOM:r,refTop:i,stack:Ou(n.dom)}}function Ou(n){let e=[],t=n.ownerDocument;for(let r=n;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),n!=t);r=To(r));return e}function Qf({refDOM:n,refTop:e,stack:t}){let r=n?n.getBoundingClientRect().top:0;Tu(t,r==0?0:r-e)}function Tu(n,e){for(let t=0;t<n.length;t++){let{dom:r,top:i,left:s}=n[t];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=s&&(r.scrollLeft=s)}}let En=null;function Zf(n){if(n.setActive)return n.setActive();if(En)return n.focus(En);let e=Ou(n);n.focus(En==null?{get preventScroll(){return En={preventScroll:!0},!0}}:void 0),En||(En=!1,Tu(e,0))}function Mu(n,e){let t,r=2e8,i,s=0,o=e.top,a=e.top;for(let l=n.firstChild,c=0;l;l=l.nextSibling,c++){let u;if(l.nodeType==1)u=l.getClientRects();else if(l.nodeType==3)u=kt(l).getClientRects();else continue;for(let d=0;d<u.length;d++){let f=u[d];if(f.top<=o&&f.bottom>=a){o=Math.max(f.bottom,o),a=Math.min(f.top,a);let h=f.left>e.left?f.left-e.left:f.right<e.left?e.left-f.right:0;if(h<r){t=l,r=h,i=h&&t.nodeType==3?{left:f.right<e.left?f.right:f.left,top:e.top}:e,l.nodeType==1&&h&&(s=c+(e.left>=(f.left+f.right)/2?1:0));continue}}!t&&(e.left>=f.right&&e.top>=f.top||e.left>=f.left&&e.top>=f.bottom)&&(s=c+1)}}return t&&t.nodeType==3?eh(t,i):!t||r&&t.nodeType==1?{node:n,offset:s}:Mu(t,i)}function eh(n,e){let t=n.nodeValue.length,r=document.createRange();for(let i=0;i<t;i++){r.setEnd(n,i+1),r.setStart(n,i);let s=Ft(r,1);if(s.top!=s.bottom&&_o(e,s))return{node:n,offset:i+(e.left>=(s.left+s.right)/2?1:0)}}return{node:n,offset:0}}function _o(n,e){return n.left>=e.left-1&&n.left<=e.right+1&&n.top>=e.top-1&&n.top<=e.bottom+1}function th(n,e){let t=n.parentNode;return t&&/^li$/i.test(t.nodeName)&&e.left<n.getBoundingClientRect().left?t:n}function nh(n,e,t){let{node:r,offset:i}=Mu(e,t),s=-1;if(r.nodeType==1&&!r.firstChild){let o=r.getBoundingClientRect();s=o.left!=o.right&&t.left>(o.left+o.right)/2?1:-1}return n.docView.posFromDOM(r,i,s)}function rh(n,e,t,r){let i=-1;for(let s=e;s!=n.dom;){let o=n.docView.nearestDesc(s,!0);if(!o)return null;if(o.node.isBlock&&o.parent){let a=o.dom.getBoundingClientRect();if(a.left>r.left||a.top>r.top)i=o.posBefore;else if(a.right<r.left||a.bottom<r.top)i=o.posAfter;else break}s=o.dom.parentNode}return i>-1?i:n.docView.posFromDOM(e,t,1)}function _u(n,e,t){let r=n.childNodes.length;if(r&&t.top<t.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-t.top)/(t.bottom-t.top))-2)),s=i;;){let o=n.childNodes[s];if(o.nodeType==1){let a=o.getClientRects();for(let l=0;l<a.length;l++){let c=a[l];if(_o(e,c))return _u(o,e,c)}}if((s=(s+1)%r)==i)break}return n}function ih(n,e){let t=n.dom.ownerDocument,r,i=0;if(t.caretPositionFromPoint)try{let l=t.caretPositionFromPoint(e.left,e.top);l&&({offsetNode:r,offset:i}=l)}catch{}if(!r&&t.caretRangeFromPoint){let l=t.caretRangeFromPoint(e.left,e.top);l&&({startContainer:r,startOffset:i}=l)}let s=(n.root.elementFromPoint?n.root:t).elementFromPoint(e.left,e.top+1),o;if(!s||!n.dom.contains(s.nodeType!=1?s.parentNode:s)){let l=n.dom.getBoundingClientRect();if(!_o(e,l)||(s=_u(n.dom,e,l),!s))return null}if(Be)for(let l=s;r&&l;l=To(l))l.draggable&&(r=void 0);if(s=th(s,e),r){if(pt&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let l=r.childNodes[i],c;l.nodeName=="IMG"&&(c=l.getBoundingClientRect()).right<=e.left&&c.bottom>e.top&&i++}r==n.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?o=n.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(o=rh(n,r,i,e))}o==null&&(o=nh(n,s,e));let a=n.docView.nearestDesc(s,!0);return{pos:o,inside:a?a.posAtStart-a.border:-1}}function Ft(n,e){let t=n.getClientRects();return t.length?t[e<0?0:t.length-1]:n.getBoundingClientRect()}const sh=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function Fu(n,e,t){let{node:r,offset:i}=n.docView.domFromPos(e,t<0?-1:1),s=ns||pt;if(r.nodeType==3)if(s&&(sh.test(r.nodeValue)||(t<0?!i:i==r.nodeValue.length))){let o=Ft(kt(r,i,i),t);if(pt&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let a=Ft(kt(r,i-1,i-1),-1);if(a.top==o.top){let l=Ft(kt(r,i,i+1),-1);if(l.top!=o.top)return cr(l,l.left<a.left)}}return o}else{let o=i,a=i,l=t<0?1:-1;return t<0&&!i?(a++,l=-1):t>=0&&i==r.nodeValue.length?(o--,l=1):t<0?o--:a++,cr(Ft(kt(r,o,a),l),l<0)}if(!n.state.doc.resolve(e).parent.inlineContent){if(i&&(t<0||i==ut(r))){let o=r.childNodes[i-1];if(o.nodeType==1)return Fs(o.getBoundingClientRect(),!1)}if(i<ut(r)){let o=r.childNodes[i];if(o.nodeType==1)return Fs(o.getBoundingClientRect(),!0)}return Fs(r.getBoundingClientRect(),t>=0)}if(i&&(t<0||i==ut(r))){let o=r.childNodes[i-1],a=o.nodeType==3?kt(o,ut(o)-(s?0:1)):o.nodeType==1&&(o.nodeName!="BR"||!o.nextSibling)?o:null;if(a)return cr(Ft(a,1),!1)}if(i<ut(r)){let o=r.childNodes[i];for(;o.pmViewDesc&&o.pmViewDesc.ignoreForCoords;)o=o.nextSibling;let a=o?o.nodeType==3?kt(o,0,s?0:1):o.nodeType==1?o:null:null;if(a)return cr(Ft(a,-1),!0)}return cr(Ft(r.nodeType==3?kt(r):r,-t),t>=0)}function cr(n,e){if(n.width==0)return n;let t=e?n.left:n.right;return{top:n.top,bottom:n.bottom,left:t,right:t}}function Fs(n,e){if(n.height==0)return n;let t=e?n.top:n.bottom;return{top:t,bottom:t,left:n.left,right:n.right}}function Nu(n,e,t){let r=n.state,i=n.root.activeElement;r!=e&&n.updateState(e),i!=n.dom&&n.focus();try{return t()}finally{r!=e&&n.updateState(r),i!=n.dom&&i&&i.focus()}}function oh(n,e,t){let r=e.selection,i=t=="up"?r.$from:r.$to;return Nu(n,e,()=>{let{node:s}=n.docView.domFromPos(i.pos,t=="up"?-1:1);for(;;){let a=n.docView.nearestDesc(s,!0);if(!a)break;if(a.node.isBlock){s=a.dom;break}s=a.dom.parentNode}let o=Fu(n,i.pos,1);for(let a=s.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=kt(a,0,a.nodeValue.length).getClientRects();else continue;for(let c=0;c<l.length;c++){let u=l[c];if(u.bottom>u.top+1&&(t=="up"?o.top-u.top>(u.bottom-o.top)*2:u.bottom-o.bottom>(o.bottom-u.top)*2))return!1}}return!0})}const ah=/[\u0590-\u08ac]/;function lh(n,e,t){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,s=!i,o=i==r.parent.content.size,a=n.domSelection();return!ah.test(r.parent.textContent)||!a.modify?t=="left"||t=="backward"?s:o:Nu(n,e,()=>{let l=a.getRangeAt(0),c=a.focusNode,u=a.focusOffset,d=a.caretBidiLevel;a.modify("move",t,"character");let h=!(r.depth?n.docView.domAfterPos(r.before()):n.dom).contains(a.focusNode.nodeType==1?a.focusNode:a.focusNode.parentNode)||c==a.focusNode&&u==a.focusOffset;return a.removeAllRanges(),a.addRange(l),d!=null&&(a.caretBidiLevel=d),h})}let Pa=null,La=null,$a=!1;function uh(n,e,t){return Pa==e&&La==t?$a:(Pa=e,La=t,$a=t=="up"||t=="down"?oh(n,e,t):lh(n,e,t))}const nt=0,za=1,Fn=2,mt=3;class jr{constructor(e,t,r,i){this.parent=e,this.children=t,this.dom=r,this.contentDOM=i,this.dirty=nt,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,r=this.posAtStart;;t++){let i=this.children[t];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let s,o;if(e==this.contentDOM)s=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.previousSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(o)+o.size:this.posAtStart}else{let s,o;if(e==this.contentDOM)s=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(o):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=t>Le(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(t==0)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!1;break}if(s.previousSibling)break}if(i==null&&t==e.childNodes.length)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!0;break}if(s.nextSibling)break}}return(i==null?r>0:i)?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let r=!0,i=e;i;i=i.parentNode){let s=this.getDesc(i),o;if(s&&(!t||s.node))if(r&&(o=s.nodeDOM)&&!(o.nodeType==1?o.contains(e.nodeType==1?e:e.parentNode):o==e))r=!1;else return s}}getDesc(e){let t=e.pmViewDesc;for(let r=t;r;r=r.parent)if(r==this)return t}posFromDOM(e,t,r){for(let i=e;i;i=i.parentNode){let s=this.getDesc(i);if(s)return s.localPosFromDOM(e,t,r)}return-1}descAt(e){for(let t=0,r=0;t<this.children.length;t++){let i=this.children[t],s=r+i.size;if(r==e&&s!=r){for(;!i.border&&i.children.length;)i=i.children[0];return i}if(e<s)return i.descAt(e-r-i.border);r=s}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0};let r=0,i=0;for(let s=0;r<this.children.length;r++){let o=this.children[r],a=s+o.size;if(a>e||o instanceof Ru){i=e-s;break}s=a}if(i)return this.children[r].domFromPos(i-this.children[r].border,t);for(let s;r&&!(s=this.children[r-1]).size&&s instanceof Bu&&s.side>=0;r--);if(t<=0){let s,o=!0;for(;s=r?this.children[r-1]:null,!(!s||s.dom.parentNode==this.contentDOM);r--,o=!1);return s&&t&&o&&!s.border&&!s.domAtom?s.domFromPos(s.size,t):{node:this.contentDOM,offset:s?Le(s.dom)+1:0}}else{let s,o=!0;for(;s=r<this.children.length?this.children[r]:null,!(!s||s.dom.parentNode==this.contentDOM);r++,o=!1);return s&&o&&!s.border&&!s.domAtom?s.domFromPos(0,t):{node:this.contentDOM,offset:s?Le(s.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,s=-1;for(let o=r,a=0;;a++){let l=this.children[a],c=o+l.size;if(i==-1&&e<=c){let u=o+l.border;if(e>=u&&t<=c-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(e,t,u);e=o;for(let d=a;d>0;d--){let f=this.children[d-1];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(1)){i=Le(f.dom)+1;break}e-=f.size}i==-1&&(i=0)}if(i>-1&&(c>t||a==this.children.length-1)){t=c;for(let u=a+1;u<this.children.length;u++){let d=this.children[u];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(-1)){s=Le(d.dom);break}t+=d.size}s==-1&&(s=this.contentDOM.childNodes.length);break}o=c}return{node:this.contentDOM,from:e,to:t,fromOffset:i,toOffset:s}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return t.size==0||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:r}=this.domFromPos(e,0);if(t.nodeType!=1||r==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[r]}setSelection(e,t,r,i=!1){let s=Math.min(e,t),o=Math.max(e,t);for(let f=0,h=0;f<this.children.length;f++){let p=this.children[f],m=h+p.size;if(s>h&&o<m)return p.setSelection(e-h-p.border,t-h-p.border,r,i);h=m}let a=this.domFromPos(e,e?-1:1),l=t==e?a:this.domFromPos(t,t?-1:1),c=r.getSelection(),u=!1;if((pt||Be)&&e==t){let{node:f,offset:h}=a;if(f.nodeType==3){if(u=!!(h&&f.nodeValue[h-1]==`
`),u&&h==f.nodeValue.length)for(let p=f,m;p;p=p.parentNode){if(m=p.nextSibling){m.nodeName=="BR"&&(a=l={node:m.parentNode,offset:Le(m)+1});break}let y=p.pmViewDesc;if(y&&y.node&&y.node.isBlock)break}}else{let p=f.childNodes[h-1];u=p&&(p.nodeName=="BR"||p.contentEditable=="false")}}if(pt&&c.focusNode&&c.focusNode!=l.node&&c.focusNode.nodeType==1){let f=c.focusNode.childNodes[c.focusOffset];f&&f.contentEditable=="false"&&(i=!0)}if(!(i||u&&Be)&&Rr(a.node,a.offset,c.anchorNode,c.anchorOffset)&&Rr(l.node,l.offset,c.focusNode,c.focusOffset))return;let d=!1;if((c.extend||e==t)&&!u){c.collapse(a.node,a.offset);try{e!=t&&c.extend(l.node,l.offset),d=!0}catch(f){if(!(f instanceof DOMException))throw f}}if(!d){if(e>t){let h=a;a=l,l=h}let f=document.createRange();f.setEnd(l.node,l.offset),f.setStart(a.node,a.offset),c.removeAllRanges(),c.addRange(f)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let r=0,i=0;i<this.children.length;i++){let s=this.children[i],o=r+s.size;if(r==o?e<=o&&t>=r:e<o&&t>r){let a=r+s.border,l=o-s.border;if(e>=a&&t<=l){this.dirty=e==r||t==o?Fn:za,e==a&&t==l&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=mt:s.markDirty(e-a,t-a);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?Fn:mt}r=o}this.dirty=Fn}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let r=e==1?Fn:za;t.dirty<r&&(t.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}}class Bu extends jr{constructor(e,t,r,i){let s,o=t.type.toDOM;if(typeof o=="function"&&(o=o(r,()=>{if(!s)return i;if(s.parent)return s.parent.posBeforeChild(s)})),!t.type.spec.raw){if(o.nodeType!=1){let a=document.createElement("span");a.appendChild(o),o=a}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(e,[],o,null),this.widget=t,this.widget=t,s=this}matchesWidget(e){return this.dirty==nt&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return t?t(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class ch extends jr{constructor(e,t,r,i){super(e,[],t,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class gn extends jr{constructor(e,t,r,i){super(e,[],r,i),this.mark=t}static create(e,t,r,i){let s=i.nodeViews[t.type.name],o=s&&s(t,i,r);return(!o||!o.dom)&&(o=ct.renderSpec(document,t.type.spec.toDOM(t,r))),new gn(e,t,o.dom,o.contentDOM||o.dom)}parseRule(){return this.dirty&mt||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM||void 0}}matchesMark(e){return this.dirty!=mt&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),this.dirty!=nt){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=nt}}slice(e,t,r){let i=gn.create(this.parent,this.mark,!0,r),s=this.children,o=this.size;t<o&&(s=so(s,t,o,r)),e>0&&(s=so(s,0,e,r));for(let a=0;a<s.length;a++)s[a].parent=i;return i.children=s,i}}class vn extends jr{constructor(e,t,r,i,s,o,a,l,c){super(e,[],s,o),this.node=t,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=a,o&&this.updateChildren(l,c)}static create(e,t,r,i,s,o){let a=s.nodeViews[t.type.name],l,c=a&&a(t,s,()=>{if(!l)return o;if(l.parent)return l.parent.posBeforeChild(l)},r,i),u=c&&c.dom,d=c&&c.contentDOM;if(t.isText){if(!u)u=document.createTextNode(t.text);else if(u.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else u||({dom:u,contentDOM:d}=ct.renderSpec(document,t.type.spec.toDOM(t)));!d&&!t.isText&&u.nodeName!="BR"&&(u.hasAttribute("contenteditable")||(u.contentEditable="false"),t.type.spec.draggable&&(u.draggable=!0));let f=u;return u=Lu(u,r,t),c?l=new dh(e,t,r,i,u,d||null,f,c,s,o+1):t.isText?new rs(e,t,r,i,u,f,s):new vn(e,t,r,i,u,d||null,f,s,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let t=this.children.length-1;t>=0;t--){let r=this.children[t];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>w.empty)}return e}matchesNode(e,t,r){return this.dirty==nt&&e.eq(this.node)&&io(t,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let r=this.node.inlineContent,i=t,s=e.composing?this.localCompositionInfo(e,t):null,o=s&&s.pos>-1?s:null,a=s&&s.pos<0,l=new hh(this,o&&o.node);gh(this.node,this.innerDeco,(c,u,d)=>{c.spec.marks?l.syncToMarks(c.spec.marks,r,e):c.type.side>=0&&!d&&l.syncToMarks(u==this.node.childCount?X.none:this.node.child(u).marks,r,e),l.placeWidget(c,e,i)},(c,u,d,f)=>{l.syncToMarks(c.marks,r,e);let h;l.findNodeMatch(c,u,d,f)||a&&e.state.selection.from>i&&e.state.selection.to<i+c.nodeSize&&(h=l.findIndexWithChild(s.node))>-1&&l.updateNodeAt(c,u,d,h,e)||l.updateNextNode(c,u,d,e,f)||l.addNode(c,u,d,e,i),i+=c.nodeSize}),l.syncToMarks([],r,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==Fn)&&(o&&this.protectLocalComposition(e,o),Iu(this.contentDOM,this.children,e),Kn&&vh(this.dom))}localCompositionInfo(e,t){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof q)||r<t||i>t+this.node.content.size)return null;let s=e.domSelection(),o=yh(s.focusNode,s.focusOffset);if(!o||!this.dom.contains(o.parentNode))return null;if(this.node.inlineContent){let a=o.nodeValue,l=bh(this.node.content,a,r-t,i-t);return l<0?null:{node:o,pos:l,text:a}}else return{node:o,pos:-1,text:""}}protectLocalComposition(e,{node:t,pos:r,text:i}){if(this.getDesc(t))return;let s=t;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let o=new ch(this,s,t,i);e.input.compositionNodes.push(o),this.children=so(this.children,r,r+i.length,e,o)}update(e,t,r,i){return this.dirty==mt||!e.sameMarkup(this.node)?!1:(this.updateInner(e,t,r,i),!0)}updateInner(e,t,r,i){this.updateOuterDeco(t),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=nt}updateOuterDeco(e){if(io(e,this.outerDeco))return;let t=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=Pu(this.dom,this.nodeDOM,ro(this.outerDeco,this.node,t),ro(e,this.node,t)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable")}get domAtom(){return this.node.isAtom}}function Va(n,e,t,r,i){return Lu(r,e,n),new vn(void 0,n,e,t,r,r,r,i,0)}class rs extends vn{constructor(e,t,r,i,s,o,a){super(e,t,r,i,s,null,o,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,r,i){return this.dirty==mt||this.dirty!=nt&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(t),(this.dirty!=nt||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=nt,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,r){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,t,r){let i=this.node.cut(e,t),s=document.createTextNode(i.text);return new rs(this.parent,i,this.outerDeco,this.innerDeco,s,s,r)}markDirty(e,t){super.markDirty(e,t),this.dom!=this.nodeDOM&&(e==0||t==this.nodeDOM.nodeValue.length)&&(this.dirty=mt)}get domAtom(){return!1}}class Ru extends jr{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==nt&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class dh extends vn{constructor(e,t,r,i,s,o,a,l,c,u){super(e,t,r,i,s,o,a,c,u),this.spec=l}update(e,t,r,i){if(this.dirty==mt)return!1;if(this.spec.update){let s=this.spec.update(e,t,r);return s&&this.updateInner(e,t,r,i),s}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,t,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,r,i){this.spec.setSelection?this.spec.setSelection(e,t,r):super.setSelection(e,t,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function Iu(n,e,t){let r=n.firstChild,i=!1;for(let s=0;s<e.length;s++){let o=e[s],a=o.dom;if(a.parentNode==n){for(;a!=r;)r=ja(r),i=!0;r=r.nextSibling}else i=!0,n.insertBefore(a,r);if(o instanceof gn){let l=r?r.previousSibling:n.lastChild;Iu(o.contentDOM,o.children,t),r=l?l.nextSibling:n.firstChild}}for(;r;)r=ja(r),i=!0;i&&t.trackWrites==n&&(t.trackWrites=null)}const Cr=function(n){n&&(this.nodeName=n)};Cr.prototype=Object.create(null);const nn=[new Cr];function ro(n,e,t){if(n.length==0)return nn;let r=t?nn[0]:new Cr,i=[r];for(let s=0;s<n.length;s++){let o=n[s].type.attrs;if(!!o){o.nodeName&&i.push(r=new Cr(o.nodeName));for(let a in o){let l=o[a];l!=null&&(t&&i.length==1&&i.push(r=new Cr(e.isInline?"span":"div")),a=="class"?r.class=(r.class?r.class+" ":"")+l:a=="style"?r.style=(r.style?r.style+";":"")+l:a!="nodeName"&&(r[a]=l))}}}return i}function Pu(n,e,t,r){if(t==nn&&r==nn)return e;let i=e;for(let s=0;s<r.length;s++){let o=r[s],a=t[s];if(s){let l;a&&a.nodeName==o.nodeName&&i!=n&&(l=i.parentNode)&&l.nodeName.toLowerCase()==o.nodeName||(l=document.createElement(o.nodeName),l.pmIsDeco=!0,l.appendChild(i),a=nn[0]),i=l}fh(i,a||nn[0],o)}return i}function fh(n,e,t){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in t)&&n.removeAttribute(r);for(let r in t)r!="class"&&r!="style"&&r!="nodeName"&&t[r]!=e[r]&&n.setAttribute(r,t[r]);if(e.class!=t.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=t.class?t.class.split(" ").filter(Boolean):[];for(let s=0;s<r.length;s++)i.indexOf(r[s])==-1&&n.classList.remove(r[s]);for(let s=0;s<i.length;s++)r.indexOf(i[s])==-1&&n.classList.add(i[s]);n.classList.length==0&&n.removeAttribute("class")}if(e.style!=t.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)n.style.removeProperty(i[1])}t.style&&(n.style.cssText+=t.style)}}function Lu(n,e,t){return Pu(n,n,nn,ro(e,t,n.nodeType!=1))}function io(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].type.eq(e[t].type))return!1;return!0}function ja(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class hh{constructor(e,t){this.lock=t,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=ph(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let r=e;r<t;r++)this.top.children[r].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,r){let i=0,s=this.stack.length>>1,o=Math.min(s,e.length);for(;i<o&&(i==s-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<s;)this.destroyRest(),this.top.dirty=nt,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<e.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++)if(this.top.children[l].matchesMark(e[s])){a=l;break}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=gn.create(this.top,e[s],t,r);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,s++}}findNodeMatch(e,t,r,i){let s=-1,o;if(i>=this.preMatch.index&&(o=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&o.matchesNode(e,t,r))s=this.top.children.indexOf(o,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let c=this.top.children[a];if(c.matchesNode(e,t,r)&&!this.preMatch.matched.has(c)){s=a;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(e,t,r,i,s){let o=this.top.children[i];return o.dirty==mt&&o.dom==o.contentDOM&&(o.dirty=Fn),o.update(e,t,r,s)?(this.destroyBetween(this.index,i),this.index=i+1,!0):!1}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=t}}updateNextNode(e,t,r,i,s){for(let o=this.index;o<this.top.children.length;o++){let a=this.top.children[o];if(a instanceof vn){let l=this.preMatch.matched.get(a);if(l!=null&&l!=s)return!1;let c=a.dom;if(!(this.lock&&(c==this.lock||c.nodeType==1&&c.contains(this.lock.parentNode))&&!(e.isText&&a.node&&a.node.isText&&a.nodeDOM.nodeValue==e.text&&a.dirty!=mt&&io(t,a.outerDeco)))&&a.update(e,t,r,i))return this.destroyBetween(this.index,o),a.dom!=c&&(this.changed=!0),this.index++,!0;break}}return!1}addNode(e,t,r,i,s){this.top.children.splice(this.index++,0,vn.create(this.top,e,t,r,i,s)),this.changed=!0}placeWidget(e,t,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let s=new Bu(this.top,e,t,r);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof gn;)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof rs)||/\n$/.test(e.node.text))&&((Be||Se)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new Ru(this.top,[],r,null);t!=this.top?t.children.push(i):t.children.splice(this.index++,0,i),this.changed=!0}}}function ph(n,e){let t=e,r=t.children.length,i=n.childCount,s=new Map,o=[];e:for(;i>0;){let a;for(;;)if(r){let c=t.children[r-1];if(c instanceof gn)t=c,r=c.children.length;else{a=c,r--;break}}else{if(t==e)break e;r=t.parent.children.indexOf(t),t=t.parent}let l=a.node;if(!!l){if(l!=n.child(i-1))break;--i,s.set(a,i),o.push(a)}}return{index:i,matched:s,matches:o.reverse()}}function mh(n,e){return n.type.side-e.type.side}function gh(n,e,t,r){let i=e.locals(n),s=0;if(i.length==0){for(let c=0;c<n.childCount;c++){let u=n.child(c);r(u,i,e.forChild(s,u),c),s+=u.nodeSize}return}let o=0,a=[],l=null;for(let c=0;;){if(o<i.length&&i[o].to==s){let p=i[o++],m;for(;o<i.length&&i[o].to==s;)(m||(m=[p])).push(i[o++]);if(m){m.sort(mh);for(let y=0;y<m.length;y++)t(m[y],c,!!l)}else t(p,c,!!l)}let u,d;if(l)d=-1,u=l,l=null;else if(c<n.childCount)d=c,u=n.child(c++);else break;for(let p=0;p<a.length;p++)a[p].to<=s&&a.splice(p--,1);for(;o<i.length&&i[o].from<=s&&i[o].to>s;)a.push(i[o++]);let f=s+u.nodeSize;if(u.isText){let p=f;o<i.length&&i[o].from<p&&(p=i[o].from);for(let m=0;m<a.length;m++)a[m].to<p&&(p=a[m].to);p<f&&(l=u.cut(p-s),u=u.cut(0,p-s),f=p,d=-1)}let h=u.isInline&&!u.isLeaf?a.filter(p=>!p.inline):a.slice();r(u,h,e.forChild(s,u),d),s=f}}function vh(n){if(n.nodeName=="UL"||n.nodeName=="OL"){let e=n.style.cssText;n.style.cssText=e+"; list-style: square !important",window.getComputedStyle(n).listStyle,n.style.cssText=e}}function yh(n,e){for(;;){if(n.nodeType==3)return n;if(n.nodeType==1&&e>0){if(n.childNodes.length>e&&n.childNodes[e].nodeType==3)return n.childNodes[e];n=n.childNodes[e-1],e=ut(n)}else if(n.nodeType==1&&e<n.childNodes.length)n=n.childNodes[e],e=0;else return null}}function bh(n,e,t,r){for(let i=0,s=0;i<n.childCount&&s<=r;){let o=n.child(i++),a=s;if(s+=o.nodeSize,!o.isText)continue;let l=o.text;for(;i<n.childCount;){let c=n.child(i++);if(s+=c.nodeSize,!c.isText)break;l+=c.text}if(s>=t){let c=a<r?l.lastIndexOf(e,r-a-1):-1;if(c>=0&&c+e.length+a>=t)return a+c;if(t==r&&l.length>=r+e.length-a&&l.slice(r-a,r-a+e.length)==e)return r}}return-1}function so(n,e,t,r,i){let s=[];for(let o=0,a=0;o<n.length;o++){let l=n[o],c=a,u=a+=l.size;c>=t||u<=e?s.push(l):(c<e&&s.push(l.slice(0,e-c,r)),i&&(s.push(i),i=void 0),u>t&&s.push(l.slice(t-c,l.size,r)))}return s}function $u(n,e=null){let t=n.domSelection(),r=n.state.doc;if(!t.focusNode)return null;let i=n.docView.nearestDesc(t.focusNode),s=i&&i.size==0,o=n.docView.posFromDOM(t.focusNode,t.focusOffset,1);if(o<0)return null;let a=r.resolve(o),l,c;if(Mo(t)){for(l=a;i&&!i.node;)i=i.parent;let u=i.node;if(i&&u.isAtom&&P.isSelectable(u)&&i.parent&&!(u.isInline&&Kf(t.focusNode,t.focusOffset,i.dom))){let d=i.posBefore;c=new P(o==d?a:r.resolve(d))}}else{let u=n.docView.posFromDOM(t.anchorNode,t.anchorOffset,1);if(u<0)return null;l=r.resolve(u)}if(!c){let u=e=="pointer"||n.state.selection.head<a.pos&&!s?1:-1;c=Fo(n,l,a,u)}return c}function zu(n){return n.editable?n.hasFocus():ju(n)&&document.activeElement&&document.activeElement.contains(n.dom)}function jt(n,e=!1){let t=n.state.selection;if(Vu(n,t),!!zu(n)){if(!e&&n.input.mouseDown&&n.input.mouseDown.allowDefault&&Se){let r=n.domSelection(),i=n.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&Rr(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){n.input.mouseDown.delayedSelectionSync=!0,n.domObserver.setCurSelection();return}}if(n.domObserver.disconnectSelection(),n.cursorWrapper)xh(n);else{let{anchor:r,head:i}=t,s,o;Ha&&!(t instanceof q)&&(t.$from.parent.inlineContent||(s=qa(n,t.from)),!t.empty&&!t.$from.parent.inlineContent&&(o=qa(n,t.to))),n.docView.setSelection(r,i,n.root,e),Ha&&(s&&Wa(s),o&&Wa(o)),t.visible?n.dom.classList.remove("ProseMirror-hideselection"):(n.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&Dh(n))}n.domObserver.setCurSelection(),n.domObserver.connectSelection()}}const Ha=Be||Se&&qf<63;function qa(n,e){let{node:t,offset:r}=n.docView.domFromPos(e,0),i=r<t.childNodes.length?t.childNodes[r]:null,s=r?t.childNodes[r-1]:null;if(Be&&i&&i.contentEditable=="false")return Ns(i);if((!i||i.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(i)return Ns(i);if(s)return Ns(s)}}function Ns(n){return n.contentEditable="true",Be&&n.draggable&&(n.draggable=!1,n.wasDraggable=!0),n}function Wa(n){n.contentEditable="false",n.wasDraggable&&(n.draggable=!0,n.wasDraggable=null)}function Dh(n){let e=n.dom.ownerDocument;e.removeEventListener("selectionchange",n.input.hideSelectionGuard);let t=n.domSelection(),r=t.anchorNode,i=t.anchorOffset;e.addEventListener("selectionchange",n.input.hideSelectionGuard=()=>{(t.anchorNode!=r||t.anchorOffset!=i)&&(e.removeEventListener("selectionchange",n.input.hideSelectionGuard),setTimeout(()=>{(!zu(n)||n.state.selection.visible)&&n.dom.classList.remove("ProseMirror-hideselection")},20))})}function xh(n){let e=n.domSelection(),t=document.createRange(),r=n.cursorWrapper.dom,i=r.nodeName=="IMG";i?t.setEnd(r.parentNode,Le(r)+1):t.setEnd(r,0),t.collapse(!1),e.removeAllRanges(),e.addRange(t),!i&&!n.state.selection.visible&&ze&&Lt<=11&&(r.disabled=!0,r.disabled=!1)}function Vu(n,e){if(e instanceof P){let t=n.docView.descAt(e.from);t!=n.lastSelectedViewDesc&&(Ua(n),t&&t.selectNode(),n.lastSelectedViewDesc=t)}else Ua(n)}function Ua(n){n.lastSelectedViewDesc&&(n.lastSelectedViewDesc.parent&&n.lastSelectedViewDesc.deselectNode(),n.lastSelectedViewDesc=void 0)}function Fo(n,e,t,r){return n.someProp("createSelectionBetween",i=>i(n,e,t))||q.between(e,t,r)}function Ka(n){return n.editable&&n.root.activeElement!=n.dom?!1:ju(n)}function ju(n){let e=n.domSelection();if(!e.anchorNode)return!1;try{return n.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(n.editable||n.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function kh(n){let e=n.docView.domFromPos(n.state.selection.anchor,0),t=n.domSelection();return Rr(e.node,e.offset,t.anchorNode,t.anchorOffset)}function oo(n,e){let{$anchor:t,$head:r}=n.selection,i=e>0?t.max(r):t.min(r),s=i.parent.inlineContent?i.depth?n.doc.resolve(e>0?i.after():i.before()):null:i;return s&&j.findFrom(s,e)}function en(n,e){return n.dispatch(n.state.tr.setSelection(e).scrollIntoView()),!0}function Ja(n,e,t){let r=n.state.selection;if(r instanceof q){if(!r.empty||t.indexOf("s")>-1)return!1;if(n.endOfTextblock(e>0?"right":"left")){let i=oo(n.state,e);return i&&i instanceof P?en(n,i):!1}else if(!(Ue&&t.indexOf("m")>-1)){let i=r.$head,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,o;if(!s||s.isText)return!1;let a=e<0?i.pos-s.nodeSize:i.pos;return s.isAtom||(o=n.docView.descAt(a))&&!o.contentDOM?P.isSelectable(s)?en(n,new P(e<0?n.state.doc.resolve(i.pos-s.nodeSize):i)):ns?en(n,new q(n.state.doc.resolve(e<0?a:a+s.nodeSize))):!1:!1}}else{if(r instanceof P&&r.node.isInline)return en(n,new q(e>0?r.$to:r.$from));{let i=oo(n.state,e);return i?en(n,i):!1}}}function bi(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function Er(n){let e=n.pmViewDesc;return e&&e.size==0&&(n.nextSibling||n.nodeName!="BR")}function Bs(n){let e=n.domSelection(),t=e.focusNode,r=e.focusOffset;if(!t)return;let i,s,o=!1;for(pt&&t.nodeType==1&&r<bi(t)&&Er(t.childNodes[r])&&(o=!0);;)if(r>0){if(t.nodeType!=1)break;{let a=t.childNodes[r-1];if(Er(a))i=t,s=--r;else if(a.nodeType==3)t=a,r=t.nodeValue.length;else break}}else{if(Hu(t))break;{let a=t.previousSibling;for(;a&&Er(a);)i=t.parentNode,s=Le(a),a=a.previousSibling;if(a)t=a,r=bi(t);else{if(t=t.parentNode,t==n.dom)break;r=0}}}o?ao(n,e,t,r):i&&ao(n,e,i,s)}function Rs(n){let e=n.domSelection(),t=e.focusNode,r=e.focusOffset;if(!t)return;let i=bi(t),s,o;for(;;)if(r<i){if(t.nodeType!=1)break;let a=t.childNodes[r];if(Er(a))s=t,o=++r;else break}else{if(Hu(t))break;{let a=t.nextSibling;for(;a&&Er(a);)s=a.parentNode,o=Le(a)+1,a=a.nextSibling;if(a)t=a,r=0,i=bi(t);else{if(t=t.parentNode,t==n.dom)break;r=i=0}}}s&&ao(n,e,s,o)}function Hu(n){let e=n.pmViewDesc;return e&&e.node&&e.node.isBlock}function ao(n,e,t,r){if(Mo(e)){let s=document.createRange();s.setEnd(t,r),s.setStart(t,r),e.removeAllRanges(),e.addRange(s)}else e.extend&&e.extend(t,r);n.domObserver.setCurSelection();let{state:i}=n;setTimeout(()=>{n.state==i&&jt(n)},50)}function Ga(n,e,t){let r=n.state.selection;if(r instanceof q&&!r.empty||t.indexOf("s")>-1||Ue&&t.indexOf("m")>-1)return!1;let{$from:i,$to:s}=r;if(!i.parent.inlineContent||n.endOfTextblock(e<0?"up":"down")){let o=oo(n.state,e);if(o&&o instanceof P)return en(n,o)}if(!i.parent.inlineContent){let o=e<0?i:s,a=r instanceof tt?j.near(o,e):j.findFrom(o,e);return a?en(n,a):!1}return!1}function Ya(n,e){if(!(n.state.selection instanceof q))return!0;let{$head:t,$anchor:r,empty:i}=n.state.selection;if(!t.sameParent(r))return!0;if(!i)return!1;if(n.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!t.textOffset&&(e<0?t.nodeBefore:t.nodeAfter);if(s&&!s.isText){let o=n.state.tr;return e<0?o.delete(t.pos-s.nodeSize,t.pos):o.delete(t.pos,t.pos+s.nodeSize),n.dispatch(o),!0}return!1}function Xa(n,e,t){n.domObserver.stop(),e.contentEditable=t,n.domObserver.start()}function wh(n){if(!Be||n.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:t}=n.domSelection();if(e&&e.nodeType==1&&t==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;Xa(n,r,"true"),setTimeout(()=>Xa(n,r,"false"),20)}return!1}function Ch(n){let e="";return n.ctrlKey&&(e+="c"),n.metaKey&&(e+="m"),n.altKey&&(e+="a"),n.shiftKey&&(e+="s"),e}function Eh(n,e){let t=e.keyCode,r=Ch(e);return t==8||Ue&&t==72&&r=="c"?Ya(n,-1)||Bs(n):t==46||Ue&&t==68&&r=="c"?Ya(n,1)||Rs(n):t==13||t==27?!0:t==37||Ue&&t==66&&r=="c"?Ja(n,-1,r)||Bs(n):t==39||Ue&&t==70&&r=="c"?Ja(n,1,r)||Rs(n):t==38||Ue&&t==80&&r=="c"?Ga(n,-1,r)||Bs(n):t==40||Ue&&t==78&&r=="c"?wh(n)||Ga(n,1,r)||Rs(n):r==(Ue?"m":"c")&&(t==66||t==73||t==89||t==90)}function qu(n,e){let t=[],{content:r,openStart:i,openEnd:s}=e;for(;i>1&&s>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,s--;let h=r.firstChild;t.push(h.type.name,h.attrs!=h.type.defaultAttrs?h.attrs:null),r=h.content}let o=n.someProp("clipboardSerializer")||ct.fromSchema(n.state.schema),a=Yu(),l=a.createElement("div");l.appendChild(o.serializeFragment(r,{document:a}));let c=l.firstChild,u,d=0;for(;c&&c.nodeType==1&&(u=Gu[c.nodeName.toLowerCase()]);){for(let h=u.length-1;h>=0;h--){let p=a.createElement(u[h]);for(;l.firstChild;)p.appendChild(l.firstChild);l.appendChild(p),d++}c=l.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${i} ${s}${d?` -${d}`:""} ${JSON.stringify(t)}`);let f=n.someProp("clipboardTextSerializer",h=>h(e))||e.content.textBetween(0,e.content.size,`

`);return{dom:l,text:f}}function Wu(n,e,t,r,i){let s=i.parent.type.spec.code,o,a;if(!t&&!e)return null;let l=e&&(r||s||!t);if(l){if(n.someProp("transformPastedText",f=>{e=f(e,s||r)}),s)return e?new T(w.from(n.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):T.empty;let d=n.someProp("clipboardTextParser",f=>f(e,i,r));if(d)a=d;else{let f=i.marks(),{schema:h}=n.state,p=ct.fromSchema(h);o=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(m=>{let y=o.appendChild(document.createElement("p"));m&&y.appendChild(p.serializeNode(h.text(m,f)))})}}else n.someProp("transformPastedHTML",d=>{t=d(t)}),o=Oh(t),ns&&Th(o);let c=o&&o.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let d=+u[3];d>0&&o.firstChild;d--)o=o.firstChild;if(a||(a=(n.someProp("clipboardParser")||n.someProp("domParser")||Wn.fromSchema(n.state.schema)).parseSlice(o,{preserveWhitespace:!!(l||u),context:i,ruleFromNode(f){return f.nodeName=="BR"&&!f.nextSibling&&f.parentNode&&!Sh.test(f.parentNode.nodeName)?{ignore:!0}:null}})),u)a=Mh(Qa(a,+u[1],+u[2]),u[4]);else if(a=T.maxOpen(Ah(a.content,i),!0),a.openStart||a.openEnd){let d=0,f=0;for(let h=a.content.firstChild;d<a.openStart&&!h.type.spec.isolating;d++,h=h.firstChild);for(let h=a.content.lastChild;f<a.openEnd&&!h.type.spec.isolating;f++,h=h.lastChild);a=Qa(a,d,f)}return n.someProp("transformPasted",d=>{a=d(a)}),a}const Sh=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function Ah(n,e){if(n.childCount<2)return n;for(let t=e.depth;t>=0;t--){let i=e.node(t).contentMatchAt(e.index(t)),s,o=[];if(n.forEach(a=>{if(!o)return;let l=i.findWrapping(a.type),c;if(!l)return o=null;if(c=o.length&&s.length&&Ku(l,s,a,o[o.length-1],0))o[o.length-1]=c;else{o.length&&(o[o.length-1]=Ju(o[o.length-1],s.length));let u=Uu(a,l);o.push(u),i=i.matchType(u.type),s=l}}),o)return w.from(o)}return n}function Uu(n,e,t=0){for(let r=e.length-1;r>=t;r--)n=e[r].create(null,w.from(n));return n}function Ku(n,e,t,r,i){if(i<n.length&&i<e.length&&n[i]==e[i]){let s=Ku(n,e,t,r.lastChild,i+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(i==n.length-1?t.type:n[i+1]))return r.copy(r.content.append(w.from(Uu(t,n,i+1))))}}function Ju(n,e){if(e==0)return n;let t=n.content.replaceChild(n.childCount-1,Ju(n.lastChild,e-1)),r=n.contentMatchAt(n.childCount).fillBefore(w.empty,!0);return n.copy(t.append(r))}function lo(n,e,t,r,i,s){let o=e<0?n.firstChild:n.lastChild,a=o.content;return i<r-1&&(a=lo(a,e,t,r,i+1,s)),i>=t&&(a=e<0?o.contentMatchAt(0).fillBefore(a,n.childCount>1||s<=i).append(a):a.append(o.contentMatchAt(o.childCount).fillBefore(w.empty,!0))),n.replaceChild(e<0?0:n.childCount-1,o.copy(a))}function Qa(n,e,t){return e<n.openStart&&(n=new T(lo(n.content,-1,e,n.openStart,0,n.openEnd),e,n.openEnd)),t<n.openEnd&&(n=new T(lo(n.content,1,t,n.openEnd,0,0),n.openStart,t)),n}const Gu={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let Za=null;function Yu(){return Za||(Za=document.implementation.createHTMLDocument("title"))}function Oh(n){let e=/^(\s*<meta [^>]*>)*/.exec(n);e&&(n=n.slice(e[0].length));let t=Yu().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(n),i;if((i=r&&Gu[r[1].toLowerCase()])&&(n=i.map(s=>"<"+s+">").join("")+n+i.map(s=>"</"+s+">").reverse().join("")),t.innerHTML=n,i)for(let s=0;s<i.length;s++)t=t.querySelector(i[s])||t;return t}function Th(n){let e=n.querySelectorAll(Se?"span:not([class]):not([style])":"span.Apple-converted-space");for(let t=0;t<e.length;t++){let r=e[t];r.childNodes.length==1&&r.textContent=="\xA0"&&r.parentNode&&r.parentNode.replaceChild(n.ownerDocument.createTextNode(" "),r)}}function Mh(n,e){if(!n.size)return n;let t=n.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return n}let{content:i,openStart:s,openEnd:o}=n;for(let a=r.length-2;a>=0;a-=2){let l=t.nodes[r[a]];if(!l||l.hasRequiredAttrs())break;i=w.from(l.create(r[a+1],i)),s++,o++}return new T(i,s,o)}const Re={};let Ae={};class _h{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastAndroidDelete=0,this.composing=!1,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function Fh(n){for(let e in Re){let t=Re[e];n.dom.addEventListener(e,n.input.eventHandlers[e]=r=>{Bh(n,r)&&!No(n,r)&&(n.editable||!(r.type in Ae))&&t(n,r)})}Be&&n.dom.addEventListener("input",()=>null),uo(n)}function rn(n,e){n.input.lastSelectionOrigin=e,n.input.lastSelectionTime=Date.now()}function Nh(n){n.domObserver.stop();for(let e in n.input.eventHandlers)n.dom.removeEventListener(e,n.input.eventHandlers[e]);clearTimeout(n.input.composingTimeout),clearTimeout(n.input.lastIOSEnterFallbackTimeout)}function uo(n){n.someProp("handleDOMEvents",e=>{for(let t in e)n.input.eventHandlers[t]||n.dom.addEventListener(t,n.input.eventHandlers[t]=r=>No(n,r))})}function No(n,e){return n.someProp("handleDOMEvents",t=>{let r=t[e.type];return r?r(n,e)||e.defaultPrevented:!1})}function Bh(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target;t!=n.dom;t=t.parentNode)if(!t||t.nodeType==11||t.pmViewDesc&&t.pmViewDesc.stopEvent(e))return!1;return!0}function Rh(n,e){!No(n,e)&&Re[e.type]&&(n.editable||!(e.type in Ae))&&Re[e.type](n,e)}Ae.keydown=(n,e)=>{let t=e;if(n.input.shiftKey=t.keyCode==16||t.shiftKey,!Qu(n,t)&&(n.input.lastKeyCode=t.keyCode,n.input.lastKeyCodeTime=Date.now(),!(lt&&Se&&t.keyCode==13)))if(t.keyCode!=229&&n.domObserver.forceFlush(),Kn&&t.keyCode==13&&!t.ctrlKey&&!t.altKey&&!t.metaKey){let r=Date.now();n.input.lastIOSEnter=r,n.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{n.input.lastIOSEnter==r&&(n.someProp("handleKeyDown",i=>i(n,_n(13,"Enter"))),n.input.lastIOSEnter=0)},200)}else n.someProp("handleKeyDown",r=>r(n,t))||Eh(n,t)?t.preventDefault():rn(n,"key")};Ae.keyup=(n,e)=>{e.keyCode==16&&(n.input.shiftKey=!1)};Ae.keypress=(n,e)=>{let t=e;if(Qu(n,t)||!t.charCode||t.ctrlKey&&!t.altKey||Ue&&t.metaKey)return;if(n.someProp("handleKeyPress",i=>i(n,t))){t.preventDefault();return}let r=n.state.selection;if(!(r instanceof q)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(t.charCode);n.someProp("handleTextInput",s=>s(n,r.$from.pos,r.$to.pos,i))||n.dispatch(n.state.tr.insertText(i).scrollIntoView()),t.preventDefault()}};function is(n){return{left:n.clientX,top:n.clientY}}function Ih(n,e){let t=e.x-n.clientX,r=e.y-n.clientY;return t*t+r*r<100}function Bo(n,e,t,r,i){if(r==-1)return!1;let s=n.state.doc.resolve(r);for(let o=s.depth+1;o>0;o--)if(n.someProp(e,a=>o>s.depth?a(n,t,s.nodeAfter,s.before(o),i,!0):a(n,t,s.node(o),s.before(o),i,!1)))return!0;return!1}function Vn(n,e,t){n.focused||n.focus();let r=n.state.tr.setSelection(e);t=="pointer"&&r.setMeta("pointer",!0),n.dispatch(r)}function Ph(n,e){if(e==-1)return!1;let t=n.state.doc.resolve(e),r=t.nodeAfter;return r&&r.isAtom&&P.isSelectable(r)?(Vn(n,new P(t),"pointer"),!0):!1}function Lh(n,e){if(e==-1)return!1;let t=n.state.selection,r,i;t instanceof P&&(r=t.node);let s=n.state.doc.resolve(e);for(let o=s.depth+1;o>0;o--){let a=o>s.depth?s.nodeAfter:s.node(o);if(P.isSelectable(a)){r&&t.$from.depth>0&&o>=t.$from.depth&&s.before(t.$from.depth+1)==t.$from.pos?i=s.before(t.$from.depth):i=s.before(o);break}}return i!=null?(Vn(n,P.create(n.state.doc,i),"pointer"),!0):!1}function $h(n,e,t,r,i){return Bo(n,"handleClickOn",e,t,r)||n.someProp("handleClick",s=>s(n,e,r))||(i?Lh(n,t):Ph(n,t))}function zh(n,e,t,r){return Bo(n,"handleDoubleClickOn",e,t,r)||n.someProp("handleDoubleClick",i=>i(n,e,r))}function Vh(n,e,t,r){return Bo(n,"handleTripleClickOn",e,t,r)||n.someProp("handleTripleClick",i=>i(n,e,r))||jh(n,t,r)}function jh(n,e,t){if(t.button!=0)return!1;let r=n.state.doc;if(e==-1)return r.inlineContent?(Vn(n,q.create(r,0,r.content.size),"pointer"),!0):!1;let i=r.resolve(e);for(let s=i.depth+1;s>0;s--){let o=s>i.depth?i.nodeAfter:i.node(s),a=i.before(s);if(o.inlineContent)Vn(n,q.create(r,a+1,a+1+o.content.size),"pointer");else if(P.isSelectable(o))Vn(n,P.create(r,a),"pointer");else continue;return!0}}function Ro(n){return Di(n)}const Xu=Ue?"metaKey":"ctrlKey";Re.mousedown=(n,e)=>{let t=e;n.input.shiftKey=t.shiftKey;let r=Ro(n),i=Date.now(),s="singleClick";i-n.input.lastClick.time<500&&Ih(t,n.input.lastClick)&&!t[Xu]&&(n.input.lastClick.type=="singleClick"?s="doubleClick":n.input.lastClick.type=="doubleClick"&&(s="tripleClick")),n.input.lastClick={time:i,x:t.clientX,y:t.clientY,type:s};let o=n.posAtCoords(is(t));!o||(s=="singleClick"?(n.input.mouseDown&&n.input.mouseDown.done(),n.input.mouseDown=new Hh(n,o,t,!!r)):(s=="doubleClick"?zh:Vh)(n,o.pos,o.inside,t)?t.preventDefault():rn(n,"pointer"))};class Hh{constructor(e,t,r,i){this.view=e,this.pos=t,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[Xu],this.allowDefault=r.shiftKey;let s,o;if(t.inside>-1)s=e.state.doc.nodeAt(t.inside),o=t.inside;else{let u=e.state.doc.resolve(t.pos);s=u.parent,o=u.depth?u.before():0}const a=i?null:r.target,l=a?e.docView.nearestDesc(a,!0):null;this.target=l?l.dom:null;let{selection:c}=e.state;(r.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||c instanceof P&&c.from<=o&&c.to>o)&&(this.mightDrag={node:s,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&pt&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),rn(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>jt(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(is(e))),this.allowDefault||!t?rn(this.view,"pointer"):$h(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Be&&this.mightDrag&&!this.mightDrag.node.isAtom||Se&&!(this.view.state.selection instanceof q)&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(Vn(this.view,j.near(this.view.state.doc.resolve(t.pos)),"pointer"),e.preventDefault()):rn(this.view,"pointer")}move(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0),rn(this.view,"pointer"),e.buttons==0&&this.done()}}Re.touchdown=n=>{Ro(n),rn(n,"pointer")};Re.contextmenu=n=>Ro(n);function Qu(n,e){return n.composing?!0:Be&&Math.abs(e.timeStamp-n.input.compositionEndedAt)<500?(n.input.compositionEndedAt=-2e8,!0):!1}const qh=lt?5e3:-1;Ae.compositionstart=Ae.compositionupdate=n=>{if(!n.composing){n.domObserver.flush();let{state:e}=n,t=e.selection.$from;if(e.selection.empty&&(e.storedMarks||!t.textOffset&&t.parentOffset&&t.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))n.markCursor=n.state.storedMarks||t.marks(),Di(n,!0),n.markCursor=null;else if(Di(n),pt&&e.selection.empty&&t.parentOffset&&!t.textOffset&&t.nodeBefore.marks.length){let r=n.domSelection();for(let i=r.focusNode,s=r.focusOffset;i&&i.nodeType==1&&s!=0;){let o=s<0?i.lastChild:i.childNodes[s-1];if(!o)break;if(o.nodeType==3){r.collapse(o,o.nodeValue.length);break}else i=o,s=-1}}n.input.composing=!0}Zu(n,qh)};Ae.compositionend=(n,e)=>{n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=e.timeStamp,Zu(n,20))};function Zu(n,e){clearTimeout(n.input.composingTimeout),e>-1&&(n.input.composingTimeout=setTimeout(()=>Di(n),e))}function ec(n){for(n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=Wh());n.input.compositionNodes.length>0;)n.input.compositionNodes.pop().markParentsDirty()}function Wh(){let n=document.createEvent("Event");return n.initEvent("event",!0,!0),n.timeStamp}function Di(n,e=!1){if(!(lt&&n.domObserver.flushingSoon>=0)){if(n.domObserver.forceFlush(),ec(n),e||n.docView&&n.docView.dirty){let t=$u(n);return t&&!t.eq(n.state.selection)?n.dispatch(n.state.tr.setSelection(t)):n.updateState(n.state),!0}return!1}}function Uh(n,e){if(!n.dom.parentNode)return;let t=n.dom.parentNode.appendChild(document.createElement("div"));t.appendChild(e),t.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),n.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t),n.focus()},50)}const Jn=ze&&Lt<15||Kn&&Wf<604;Re.copy=Ae.cut=(n,e)=>{let t=e,r=n.state.selection,i=t.type=="cut";if(r.empty)return;let s=Jn?null:t.clipboardData,o=r.content(),{dom:a,text:l}=qu(n,o);s?(t.preventDefault(),s.clearData(),s.setData("text/html",a.innerHTML),s.setData("text/plain",l)):Uh(n,a),i&&n.dispatch(n.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function Kh(n){return n.openStart==0&&n.openEnd==0&&n.content.childCount==1?n.content.firstChild:null}function Jh(n,e){if(!n.dom.parentNode)return;let t=n.input.shiftKey||n.state.selection.$from.parent.type.spec.code,r=n.dom.parentNode.appendChild(document.createElement(t?"textarea":"div"));t||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus(),setTimeout(()=>{n.focus(),r.parentNode&&r.parentNode.removeChild(r),t?co(n,r.value,null,e):co(n,r.textContent,r.innerHTML,e)},50)}function co(n,e,t,r){let i=Wu(n,e,t,n.input.shiftKey,n.state.selection.$from);if(n.someProp("handlePaste",a=>a(n,r,i||T.empty)))return!0;if(!i)return!1;let s=Kh(i),o=s?n.state.tr.replaceSelectionWith(s,n.input.shiftKey):n.state.tr.replaceSelection(i);return n.dispatch(o.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}Ae.paste=(n,e)=>{let t=e;if(n.composing&&!lt)return;let r=Jn?null:t.clipboardData;r&&co(n,r.getData("text/plain"),r.getData("text/html"),t)?t.preventDefault():Jh(n,t)};class Gh{constructor(e,t){this.slice=e,this.move=t}}const tc=Ue?"altKey":"ctrlKey";Re.dragstart=(n,e)=>{let t=e,r=n.input.mouseDown;if(r&&r.done(),!t.dataTransfer)return;let i=n.state.selection,s=i.empty?null:n.posAtCoords(is(t));if(!(s&&s.pos>=i.from&&s.pos<=(i instanceof P?i.to-1:i.to))){if(r&&r.mightDrag)n.dispatch(n.state.tr.setSelection(P.create(n.state.doc,r.mightDrag.pos)));else if(t.target&&t.target.nodeType==1){let c=n.docView.nearestDesc(t.target,!0);c&&c.node.type.spec.draggable&&c!=n.docView&&n.dispatch(n.state.tr.setSelection(P.create(n.state.doc,c.posBefore)))}}let o=n.state.selection.content(),{dom:a,text:l}=qu(n,o);t.dataTransfer.clearData(),t.dataTransfer.setData(Jn?"Text":"text/html",a.innerHTML),t.dataTransfer.effectAllowed="copyMove",Jn||t.dataTransfer.setData("text/plain",l),n.dragging=new Gh(o,!t[tc])};Re.dragend=n=>{let e=n.dragging;window.setTimeout(()=>{n.dragging==e&&(n.dragging=null)},50)};Ae.dragover=Ae.dragenter=(n,e)=>e.preventDefault();Ae.drop=(n,e)=>{let t=e,r=n.dragging;if(n.dragging=null,!t.dataTransfer)return;let i=n.posAtCoords(is(t));if(!i)return;let s=n.state.doc.resolve(i.pos);if(!s)return;let o=r&&r.slice;o?n.someProp("transformPasted",p=>{o=p(o)}):o=Wu(n,t.dataTransfer.getData(Jn?"Text":"text/plain"),Jn?null:t.dataTransfer.getData("text/html"),!1,s);let a=!!(r&&!t[tc]);if(n.someProp("handleDrop",p=>p(n,t,o||T.empty,a))){t.preventDefault();return}if(!o)return;t.preventDefault();let l=o?Nf(n.state.doc,s.pos,o):s.pos;l==null&&(l=s.pos);let c=n.state.tr;a&&c.deleteSelection();let u=c.mapping.map(l),d=o.openStart==0&&o.openEnd==0&&o.content.childCount==1,f=c.doc;if(d?c.replaceRangeWith(u,u,o.content.firstChild):c.replaceRange(u,u,o),c.doc.eq(f))return;let h=c.doc.resolve(u);if(d&&P.isSelectable(o.content.firstChild)&&h.nodeAfter&&h.nodeAfter.sameMarkup(o.content.firstChild))c.setSelection(new P(h));else{let p=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach((m,y,b,k)=>p=k),c.setSelection(Fo(n,h,c.doc.resolve(p)))}n.focus(),n.dispatch(c.setMeta("uiEvent","drop"))};Re.focus=n=>{n.focused||(n.domObserver.stop(),n.dom.classList.add("ProseMirror-focused"),n.domObserver.start(),n.focused=!0,setTimeout(()=>{n.docView&&n.hasFocus()&&!n.domObserver.currentSelection.eq(n.domSelection())&&jt(n)},20))};Re.blur=(n,e)=>{let t=e;n.focused&&(n.domObserver.stop(),n.dom.classList.remove("ProseMirror-focused"),n.domObserver.start(),t.relatedTarget&&n.dom.contains(t.relatedTarget)&&n.domObserver.currentSelection.clear(),n.focused=!1)};Re.beforeinput=(n,e)=>{if(Se&&lt&&e.inputType=="deleteContentBackward"){n.domObserver.flushSoon();let{domChangeCount:r}=n.input;setTimeout(()=>{if(n.input.domChangeCount!=r||(n.dom.blur(),n.focus(),n.someProp("handleKeyDown",s=>s(n,_n(8,"Backspace")))))return;let{$cursor:i}=n.state.selection;i&&i.pos>0&&n.dispatch(n.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let n in Ae)Re[n]=Ae[n];function Ir(n,e){if(n==e)return!0;for(let t in n)if(n[t]!==e[t])return!1;for(let t in e)if(!(t in n))return!1;return!0}class Io{constructor(e,t){this.toDOM=e,this.spec=t||fn,this.side=this.spec.side||0}map(e,t,r,i){let{pos:s,deleted:o}=e.mapResult(t.from+i,this.side<0?-1:1);return o?null:new Ze(s-r,s-r,this)}valid(){return!0}eq(e){return this==e||e instanceof Io&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Ir(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class $t{constructor(e,t){this.attrs=e,this.spec=t||fn}map(e,t,r,i){let s=e.map(t.from+i,this.spec.inclusiveStart?-1:1)-r,o=e.map(t.to+i,this.spec.inclusiveEnd?1:-1)-r;return s>=o?null:new Ze(s,o,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof $t&&Ir(this.attrs,e.attrs)&&Ir(this.spec,e.spec)}static is(e){return e.type instanceof $t}destroy(){}}class Po{constructor(e,t){this.attrs=e,this.spec=t||fn}map(e,t,r,i){let s=e.mapResult(t.from+i,1);if(s.deleted)return null;let o=e.mapResult(t.to+i,-1);return o.deleted||o.pos<=s.pos?null:new Ze(s.pos-r,o.pos-r,this)}valid(e,t){let{index:r,offset:i}=e.content.findIndex(t.from),s;return i==t.from&&!(s=e.child(r)).isText&&i+s.nodeSize==t.to}eq(e){return this==e||e instanceof Po&&Ir(this.attrs,e.attrs)&&Ir(this.spec,e.spec)}destroy(){}}class Ze{constructor(e,t,r){this.from=e,this.to=t,this.type=r}copy(e,t){return new Ze(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,r){return this.type.map(e,this,t,r)}static widget(e,t,r){return new Ze(e,e,new Io(t,r))}static inline(e,t,r,i){return new Ze(e,t,new $t(r,i))}static node(e,t,r,i){return new Ze(e,t,new Po(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof $t}}const On=[],fn={};class xe{constructor(e,t){this.local=e.length?e:On,this.children=t.length?t:On}static create(e,t){return t.length?xi(t,e,0,fn):De}find(e,t,r){let i=[];return this.findInner(e==null?0:e,t==null?1e9:t,i,0,r),i}findInner(e,t,r,i,s){for(let o=0;o<this.local.length;o++){let a=this.local[o];a.from<=t&&a.to>=e&&(!s||s(a.spec))&&r.push(a.copy(a.from+i,a.to+i))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<t&&this.children[o+1]>e){let a=this.children[o]+1;this.children[o+2].findInner(e-a,t-a,r,i+a,s)}}map(e,t,r){return this==De||e.maps.length==0?this:this.mapInner(e,t,0,0,r||fn)}mapInner(e,t,r,i,s){let o;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(e,r,i);l&&l.type.valid(t,l)?(o||(o=[])).push(l):s.onRemove&&s.onRemove(this.local[a].spec)}return this.children.length?Yh(this.children,o||[],e,t,r,i,s):o?new xe(o.sort(hn),On):De}add(e,t){return t.length?this==De?xe.create(e,t):this.addInner(e,t,0):this}addInner(e,t,r){let i,s=0;e.forEach((a,l)=>{let c=l+r,u;if(!!(u=rc(t,a,c))){for(i||(i=this.children.slice());s<i.length&&i[s]<l;)s+=3;i[s]==l?i[s+2]=i[s+2].addInner(a,u,c+1):i.splice(s,0,l,l+a.nodeSize,xi(u,a,c+1,fn)),s+=3}});let o=nc(s?ic(t):t,-r);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||o.splice(a--,1);return new xe(o.length?this.local.concat(o).sort(hn):this.local,i||this.children)}remove(e){return e.length==0||this==De?this:this.removeInner(e,0)}removeInner(e,t){let r=this.children,i=this.local;for(let s=0;s<r.length;s+=3){let o,a=r[s]+t,l=r[s+1]+t;for(let u=0,d;u<e.length;u++)(d=e[u])&&d.from>a&&d.to<l&&(e[u]=null,(o||(o=[])).push(d));if(!o)continue;r==this.children&&(r=this.children.slice());let c=r[s+2].removeInner(o,a+1);c!=De?r[s+2]=c:(r.splice(s,3),s-=3)}if(i.length){for(let s=0,o;s<e.length;s++)if(o=e[s])for(let a=0;a<i.length;a++)i[a].eq(o,t)&&(i==this.local&&(i=this.local.slice()),i.splice(a--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new xe(i,r):De}forChild(e,t){if(this==De)return this;if(t.isLeaf)return xe.empty;let r,i;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(r=this.children[a+2]);break}let s=e+1,o=s+t.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<o&&l.to>s&&l.type instanceof $t){let c=Math.max(s,l.from)-s,u=Math.min(o,l.to)-s;c<u&&(i||(i=[])).push(l.copy(c,u))}}if(i){let a=new xe(i.sort(hn),On);return r?new Rt([a,r]):a}return r||De}eq(e){if(this==e)return!0;if(!(e instanceof xe)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return Lo(this.localsInner(e))}localsInner(e){if(this==De)return On;if(e.inlineContent||!this.local.some($t.is))return this.local;let t=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof $t||t.push(this.local[r]);return t}}xe.empty=new xe([],[]);xe.removeOverlap=Lo;const De=xe.empty;class Rt{constructor(e){this.members=e}map(e,t){const r=this.members.map(i=>i.map(e,t,fn));return Rt.from(r)}forChild(e,t){if(t.isLeaf)return xe.empty;let r=[];for(let i=0;i<this.members.length;i++){let s=this.members[i].forChild(e,t);s!=De&&(s instanceof Rt?r=r.concat(s.members):r.push(s))}return Rt.from(r)}eq(e){if(!(e instanceof Rt)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,r=!0;for(let i=0;i<this.members.length;i++){let s=this.members[i].localsInner(e);if(!!s.length)if(!t)t=s;else{r&&(t=t.slice(),r=!1);for(let o=0;o<s.length;o++)t.push(s[o])}}return t?Lo(r?t:t.sort(hn)):On}static from(e){switch(e.length){case 0:return De;case 1:return e[0];default:return new Rt(e)}}}function Yh(n,e,t,r,i,s,o){let a=n.slice(),l=(u,d,f,h)=>{for(let p=0;p<a.length;p+=3){let m=a[p+1],y;if(m<0||u>m+s)continue;let b=a[p]+s;d>=b?a[p+1]=u<=b?-2:-1:f>=i&&(y=h-f-(d-u))&&(a[p]+=y,a[p+1]+=y)}};for(let u=0;u<t.maps.length;u++)t.maps[u].forEach(l);let c=!1;for(let u=0;u<a.length;u+=3)if(a[u+1]<0){if(a[u+1]==-2){c=!0,a[u+1]=-1;continue}let d=t.map(n[u]+s),f=d-i;if(f<0||f>=r.content.size){c=!0;continue}let h=t.map(n[u+1]+s,-1),p=h-i,{index:m,offset:y}=r.content.findIndex(f),b=r.maybeChild(m);if(b&&y==f&&y+b.nodeSize==p){let k=a[u+2].mapInner(t,b,d+1,n[u]+s+1,o);k!=De?(a[u]=f,a[u+1]=p,a[u+2]=k):(a[u+1]=-2,c=!0)}else c=!0}if(c){let u=Xh(a,n,e,t,i,s,o),d=xi(u,r,0,o);e=d.local;for(let f=0;f<a.length;f+=3)a[f+1]<0&&(a.splice(f,3),f-=3);for(let f=0,h=0;f<d.children.length;f+=3){let p=d.children[f];for(;h<a.length&&a[h]<p;)h+=3;a.splice(h,0,d.children[f],d.children[f+1],d.children[f+2])}}return new xe(e.sort(hn),a)}function nc(n,e){if(!e||!n.length)return n;let t=[];for(let r=0;r<n.length;r++){let i=n[r];t.push(new Ze(i.from+e,i.to+e,i.type))}return t}function Xh(n,e,t,r,i,s,o){function a(l,c){for(let u=0;u<l.local.length;u++){let d=l.local[u].map(r,i,c);d?t.push(d):o.onRemove&&o.onRemove(l.local[u].spec)}for(let u=0;u<l.children.length;u+=3)a(l.children[u+2],l.children[u]+c+1)}for(let l=0;l<n.length;l+=3)n[l+1]==-1&&a(n[l+2],e[l]+s+1);return t}function rc(n,e,t){if(e.isLeaf)return null;let r=t+e.nodeSize,i=null;for(let s=0,o;s<n.length;s++)(o=n[s])&&o.from>t&&o.to<r&&((i||(i=[])).push(o),n[s]=null);return i}function ic(n){let e=[];for(let t=0;t<n.length;t++)n[t]!=null&&e.push(n[t]);return e}function xi(n,e,t,r){let i=[],s=!1;e.forEach((a,l)=>{let c=rc(n,a,l+t);if(c){s=!0;let u=xi(c,a,t+l+1,r);u!=De&&i.push(l,l+a.nodeSize,u)}});let o=nc(s?ic(n):n,-t).sort(hn);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||(r.onRemove&&r.onRemove(o[a].spec),o.splice(a--,1));return o.length||i.length?new xe(o,i):De}function hn(n,e){return n.from-e.from||n.to-e.to}function Lo(n){let e=n;for(let t=0;t<e.length-1;t++){let r=e[t];if(r.from!=r.to)for(let i=t+1;i<e.length;i++){let s=e[i];if(s.from==r.from){s.to!=r.to&&(e==n&&(e=n.slice()),e[i]=s.copy(s.from,r.to),el(e,i+1,s.copy(r.to,s.to)));continue}else{s.from<r.to&&(e==n&&(e=n.slice()),e[t]=r.copy(r.from,s.from),el(e,i,r.copy(s.from,r.to)));break}}}return e}function el(n,e,t){for(;e<n.length&&hn(t,n[e])>0;)e++;n.splice(e,0,t)}function Is(n){let e=[];return n.someProp("decorations",t=>{let r=t(n.state);r&&r!=De&&e.push(r)}),n.cursorWrapper&&e.push(xe.create(n.state.doc,[n.cursorWrapper.deco])),Rt.from(e)}const Qh={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},Zh=ze&&Lt<=11;class ep{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class tp{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new ep,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);ze&&Lt<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),Zh&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&this.observer.observe(this.view.dom,Qh),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(!!Ka(this.view)){if(this.suppressingSelectionUpdates)return jt(this.view);if(ze&&Lt<=11&&!this.view.state.selection.empty){let e=this.view.domSelection();if(e.focusNode&&Rr(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelection())}ignoreSelectionChange(e){if(e.rangeCount==0)return!0;let t=e.getRangeAt(0).commonAncestorContainer,r=this.view.docView.nearestDesc(t);if(r&&r.ignoreMutation({type:"selection",target:t.nodeType==3?t.parentNode:t}))return this.setCurSelection(),!0}flush(){if(!this.view.docView||this.flushingSoon>-1)return;let e=this.observer?this.observer.takeRecords():[];this.queue.length&&(e=this.queue.concat(e),this.queue.length=0);let t=this.view.domSelection(),r=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(t)&&Ka(this.view)&&!this.ignoreSelectionChange(t),i=-1,s=-1,o=!1,a=[];if(this.view.editable)for(let l=0;l<e.length;l++){let c=this.registerMutation(e[l],a);c&&(i=i<0?c.from:Math.min(c.from,i),s=s<0?c.to:Math.max(c.to,s),c.typeOver&&(o=!0))}if(pt&&a.length>1){let l=a.filter(c=>c.nodeName=="BR");if(l.length==2){let c=l[0],u=l[1];c.parentNode&&c.parentNode.parentNode==u.parentNode?u.remove():c.remove()}}(i>-1||r)&&(i>-1&&(this.view.docView.markDirty(i,s),np(this.view)),this.handleDOMChange(i,s,o,a),this.view.docView&&this.view.docView.dirty?this.view.updateState(this.view.state):this.currentSelection.eq(t)||jt(this.view),this.currentSelection.set(t))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let u=0;u<e.addedNodes.length;u++)t.push(e.addedNodes[u]);if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,s=e.nextSibling;if(ze&&Lt<=11&&e.addedNodes.length)for(let u=0;u<e.addedNodes.length;u++){let{previousSibling:d,nextSibling:f}=e.addedNodes[u];(!d||Array.prototype.indexOf.call(e.addedNodes,d)<0)&&(i=d),(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(s=f)}let o=i&&i.parentNode==e.target?Le(i)+1:0,a=r.localPosFromDOM(e.target,o,-1),l=s&&s.parentNode==e.target?Le(s):e.target.childNodes.length,c=r.localPosFromDOM(e.target,l,1);return{from:a,to:c}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}}}let tl=!1;function np(n){tl||(tl=!0,getComputedStyle(n.dom).whiteSpace=="normal"&&console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."))}function rp(n,e,t){let{node:r,fromOffset:i,toOffset:s,from:o,to:a}=n.docView.parseRange(e,t),l=n.domSelection(),c,u=l.anchorNode;if(u&&n.dom.contains(u.nodeType==1?u:u.parentNode)&&(c=[{node:u,offset:l.anchorOffset}],Mo(l)||c.push({node:l.focusNode,offset:l.focusOffset})),Se&&n.input.lastKeyCode===8)for(let y=s;y>i;y--){let b=r.childNodes[y-1],k=b.pmViewDesc;if(b.nodeName=="BR"&&!k){s=y;break}if(!k||k.size)break}let d=n.state.doc,f=n.someProp("domParser")||Wn.fromSchema(n.state.schema),h=d.resolve(o),p=null,m=f.parse(r,{topNode:h.parent,topMatch:h.parent.contentMatchAt(h.index()),topOpen:!0,from:i,to:s,preserveWhitespace:h.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:ip,context:h});if(c&&c[0].pos!=null){let y=c[0].pos,b=c[1]&&c[1].pos;b==null&&(b=y),p={anchor:y+o,head:b+o}}return{doc:m,sel:p,from:o,to:a}}function ip(n){let e=n.pmViewDesc;if(e)return e.parseRule();if(n.nodeName=="BR"&&n.parentNode){if(Be&&/^(ul|ol)$/i.test(n.parentNode.nodeName)){let t=document.createElement("div");return t.appendChild(document.createElement("li")),{skip:t}}else if(n.parentNode.lastChild==n||Be&&/^(tr|table)$/i.test(n.parentNode.nodeName))return{ignore:!0}}else if(n.nodeName=="IMG"&&n.getAttribute("mark-placeholder"))return{ignore:!0};return null}function sp(n,e,t,r,i){if(e<0){let S=n.input.lastSelectionTime>Date.now()-50?n.input.lastSelectionOrigin:null,W=$u(n,S);if(W&&!n.state.selection.eq(W)){let G=n.state.tr.setSelection(W);S=="pointer"?G.setMeta("pointer",!0):S=="key"&&G.scrollIntoView(),n.dispatch(G)}return}let s=n.state.doc.resolve(e),o=s.sharedDepth(t);e=s.before(o+1),t=n.state.doc.resolve(t).after(o+1);let a=n.state.selection,l=rp(n,e,t);if(Se&&n.cursorWrapper&&l.sel&&l.sel.anchor==n.cursorWrapper.deco.from){let S=n.cursorWrapper.deco.type.toDOM.nextSibling,W=S&&S.nodeValue?S.nodeValue.length:1;l.sel={anchor:l.sel.anchor+W,head:l.sel.anchor+W}}let c=n.state.doc,u=c.slice(l.from,l.to),d,f;n.input.lastKeyCode===8&&Date.now()-100<n.input.lastKeyCodeTime?(d=n.state.selection.to,f="end"):(d=n.state.selection.from,f="start"),n.input.lastKeyCode=null;let h=lp(u.content,l.doc.content,l.from,d,f);if((Kn&&n.input.lastIOSEnter>Date.now()-225||lt)&&i.some(S=>S.nodeName=="DIV"||S.nodeName=="P")&&(!h||h.endA>=h.endB)&&n.someProp("handleKeyDown",S=>S(n,_n(13,"Enter")))){n.input.lastIOSEnter=0;return}if(!h)if(r&&a instanceof q&&!a.empty&&a.$head.sameParent(a.$anchor)&&!n.composing&&!(l.sel&&l.sel.anchor!=l.sel.head))h={start:a.from,endA:a.to,endB:a.to};else{if(l.sel){let S=nl(n,n.state.doc,l.sel);S&&!S.eq(n.state.selection)&&n.dispatch(n.state.tr.setSelection(S))}return}n.input.domChangeCount++,n.state.selection.from<n.state.selection.to&&h.start==h.endB&&n.state.selection instanceof q&&(h.start>n.state.selection.from&&h.start<=n.state.selection.from+2&&n.state.selection.from>=l.from?h.start=n.state.selection.from:h.endA<n.state.selection.to&&h.endA>=n.state.selection.to-2&&n.state.selection.to<=l.to&&(h.endB+=n.state.selection.to-h.endA,h.endA=n.state.selection.to)),ze&&Lt<=11&&h.endB==h.start+1&&h.endA==h.start&&h.start>l.from&&l.doc.textBetween(h.start-l.from-1,h.start-l.from+1)==" \xA0"&&(h.start--,h.endA--,h.endB--);let p=l.doc.resolveNoCache(h.start-l.from),m=l.doc.resolveNoCache(h.endB-l.from),y=c.resolve(h.start),b=p.sameParent(m)&&p.parent.inlineContent&&y.end()>=h.endA,k;if((Kn&&n.input.lastIOSEnter>Date.now()-225&&(!b||i.some(S=>S.nodeName=="DIV"||S.nodeName=="P"))||!b&&p.pos<l.doc.content.size&&(k=j.findFrom(l.doc.resolve(p.pos+1),1,!0))&&k.head==m.pos)&&n.someProp("handleKeyDown",S=>S(n,_n(13,"Enter")))){n.input.lastIOSEnter=0;return}if(n.state.selection.anchor>h.start&&ap(c,h.start,h.endA,p,m)&&n.someProp("handleKeyDown",S=>S(n,_n(8,"Backspace")))){lt&&Se&&n.domObserver.suppressSelectionUpdates();return}Se&&lt&&h.endB==h.start&&(n.input.lastAndroidDelete=Date.now()),lt&&!b&&p.start()!=m.start()&&m.parentOffset==0&&p.depth==m.depth&&l.sel&&l.sel.anchor==l.sel.head&&l.sel.head==h.endA&&(h.endB-=2,m=l.doc.resolveNoCache(h.endB-l.from),setTimeout(()=>{n.someProp("handleKeyDown",function(S){return S(n,_n(13,"Enter"))})},20));let O=h.start,g=h.endA,_,A,N;if(b){if(p.pos==m.pos)ze&&Lt<=11&&p.parentOffset==0&&(n.domObserver.suppressSelectionUpdates(),setTimeout(()=>jt(n),20)),_=n.state.tr.delete(O,g),A=c.resolve(h.start).marksAcross(c.resolve(h.endA));else if(h.endA==h.endB&&(N=op(p.parent.content.cut(p.parentOffset,m.parentOffset),y.parent.content.cut(y.parentOffset,h.endA-y.start()))))_=n.state.tr,N.type=="add"?_.addMark(O,g,N.mark):_.removeMark(O,g,N.mark);else if(p.parent.child(p.index()).isText&&p.index()==m.index()-(m.textOffset?0:1)){let S=p.parent.textBetween(p.parentOffset,m.parentOffset);if(n.someProp("handleTextInput",W=>W(n,O,g,S)))return;_=n.state.tr.insertText(S,O,g)}}if(_||(_=n.state.tr.replace(O,g,l.doc.slice(h.start-l.from,h.endB-l.from))),l.sel){let S=nl(n,_.doc,l.sel);S&&!(Se&&lt&&n.composing&&S.empty&&(h.start!=h.endB||n.input.lastAndroidDelete<Date.now()-100)&&(S.head==O||S.head==_.mapping.map(g)-1)||ze&&S.empty&&S.head==O)&&_.setSelection(S)}A&&_.ensureMarks(A),n.dispatch(_.scrollIntoView())}function nl(n,e,t){return Math.max(t.anchor,t.head)>e.content.size?null:Fo(n,e.resolve(t.anchor),e.resolve(t.head))}function op(n,e){let t=n.firstChild.marks,r=e.firstChild.marks,i=t,s=r,o,a,l;for(let u=0;u<r.length;u++)i=r[u].removeFromSet(i);for(let u=0;u<t.length;u++)s=t[u].removeFromSet(s);if(i.length==1&&s.length==0)a=i[0],o="add",l=u=>u.mark(a.addToSet(u.marks));else if(i.length==0&&s.length==1)a=s[0],o="remove",l=u=>u.mark(a.removeFromSet(u.marks));else return null;let c=[];for(let u=0;u<e.childCount;u++)c.push(l(e.child(u)));if(w.from(c).eq(n))return{mark:a,type:o}}function ap(n,e,t,r,i){if(!r.parent.isTextblock||t-e<=i.pos-r.pos||Ps(r,!0,!1)<i.pos)return!1;let s=n.resolve(e);if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let o=n.resolve(Ps(s,!0,!0));return!o.parent.isTextblock||o.pos>t||Ps(o,!0,!1)<t?!1:r.parent.content.cut(r.parentOffset).eq(o.parent.content)}function Ps(n,e,t){let r=n.depth,i=e?n.end():n.pos;for(;r>0&&(e||n.indexAfter(r)==n.node(r).childCount);)r--,i++,e=!1;if(t){let s=n.node(r).maybeChild(n.indexAfter(r));for(;s&&!s.isLeaf;)s=s.firstChild,i++}return i}function lp(n,e,t,r,i){let s=n.findDiffStart(e,t);if(s==null)return null;let{a:o,b:a}=n.findDiffEnd(e,t+n.size,t+e.size);if(i=="end"){let l=Math.max(0,s-Math.min(o,a));r-=o+l-s}return o<s&&n.size<e.size?(s-=r<=s&&r>=o?s-r:0,a=s+(a-o),o=s):a<s&&(s-=r<=s&&r>=a?s-r:0,o=s+(o-a),a=s),{start:s,endA:o,endB:a}}class up{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new _h,this.prevDirectPlugins=[],this.pluginViews=[],this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(al),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=sl(this),il(this),this.nodeViews=ol(this),this.docView=Va(this.state.doc,rl(this),Is(this),this.dom,this),this.domObserver=new tp(this,(r,i,s,o)=>sp(this,r,i,s,o)),this.domObserver.start(),Fh(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&uo(this),this._props=e,e.plugins&&(e.plugins.forEach(al),this.directPlugins=e.plugins),this.updateStateInner(e.state,!0)}setProps(e){let t={};for(let r in this._props)t[r]=this._props[r];t.state=this.state;for(let r in e)t[r]=e[r];this.update(t)}updateState(e){this.updateStateInner(e,this.state.plugins!=e.plugins)}updateStateInner(e,t){let r=this.state,i=!1,s=!1;if(e.storedMarks&&this.composing&&(ec(this),s=!0),this.state=e,t){let d=ol(this);dp(d,this.nodeViews)&&(this.nodeViews=d,i=!0),uo(this)}this.editable=sl(this),il(this);let o=Is(this),a=rl(this),l=t?"reset":e.scrollToSelection>r.scrollToSelection?"to selection":"preserve",c=i||!this.docView.matchesNode(e.doc,a,o);(c||!e.selection.eq(r.selection))&&(s=!0);let u=l=="preserve"&&s&&this.dom.style.overflowAnchor==null&&Xf(this);if(s){this.domObserver.stop();let d=c&&(ze||Se)&&!this.composing&&!r.selection.empty&&!e.selection.empty&&cp(r.selection,e.selection);if(c){let f=Se?this.trackWrites=this.domSelection().focusNode:null;(i||!this.docView.update(e.doc,a,o,this))&&(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=Va(e.doc,a,o,this.dom,this)),f&&!this.trackWrites&&(d=!0)}d||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelection())&&kh(this))?jt(this,d):(Vu(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}if(this.updatePluginViews(r),l=="reset")this.dom.scrollTop=0;else if(l=="to selection"){let d=this.domSelection().focusNode;if(!this.someProp("handleScrollToSelection",f=>f(this)))if(e.selection instanceof P){let f=this.docView.domAfterPos(e.selection.from);f.nodeType==1&&Ia(this,f.getBoundingClientRect(),d)}else Ia(this,this.coordsAtPos(e.selection.head,1),d)}else u&&Qf(u)}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let t=0;t<this.directPlugins.length;t++){let r=this.directPlugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let t=0;t<this.state.plugins.length;t++){let r=this.state.plugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let t=0;t<this.pluginViews.length;t++){let r=this.pluginViews[t];r.update&&r.update(this,e)}}someProp(e,t){let r=this._props&&this._props[e],i;if(r!=null&&(i=t?t(r):r))return i;for(let o=0;o<this.directPlugins.length;o++){let a=this.directPlugins[o].props[e];if(a!=null&&(i=t?t(a):a))return i}let s=this.state.plugins;if(s)for(let o=0;o<s.length;o++){let a=s[o].props[e];if(a!=null&&(i=t?t(a):a))return i}}hasFocus(){return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&Zf(this.dom),jt(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let t=this.dom.parentNode;t;t=t.parentNode)if(t.nodeType==9||t.nodeType==11&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t}return e||document}posAtCoords(e){return ih(this,e)}coordsAtPos(e,t=1){return Fu(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,r=-1){let i=this.docView.posFromDOM(e,t,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,t){return uh(this,t||this.state,e)}destroy(){!this.docView||(Nh(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Is(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)}get isDestroyed(){return this.docView==null}dispatchEvent(e){return Rh(this,e)}dispatch(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))}domSelection(){return this.root.getSelection()}}function rl(n){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(n.editable),e.translate="no",n.someProp("attributes",t=>{if(typeof t=="function"&&(t=t(n.state)),t)for(let r in t)r=="class"&&(e.class+=" "+t[r]),r=="style"?e.style=(e.style?e.style+";":"")+t[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(t[r]))}),[Ze.node(0,n.state.doc.content.size,e)]}function il(n){if(n.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),n.cursorWrapper={dom:e,deco:Ze.widget(n.state.selection.head,e,{raw:!0,marks:n.markCursor})}}else n.cursorWrapper=null}function sl(n){return!n.someProp("editable",e=>e(n.state)===!1)}function cp(n,e){let t=Math.min(n.$anchor.sharedDepth(n.head),e.$anchor.sharedDepth(e.head));return n.$anchor.start(t)!=e.$anchor.start(t)}function ol(n){let e=Object.create(null);function t(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return n.someProp("nodeViews",t),n.someProp("markViews",t),e}function dp(n,e){let t=0,r=0;for(let i in n){if(n[i]!=e[i])return!0;t++}for(let i in e)r++;return t!=r}function al(n){if(n.spec.state||n.spec.filterTransaction||n.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Ht={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},ki={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},ll=typeof navigator<"u"&&/Chrome\/(\d+)/.exec(navigator.userAgent);typeof navigator<"u"&&/Gecko\/\d+/.test(navigator.userAgent);var fp=typeof navigator<"u"&&/Mac/.test(navigator.platform),hp=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),pp=fp||ll&&+ll[1]<57;for(var ve=0;ve<10;ve++)Ht[48+ve]=Ht[96+ve]=String(ve);for(var ve=1;ve<=24;ve++)Ht[ve+111]="F"+ve;for(var ve=65;ve<=90;ve++)Ht[ve]=String.fromCharCode(ve+32),ki[ve]=String.fromCharCode(ve);for(var Ls in Ht)ki.hasOwnProperty(Ls)||(ki[Ls]=Ht[Ls]);function mp(n){var e=pp&&(n.ctrlKey||n.altKey||n.metaKey)||hp&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?ki:Ht)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}const gp=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function vp(n){let e=n.split(/-(?!$)/),t=e[e.length-1];t=="Space"&&(t=" ");let r,i,s,o;for(let a=0;a<e.length-1;a++){let l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))gp?o=!0:i=!0;else throw new Error("Unrecognized modifier name: "+l)}return r&&(t="Alt-"+t),i&&(t="Ctrl-"+t),o&&(t="Meta-"+t),s&&(t="Shift-"+t),t}function yp(n){let e=Object.create(null);for(let t in n)e[vp(t)]=n[t];return e}function $s(n,e,t){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t!==!1&&e.shiftKey&&(n="Shift-"+n),n}function bp(n){return new je({props:{handleKeyDown:Dp(n)}})}function Dp(n){let e=yp(n);return function(t,r){let i=mp(r),s=i.length==1&&i!=" ",o,a=e[$s(i,r,!s)];if(a&&a(t.state,t.dispatch,t))return!0;if(s&&(r.shiftKey||r.altKey||r.metaKey||i.charCodeAt(0)>127)&&(o=Ht[r.keyCode])&&o!=i){let l=e[$s(o,r,!0)];if(l&&l(t.state,t.dispatch,t))return!0}else if(s&&r.shiftKey){let l=e[$s(i,r,!0)];if(l&&l(t.state,t.dispatch,t))return!0}return!1}}const xp=(n,e)=>n.selection.empty?!1:(e&&e(n.tr.deleteSelection().scrollIntoView()),!0),kp=(n,e,t)=>{let{$cursor:r}=n.selection;if(!r||(t?!t.endOfTextblock("backward",n):r.parentOffset>0))return!1;let i=sc(r);if(!i){let o=r.blockRange(),a=o&&rr(o);return a==null?!1:(e&&e(n.tr.lift(o,a).scrollIntoView()),!0)}let s=i.nodeBefore;if(!s.type.spec.isolating&&lc(n,i,e))return!0;if(r.parent.content.size==0&&(Gn(s,"end")||P.isSelectable(s))){let o=Ao(n.doc,r.before(),r.after(),T.empty);if(o&&o.slice.size<o.to-o.from){if(e){let a=n.tr.step(o);a.setSelection(Gn(s,"end")?j.findFrom(a.doc.resolve(a.mapping.map(i.pos,-1)),-1):P.create(a.doc,i.pos-s.nodeSize)),e(a.scrollIntoView())}return!0}}return s.isAtom&&i.depth==r.depth-1?(e&&e(n.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),!0):!1};function Gn(n,e,t=!1){for(let r=n;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(t&&r.childCount!=1)return!1}return!1}const wp=(n,e,t)=>{let{$head:r,empty:i}=n.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("backward",n):r.parentOffset>0)return!1;s=sc(r)}let o=s&&s.nodeBefore;return!o||!P.isSelectable(o)?!1:(e&&e(n.tr.setSelection(P.create(n.doc,s.pos-o.nodeSize)).scrollIntoView()),!0)};function sc(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){if(n.index(e)>0)return n.doc.resolve(n.before(e+1));if(n.node(e).type.spec.isolating)break}return null}const Cp=(n,e,t)=>{let{$cursor:r}=n.selection;if(!r||(t?!t.endOfTextblock("forward",n):r.parentOffset<r.parent.content.size))return!1;let i=oc(r);if(!i)return!1;let s=i.nodeAfter;if(lc(n,i,e))return!0;if(r.parent.content.size==0&&(Gn(s,"start")||P.isSelectable(s))){let o=Ao(n.doc,r.before(),r.after(),T.empty);if(o&&o.slice.size<o.to-o.from){if(e){let a=n.tr.step(o);a.setSelection(Gn(s,"start")?j.findFrom(a.doc.resolve(a.mapping.map(i.pos)),1):P.create(a.doc,a.mapping.map(i.pos))),e(a.scrollIntoView())}return!0}}return s.isAtom&&i.depth==r.depth-1?(e&&e(n.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0):!1},Ep=(n,e,t)=>{let{$head:r,empty:i}=n.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("forward",n):r.parentOffset<r.parent.content.size)return!1;s=oc(r)}let o=s&&s.nodeAfter;return!o||!P.isSelectable(o)?!1:(e&&e(n.tr.setSelection(P.create(n.doc,s.pos)).scrollIntoView()),!0)};function oc(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){let t=n.node(e);if(n.index(e)+1<t.childCount)return n.doc.resolve(n.after(e+1));if(t.type.spec.isolating)break}return null}const Sp=(n,e)=>{let{$from:t,$to:r}=n.selection,i=t.blockRange(r),s=i&&rr(i);return s==null?!1:(e&&e(n.tr.lift(i,s).scrollIntoView()),!0)},Ap=(n,e)=>{let{$head:t,$anchor:r}=n.selection;return!t.parent.type.spec.code||!t.sameParent(r)?!1:(e&&e(n.tr.insertText(`
`).scrollIntoView()),!0)};function ac(n){for(let e=0;e<n.edgeCount;e++){let{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}const Op=(n,e)=>{let{$head:t,$anchor:r}=n.selection;if(!t.parent.type.spec.code||!t.sameParent(r))return!1;let i=t.node(-1),s=t.indexAfter(-1),o=ac(i.contentMatchAt(s));if(!o||!i.canReplaceWith(s,s,o))return!1;if(e){let a=t.after(),l=n.tr.replaceWith(a,a,o.createAndFill());l.setSelection(j.near(l.doc.resolve(a),1)),e(l.scrollIntoView())}return!0},Tp=(n,e)=>{let t=n.selection,{$from:r,$to:i}=t;if(t instanceof tt||r.parent.inlineContent||i.parent.inlineContent)return!1;let s=ac(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let o=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,a=n.tr.insert(o,s.createAndFill());a.setSelection(q.create(a.doc,o+1)),e(a.scrollIntoView())}return!0},Mp=(n,e)=>{let{$cursor:t}=n.selection;if(!t||t.parent.content.size)return!1;if(t.depth>1&&t.after()!=t.end(-1)){let s=t.before();if(zn(n.doc,s))return e&&e(n.tr.split(s).scrollIntoView()),!0}let r=t.blockRange(),i=r&&rr(r);return i==null?!1:(e&&e(n.tr.lift(r,i).scrollIntoView()),!0)},_p=(n,e)=>{let{$from:t,to:r}=n.selection,i,s=t.sharedDepth(r);return s==0?!1:(i=t.before(s),e&&e(n.tr.setSelection(P.create(n.doc,i))),!0)};function Fp(n,e,t){let r=e.nodeBefore,i=e.nodeAfter,s=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(s-1,s)?(t&&t(n.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(s,s+1)||!(i.isTextblock||es(n.doc,e.pos))?!1:(t&&t(n.tr.clearIncompatible(e.pos,r.type,r.contentMatchAt(r.childCount)).join(e.pos).scrollIntoView()),!0)}function lc(n,e,t){let r=e.nodeBefore,i=e.nodeAfter,s,o;if(r.type.spec.isolating||i.type.spec.isolating)return!1;if(Fp(n,e,t))return!0;let a=e.parent.canReplace(e.index(),e.index()+1);if(a&&(s=(o=r.contentMatchAt(r.childCount)).findWrapping(i.type))&&o.matchType(s[0]||i.type).validEnd){if(t){let d=e.pos+i.nodeSize,f=w.empty;for(let m=s.length-1;m>=0;m--)f=w.from(s[m].create(null,f));f=w.from(r.copy(f));let h=n.tr.step(new pe(e.pos-1,d,e.pos,d,new T(f,1,0),s.length,!0)),p=d+2*s.length;es(h.doc,p)&&h.join(p),t(h.scrollIntoView())}return!0}let l=j.findFrom(e,1),c=l&&l.$from.blockRange(l.$to),u=c&&rr(c);if(u!=null&&u>=e.depth)return t&&t(n.tr.lift(c,u).scrollIntoView()),!0;if(a&&Gn(i,"start",!0)&&Gn(r,"end")){let d=r,f=[];for(;f.push(d),!d.isTextblock;)d=d.lastChild;let h=i,p=1;for(;!h.isTextblock;h=h.firstChild)p++;if(d.canReplace(d.childCount,d.childCount,h.content)){if(t){let m=w.empty;for(let b=f.length-1;b>=0;b--)m=w.from(f[b].copy(m));let y=n.tr.step(new pe(e.pos-f.length,e.pos+i.nodeSize,e.pos+p,e.pos+i.nodeSize-p,new T(m,f.length,0),0,!0));t(y.scrollIntoView())}return!0}}return!1}function uc(n){return function(e,t){let r=e.selection,i=n<0?r.$from:r.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return i.node(s).isTextblock?(t&&t(e.tr.setSelection(q.create(e.doc,n<0?i.start(s):i.end(s)))),!0):!1}}const Np=uc(-1),Bp=uc(1);function Rp(n,e=null){return function(t,r){let{$from:i,$to:s}=t.selection,o=i.blockRange(s),a=o&&bu(o,n,e);return a?(r&&r(t.tr.wrap(o,a).scrollIntoView()),!0):!1}}function ul(n,e=null){return function(t,r){let{from:i,to:s}=t.selection,o=!1;return t.doc.nodesBetween(i,s,(a,l)=>{if(o)return!1;if(!(!a.isTextblock||a.hasMarkup(n,e)))if(a.type==n)o=!0;else{let c=t.doc.resolve(l),u=c.index();o=c.parent.canReplaceWith(u,u+1,n)}}),o?(r&&r(t.tr.setBlockType(i,s,n,e).scrollIntoView()),!0):!1}}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function Ip(n,e=null){return function(t,r){let{$from:i,$to:s}=t.selection,o=i.blockRange(s),a=!1,l=o;if(!o)return!1;if(o.depth>=2&&i.node(o.depth-1).type.compatibleContent(n)&&o.startIndex==0){if(i.index(o.depth-1)==0)return!1;let u=t.doc.resolve(o.start-2);l=new pi(u,u,o.depth),o.endIndex<o.parent.childCount&&(o=new pi(i,t.doc.resolve(s.end(o.depth)),o.depth)),a=!0}let c=bu(l,n,e,o);return c?(r&&r(Pp(t.tr,o,c,a,n).scrollIntoView()),!0):!1}}function Pp(n,e,t,r,i){let s=w.empty;for(let u=t.length-1;u>=0;u--)s=w.from(t[u].type.create(t[u].attrs,s));n.step(new pe(e.start-(r?2:0),e.end,e.start,e.end,new T(s,0,0),t.length,!0));let o=0;for(let u=0;u<t.length;u++)t[u].type==i&&(o=u+1);let a=t.length-o,l=e.start+t.length-(r?2:0),c=e.parent;for(let u=e.startIndex,d=e.endIndex,f=!0;u<d;u++,f=!1)!f&&zn(n.doc,l,a)&&(n.split(l,a),l+=2*a),l+=c.child(u).nodeSize;return n}function Lp(n){return function(e,t){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,o=>o.childCount>0&&o.firstChild.type==n);return s?t?r.node(s.depth-1).type==n?$p(e,t,n,s):zp(e,t,s):!0:!1}}function $p(n,e,t,r){let i=n.tr,s=r.end,o=r.$to.end(r.depth);return s<o&&(i.step(new pe(s-1,o,s,o,new T(w.from(t.create(null,r.parent.copy())),1,0),1,!0)),r=new pi(i.doc.resolve(r.$from.pos),i.doc.resolve(o),r.depth)),e(i.lift(r,rr(r)).scrollIntoView()),!0}function zp(n,e,t){let r=n.tr,i=t.parent;for(let h=t.end,p=t.endIndex-1,m=t.startIndex;p>m;p--)h-=i.child(p).nodeSize,r.delete(h-1,h+1);let s=r.doc.resolve(t.start),o=s.nodeAfter;if(r.mapping.map(t.end)!=t.start+s.nodeAfter.nodeSize)return!1;let a=t.startIndex==0,l=t.endIndex==i.childCount,c=s.node(-1),u=s.index(-1);if(!c.canReplace(u+(a?0:1),u+1,o.content.append(l?w.empty:w.from(i))))return!1;let d=s.pos,f=d+o.nodeSize;return r.step(new pe(d-(a?1:0),f+(l?1:0),d+1,f-1,new T((a?w.empty:w.from(i.copy(w.empty))).append(l?w.empty:w.from(i.copy(w.empty))),a?0:1,l?0:1),a?0:1)),e(r.scrollIntoView()),!0}function Vp(n){return function(e,t){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,c=>c.childCount>0&&c.firstChild.type==n);if(!s)return!1;let o=s.startIndex;if(o==0)return!1;let a=s.parent,l=a.child(o-1);if(l.type!=n)return!1;if(t){let c=l.lastChild&&l.lastChild.type==a.type,u=w.from(c?n.create():null),d=new T(w.from(n.create(null,w.from(a.type.create(null,u)))),c?3:1,0),f=s.start,h=s.end;t(e.tr.step(new pe(f-(c?3:1),h,f,h,d,1,!0)).scrollIntoView())}return!0}}function ss(n){const{state:e,transaction:t}=n;let{selection:r}=t,{doc:i}=t,{storedMarks:s}=t;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),filterTransaction:e.filterTransaction,plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return r},get doc(){return i},get tr(){return r=t.selection,i=t.doc,s=t.storedMarks,t}}}class as{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:r}=this,{view:i}=t,{tr:s}=r,o=this.buildProps(s);return Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...u)=>{const d=l(...u)(o);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(s),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i,a=[],l=!!e,c=e||s.tr,u=()=>(!l&&t&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(c),a.every(f=>f===!0)),d={...Object.fromEntries(Object.entries(r).map(([f,h])=>[f,(...m)=>{const y=this.buildProps(c,t),b=h(...m)(y);return a.push(b),d}])),run:u};return d}createCan(e){const{rawCommands:t,state:r}=this,i=void 0,s=e||r.tr,o=this.buildProps(s,i);return{...Object.fromEntries(Object.entries(t).map(([l,c])=>[l,(...u)=>c(...u)({...o,dispatch:i})])),chain:()=>this.createChain(s,i)}}buildProps(e,t=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i;s.storedMarks&&e.setStoredMarks(s.storedMarks);const a={tr:e,editor:i,view:o,state:ss({state:s,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([l,c])=>[l,(...u)=>c(...u)(a)]))}};return a}}class jp{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e,...t){const r=this.callbacks[e];return r&&r.forEach(i=>i.apply(this,t)),this}off(e,t){const r=this.callbacks[e];return r&&(t?this.callbacks[e]=r.filter(i=>i!==t):delete this.callbacks[e]),this}removeAllListeners(){this.callbacks={}}}function M(n,e,t){return n.config[e]===void 0&&n.parent?M(n.parent,e,t):typeof n.config[e]=="function"?n.config[e].bind({...t,parent:n.parent?M(n.parent,e,t):null}):n.config[e]}function ls(n){const e=n.filter(i=>i.type==="extension"),t=n.filter(i=>i.type==="node"),r=n.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:t,markExtensions:r}}function cc(n){const e=[],{nodeExtensions:t,markExtensions:r}=ls(n),i=[...t,...r],s={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return n.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage},l=M(o,"addGlobalAttributes",a);if(!l)return;l().forEach(u=>{u.types.forEach(d=>{Object.entries(u.attributes).forEach(([f,h])=>{e.push({type:d,name:f,attribute:{...s,...h}})})})})}),i.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage},l=M(o,"addAttributes",a);if(!l)return;const c=l();Object.entries(c).forEach(([u,d])=>{const f={...s,...d};d.isRequired&&d.default===void 0&&delete f.default,e.push({type:o.name,name:u,attribute:f})})}),e}function me(n,e){if(typeof n=="string"){if(!e.nodes[n])throw Error(`There is no node type named '${n}'. Maybe you forgot to add the extension?`);return e.nodes[n]}return n}function $o(...n){return n.filter(e=>!!e).reduce((e,t)=>{const r={...e};return Object.entries(t).forEach(([i,s])=>{if(!r[i]){r[i]=s;return}i==="class"?r[i]=[r[i],s].join(" "):i==="style"?r[i]=[r[i],s].join("; "):r[i]=s}),r},{})}function fo(n,e){return e.filter(t=>t.attribute.rendered).map(t=>t.attribute.renderHTML?t.attribute.renderHTML(n.attrs)||{}:{[t.name]:n.attrs[t.name]}).reduce((t,r)=>$o(t,r),{})}function dc(n){return typeof n=="function"}function H(n,e=void 0,...t){return dc(n)?e?n.bind(e)(...t):n(...t):n}function Hp(n={}){return Object.keys(n).length===0&&n.constructor===Object}function qp(n){return typeof n!="string"?n:n.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(n):n==="true"?!0:n==="false"?!1:n}function cl(n,e){return n.style?n:{...n,getAttrs:t=>{const r=n.getAttrs?n.getAttrs(t):n.attrs;if(r===!1)return!1;const i=e.reduce((s,o)=>{const a=o.attribute.parseHTML?o.attribute.parseHTML(t):qp(t.getAttribute(o.name));return a==null?s:{...s,[o.name]:a}},{});return{...r,...i}}}}function dl(n){return Object.fromEntries(Object.entries(n).filter(([e,t])=>e==="attrs"&&Hp(t)?!1:t!=null))}function Wp(n){var e;const t=cc(n),{nodeExtensions:r,markExtensions:i}=ls(n),s=(e=r.find(l=>M(l,"topNode")))===null||e===void 0?void 0:e.name,o=Object.fromEntries(r.map(l=>{const c=t.filter(y=>y.type===l.name),u={name:l.name,options:l.options,storage:l.storage},d=n.reduce((y,b)=>{const k=M(b,"extendNodeSchema",u);return{...y,...k?k(l):{}}},{}),f=dl({...d,content:H(M(l,"content",u)),marks:H(M(l,"marks",u)),group:H(M(l,"group",u)),inline:H(M(l,"inline",u)),atom:H(M(l,"atom",u)),selectable:H(M(l,"selectable",u)),draggable:H(M(l,"draggable",u)),code:H(M(l,"code",u)),defining:H(M(l,"defining",u)),isolating:H(M(l,"isolating",u)),attrs:Object.fromEntries(c.map(y=>{var b;return[y.name,{default:(b=y==null?void 0:y.attribute)===null||b===void 0?void 0:b.default}]}))}),h=H(M(l,"parseHTML",u));h&&(f.parseDOM=h.map(y=>cl(y,c)));const p=M(l,"renderHTML",u);p&&(f.toDOM=y=>p({node:y,HTMLAttributes:fo(y,c)}));const m=M(l,"renderText",u);return m&&(f.toText=m),[l.name,f]})),a=Object.fromEntries(i.map(l=>{const c=t.filter(m=>m.type===l.name),u={name:l.name,options:l.options,storage:l.storage},d=n.reduce((m,y)=>{const b=M(y,"extendMarkSchema",u);return{...m,...b?b(l):{}}},{}),f=dl({...d,inclusive:H(M(l,"inclusive",u)),excludes:H(M(l,"excludes",u)),group:H(M(l,"group",u)),spanning:H(M(l,"spanning",u)),code:H(M(l,"code",u)),attrs:Object.fromEntries(c.map(m=>{var y;return[m.name,{default:(y=m==null?void 0:m.attribute)===null||y===void 0?void 0:y.default}]}))}),h=H(M(l,"parseHTML",u));h&&(f.parseDOM=h.map(m=>cl(m,c)));const p=M(l,"renderHTML",u);return p&&(f.toDOM=m=>p({mark:m,HTMLAttributes:fo(m,c)})),[l.name,f]}));return new uf({topNode:s,nodes:o,marks:a})}function zs(n,e){return e.nodes[n]||e.marks[n]||null}function fl(n,e){return Array.isArray(e)?e.some(t=>(typeof t=="string"?t:t.name)===n.name):e}const Up=(n,e=500)=>{let t="";return n.parent.nodesBetween(Math.max(0,n.parentOffset-e),n.parentOffset,(r,i,s,o)=>{var a,l,c;t+=((l=(a=r.type.spec).toText)===null||l===void 0?void 0:l.call(a,{node:r,pos:i,parent:s,index:o}))||((c=n.nodeBefore)===null||c===void 0?void 0:c.text)||"%leaf%"}),t};function zo(n){return Object.prototype.toString.call(n)==="[object RegExp]"}class Kp{constructor(e){this.find=e.find,this.handler=e.handler}}const Jp=(n,e)=>{if(zo(e))return e.exec(n);const t=e(n);if(!t)return null;const r=[];return r.push(t.text),r.index=t.index,r.input=n,r.data=t.data,t.replaceWith&&(t.text.includes(t.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(t.replaceWith)),r};function Vs(n){var e;const{editor:t,from:r,to:i,text:s,rules:o,plugin:a}=n,{view:l}=t;if(l.composing)return!1;const c=l.state.doc.resolve(r);if(c.parent.type.spec.code||!!(!((e=c.nodeBefore||c.nodeAfter)===null||e===void 0)&&e.marks.find(f=>f.type.spec.code)))return!1;let u=!1;const d=Up(c)+s;return o.forEach(f=>{if(u)return;const h=Jp(d,f.find);if(!h)return;const p=l.state.tr,m=ss({state:l.state,transaction:p}),y={from:r-(h[0].length-s.length),to:i},{commands:b,chain:k,can:O}=new as({editor:t,state:m});f.handler({state:m,range:y,match:h,commands:b,chain:k,can:O})===null||!p.steps.length||(p.setMeta(a,{transform:p,from:r,to:i,text:s}),l.dispatch(p),u=!0)}),u}function Gp(n){const{editor:e,rules:t}=n,r=new je({state:{init(){return null},apply(i,s){const o=i.getMeta(r);return o||(i.selectionSet||i.docChanged?null:s)}},props:{handleTextInput(i,s,o,a){return Vs({editor:e,from:s,to:o,text:a,rules:t,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:s}=i.state.selection;s&&Vs({editor:e,from:s.pos,to:s.pos,text:"",rules:t,plugin:r})}),!1)},handleKeyDown(i,s){if(s.key!=="Enter")return!1;const{$cursor:o}=i.state.selection;return o?Vs({editor:e,from:o.pos,to:o.pos,text:`
`,rules:t,plugin:r}):!1}},isInputRules:!0});return r}function Yp(n){return typeof n=="number"}class Xp{constructor(e){this.find=e.find,this.handler=e.handler}}const Qp=(n,e)=>{if(zo(e))return[...n.matchAll(e)];const t=e(n);return t?t.map(r=>{const i=[];return i.push(r.text),i.index=r.index,i.input=n,i.data=r.data,r.replaceWith&&(r.text.includes(r.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),i.push(r.replaceWith)),i}):[]};function Zp(n){const{editor:e,state:t,from:r,to:i,rule:s}=n,{commands:o,chain:a,can:l}=new as({editor:e,state:t}),c=[];return t.doc.nodesBetween(r,i,(d,f)=>{if(!d.isTextblock||d.type.spec.code)return;const h=Math.max(r,f),p=Math.min(i,f+d.content.size),m=d.textBetween(h-f,p-f,void 0,"\uFFFC");Qp(m,s.find).forEach(b=>{if(b.index===void 0)return;const k=h+b.index+1,O=k+b[0].length,g={from:t.tr.mapping.map(k),to:t.tr.mapping.map(O)},_=s.handler({state:t,range:g,match:b,commands:o,chain:a,can:l});c.push(_)})}),c.every(d=>d!==null)}function em(n){const{editor:e,rules:t}=n;let r=null,i=!1,s=!1;return t.map(a=>new je({view(l){const c=u=>{var d;r=!((d=l.dom.parentElement)===null||d===void 0)&&d.contains(u.target)?l.dom.parentElement:null};return window.addEventListener("dragstart",c),{destroy(){window.removeEventListener("dragstart",c)}}},props:{handleDOMEvents:{drop:l=>(s=r===l.dom.parentElement,!1),paste:(l,c)=>{var u;const d=(u=c.clipboardData)===null||u===void 0?void 0:u.getData("text/html");return i=!!(d!=null&&d.includes("data-pm-slice")),!1}}},appendTransaction:(l,c,u)=>{const d=l[0],f=d.getMeta("uiEvent")==="paste"&&!i,h=d.getMeta("uiEvent")==="drop"&&!s;if(!f&&!h)return;const p=c.doc.content.findDiffStart(u.doc.content),m=c.doc.content.findDiffEnd(u.doc.content);if(!Yp(p)||!m||p===m.b)return;const y=u.tr,b=ss({state:u,transaction:y});if(!(!Zp({editor:e,state:b,from:Math.max(p-1,0),to:m.b,rule:a})||!y.steps.length))return y}}))}function tm(n){const e=n.filter((t,r)=>n.indexOf(t)!==r);return[...new Set(e)]}class Nn{constructor(e,t){this.splittableMarks=[],this.editor=t,this.extensions=Nn.resolve(e),this.schema=Wp(this.extensions),this.extensions.forEach(r=>{var i;this.editor.extensionStorage[r.name]=r.storage;const s={name:r.name,options:r.options,storage:r.storage,editor:this.editor,type:zs(r.name,this.schema)};r.type==="mark"&&((i=H(M(r,"keepOnSplit",s)))!==null&&i!==void 0?i:!0)&&this.splittableMarks.push(r.name);const o=M(r,"onBeforeCreate",s);o&&this.editor.on("beforeCreate",o);const a=M(r,"onCreate",s);a&&this.editor.on("create",a);const l=M(r,"onUpdate",s);l&&this.editor.on("update",l);const c=M(r,"onSelectionUpdate",s);c&&this.editor.on("selectionUpdate",c);const u=M(r,"onTransaction",s);u&&this.editor.on("transaction",u);const d=M(r,"onFocus",s);d&&this.editor.on("focus",d);const f=M(r,"onBlur",s);f&&this.editor.on("blur",f);const h=M(r,"onDestroy",s);h&&this.editor.on("destroy",h)})}static resolve(e){const t=Nn.sort(Nn.flatten(e)),r=tm(t.map(i=>i.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(i=>`'${i}'`).join(", ")}]. This can lead to issues.`),t}static flatten(e){return e.map(t=>{const r={name:t.name,options:t.options,storage:t.storage},i=M(t,"addExtensions",r);return i?[t,...this.flatten(i())]:t}).flat(10)}static sort(e){return e.sort((r,i)=>{const s=M(r,"priority")||100,o=M(i,"priority")||100;return s>o?-1:s<o?1:0})}get commands(){return this.extensions.reduce((e,t)=>{const r={name:t.name,options:t.options,storage:t.storage,editor:this.editor,type:zs(t.name,this.schema)},i=M(t,"addCommands",r);return i?{...e,...i()}:e},{})}get plugins(){const{editor:e}=this,t=Nn.sort([...this.extensions].reverse()),r=[],i=[],s=t.map(o=>{const a={name:o.name,options:o.options,storage:o.storage,editor:e,type:zs(o.name,this.schema)},l=[],c=M(o,"addKeyboardShortcuts",a);if(c){const h=Object.fromEntries(Object.entries(c()).map(([m,y])=>[m,()=>y({editor:e})])),p=bp(h);l.push(p)}const u=M(o,"addInputRules",a);fl(o,e.options.enableInputRules)&&u&&r.push(...u());const d=M(o,"addPasteRules",a);fl(o,e.options.enablePasteRules)&&d&&i.push(...d());const f=M(o,"addProseMirrorPlugins",a);if(f){const h=f();l.push(...h)}return l}).flat();return[Gp({editor:e,rules:r}),...em({editor:e,rules:i}),...s]}get attributes(){return cc(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:t}=ls(this.extensions);return Object.fromEntries(t.filter(r=>!!M(r,"addNodeView")).map(r=>{const i=this.attributes.filter(l=>l.type===r.name),s={name:r.name,options:r.options,storage:r.storage,editor:e,type:me(r.name,this.schema)},o=M(r,"addNodeView",s);if(!o)return[];const a=(l,c,u,d)=>{const f=fo(l,i);return o()({editor:e,node:l,getPos:u,decorations:d,HTMLAttributes:f,extension:r})};return[r.name,a]}))}}function nm(n){return Object.prototype.toString.call(n).slice(8,-1)}function js(n){return nm(n)!=="Object"?!1:n.constructor===Object&&Object.getPrototypeOf(n)===Object.prototype}function us(n,e){const t={...n};return js(n)&&js(e)&&Object.keys(e).forEach(r=>{js(e[r])?r in n?t[r]=us(n[r],e[r]):Object.assign(t,{[r]:e[r]}):Object.assign(t,{[r]:e[r]})}),t}class rt{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=H(M(this,"addOptions",{name:this.name}))),this.storage=H(M(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new rt(e)}configure(e={}){const t=this.extend();return t.options=us(this.options,e),t.storage=H(M(t,"addStorage",{name:t.name,options:t.options})),t}extend(e={}){const t=new rt(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=H(M(t,"addOptions",{name:t.name})),t.storage=H(M(t,"addStorage",{name:t.name,options:t.options})),t}}function fc(n,e,t){const{from:r,to:i}=e,{blockSeparator:s=`

`,textSerializers:o={}}=t||{};let a="",l=!0;return n.nodesBetween(r,i,(c,u,d,f)=>{var h;const p=o==null?void 0:o[c.type.name];p?(c.isBlock&&!l&&(a+=s,l=!0),d&&(a+=p({node:c,pos:u,parent:d,index:f,range:e}))):c.isText?(a+=(h=c==null?void 0:c.text)===null||h===void 0?void 0:h.slice(Math.max(r,u)-u,i-u),l=!1):c.isBlock&&!l&&(a+=s,l=!0)}),a}function hc(n){return Object.fromEntries(Object.entries(n.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}const rm=rt.create({name:"clipboardTextSerializer",addProseMirrorPlugins(){return[new je({key:new vt("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:n}=this,{state:e,schema:t}=n,{doc:r,selection:i}=e,{ranges:s}=i,o=Math.min(...s.map(u=>u.$from.pos)),a=Math.max(...s.map(u=>u.$to.pos)),l=hc(t);return fc(r,{from:o,to:a},{textSerializers:l})}}})]}}),im=()=>({editor:n,view:e})=>(requestAnimationFrame(()=>{var t;n.isDestroyed||(e.dom.blur(),(t=window==null?void 0:window.getSelection())===null||t===void 0||t.removeAllRanges())}),!0),sm=(n=!1)=>({commands:e})=>e.setContent("",n),om=()=>({state:n,tr:e,dispatch:t})=>{const{selection:r}=e,{ranges:i}=r;return t&&i.forEach(({$from:s,$to:o})=>{n.doc.nodesBetween(s.pos,o.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:u}=e,d=c.resolve(u.map(l)),f=c.resolve(u.map(l+a.nodeSize)),h=d.blockRange(f);if(!h)return;const p=rr(h);if(a.type.isTextblock){const{defaultType:m}=d.parent.contentMatchAt(d.index());e.setNodeMarkup(h.start,m)}(p||p===0)&&e.lift(h,p)})}),!0},am=n=>e=>n(e),lm=()=>({state:n,dispatch:e})=>Tp(n,e),um=n=>({tr:e,state:t,dispatch:r})=>{const i=me(n,t.schema),s=e.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===i){if(r){const l=s.before(o),c=s.after(o);e.delete(l,c).scrollIntoView()}return!0}return!1},cm=n=>({tr:e,dispatch:t})=>{const{from:r,to:i}=n;return t&&e.delete(r,i),!0},dm=()=>({state:n,dispatch:e})=>xp(n,e),fm=()=>({commands:n})=>n.keyboardShortcut("Enter"),hm=()=>({state:n,dispatch:e})=>Op(n,e);function wi(n,e,t={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>t.strict?e[i]===n[i]:zo(e[i])?e[i].test(n[i]):e[i]===n[i]):!0}function ho(n,e,t={}){return n.find(r=>r.type===e&&wi(r.attrs,t))}function pm(n,e,t={}){return!!ho(n,e,t)}function Vo(n,e,t={}){if(!n||!e)return;let r=n.parent.childAfter(n.parentOffset);if(n.parentOffset===r.offset&&r.offset!==0&&(r=n.parent.childBefore(n.parentOffset)),!r.node)return;const i=ho([...r.node.marks],e,t);if(!i)return;let s=r.index,o=n.start()+r.offset,a=s+1,l=o+r.node.nodeSize;for(ho([...r.node.marks],e,t);s>0&&i.isInSet(n.parent.child(s-1).marks);)s-=1,o-=n.parent.child(s).nodeSize;for(;a<n.parent.childCount&&pm([...n.parent.child(a).marks],e,t);)l+=n.parent.child(a).nodeSize,a+=1;return{from:o,to:l}}function Ut(n,e){if(typeof n=="string"){if(!e.marks[n])throw Error(`There is no mark type named '${n}'. Maybe you forgot to add the extension?`);return e.marks[n]}return n}const mm=(n,e={})=>({tr:t,state:r,dispatch:i})=>{const s=Ut(n,r.schema),{doc:o,selection:a}=t,{$from:l,from:c,to:u}=a;if(i){const d=Vo(l,s,e);if(d&&d.from<=c&&d.to>=u){const f=q.create(o,d.from,d.to);t.setSelection(f)}}return!0},gm=n=>e=>{const t=typeof n=="function"?n(e):n;for(let r=0;r<t.length;r+=1)if(t[r](e))return!0;return!1};function vm(n){var e;return((e=n.constructor)===null||e===void 0?void 0:e.toString().substring(0,5))==="class"}function pc(n){return n&&typeof n=="object"&&!Array.isArray(n)&&!vm(n)}function mc(n){return pc(n)&&n instanceof q}function Et(n=0,e=0,t=0){return Math.min(Math.max(n,e),t)}function gc(n,e=null){if(!e)return null;const t=j.atStart(n),r=j.atEnd(n);if(e==="start"||e===!0)return t;if(e==="end")return r;const i=t.from,s=r.to;return e==="all"?q.create(n,Et(0,i,s),Et(n.content.size,i,s)):q.create(n,Et(e,i,s),Et(e,i,s))}function jo(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const ym=(n=null,e={})=>({editor:t,view:r,tr:i,dispatch:s})=>{e={scrollIntoView:!0,...e};const o=()=>{jo()&&r.dom.focus(),requestAnimationFrame(()=>{t.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&t.commands.scrollIntoView())})};if(r.hasFocus()&&n===null||n===!1)return!0;if(s&&n===null&&!mc(t.state.selection))return o(),!0;const a=gc(i.doc,n)||t.state.selection,l=t.state.selection.eq(a);return s&&(l||i.setSelection(a),l&&i.storedMarks&&i.setStoredMarks(i.storedMarks),o()),!0},bm=(n,e)=>t=>n.every((r,i)=>e(r,{...t,index:i})),Dm=(n,e)=>({tr:t,commands:r})=>r.insertContentAt({from:t.selection.from,to:t.selection.to},n,e);function hl(n){const e=`<body>${n}</body>`;return new window.DOMParser().parseFromString(e,"text/html").body}function Ci(n,e,t){if(t={slice:!0,parseOptions:{},...t},typeof n=="object"&&n!==null)try{return Array.isArray(n)?w.fromArray(n.map(r=>e.nodeFromJSON(r))):e.nodeFromJSON(n)}catch(r){return console.warn("[tiptap warn]: Invalid content.","Passed value:",n,"Error:",r),Ci("",e,t)}if(typeof n=="string"){const r=Wn.fromSchema(e);return t.slice?r.parseSlice(hl(n),t.parseOptions).content:r.parse(hl(n),t.parseOptions)}return Ci("",e,t)}function xm(n,e,t){const r=n.steps.length-1;if(r<e)return;const i=n.steps[r];if(!(i instanceof ke||i instanceof pe))return;const s=n.mapping.maps[r];let o=0;s.forEach((a,l,c,u)=>{o===0&&(o=u)}),n.setSelection(j.near(n.doc.resolve(o),t))}const km=n=>n.toString().startsWith("<"),wm=(n,e,t)=>({tr:r,dispatch:i,editor:s})=>{if(i){t={parseOptions:{},updateSelection:!0,...t};const o=Ci(e,s.schema,{parseOptions:{preserveWhitespace:"full",...t.parseOptions}});if(o.toString()==="<>")return!0;let{from:a,to:l}=typeof n=="number"?{from:n,to:n}:n,c=!0,u=!0;if((km(o)?o:[o]).forEach(f=>{f.check(),c=c?f.isText&&f.marks.length===0:!1,u=u?f.isBlock:!1}),a===l&&u){const{parent:f}=r.doc.resolve(a);f.isTextblock&&!f.type.spec.code&&!f.childCount&&(a-=1,l+=1)}c?r.insertText(e,a,l):r.replaceWith(a,l,o),t.updateSelection&&xm(r,r.steps.length-1,-1)}return!0},Cm=()=>({state:n,dispatch:e})=>kp(n,e),Em=()=>({state:n,dispatch:e})=>Cp(n,e);function vc(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function Sm(n){const e=n.split(/-(?!$)/);let t=e[e.length-1];t==="Space"&&(t=" ");let r,i,s,o;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))jo()||vc()?o=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(t=`Alt-${t}`),i&&(t=`Ctrl-${t}`),o&&(t=`Meta-${t}`),s&&(t=`Shift-${t}`),t}const Am=n=>({editor:e,view:t,tr:r,dispatch:i})=>{const s=Sm(n).split(/-(?!$)/),o=s.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{t.someProp("handleKeyDown",c=>c(t,a))});return l==null||l.steps.forEach(c=>{const u=c.map(r.mapping);u&&i&&r.maybeStep(u)}),!0};function Pr(n,e,t={}){const{from:r,to:i,empty:s}=n.selection,o=e?me(e,n.schema):null,a=[];n.doc.nodesBetween(r,i,(d,f)=>{if(d.isText)return;const h=Math.max(r,f),p=Math.min(i,f+d.nodeSize);a.push({node:d,from:h,to:p})});const l=i-r,c=a.filter(d=>o?o.name===d.node.type.name:!0).filter(d=>wi(d.node.attrs,t,{strict:!1}));return s?!!c.length:c.reduce((d,f)=>d+f.to-f.from,0)>=l}const Om=(n,e={})=>({state:t,dispatch:r})=>{const i=me(n,t.schema);return Pr(t,i,e)?Sp(t,r):!1},Tm=()=>({state:n,dispatch:e})=>Mp(n,e),Mm=n=>({state:e,dispatch:t})=>{const r=me(n,e.schema);return Lp(r)(e,t)},_m=()=>({state:n,dispatch:e})=>Ap(n,e);function cs(n,e){return e.nodes[n]?"node":e.marks[n]?"mark":null}function pl(n,e){const t=typeof e=="string"?[e]:e;return Object.keys(n).reduce((r,i)=>(t.includes(i)||(r[i]=n[i]),r),{})}const Fm=(n,e)=>({tr:t,state:r,dispatch:i})=>{let s=null,o=null;const a=cs(typeof n=="string"?n:n.name,r.schema);return a?(a==="node"&&(s=me(n,r.schema)),a==="mark"&&(o=Ut(n,r.schema)),i&&t.selection.ranges.forEach(l=>{r.doc.nodesBetween(l.$from.pos,l.$to.pos,(c,u)=>{s&&s===c.type&&t.setNodeMarkup(u,void 0,pl(c.attrs,e)),o&&c.marks.length&&c.marks.forEach(d=>{o===d.type&&t.addMark(u,u+c.nodeSize,o.create(pl(d.attrs,e)))})})}),!0):!1},Nm=()=>({tr:n,dispatch:e})=>(e&&n.scrollIntoView(),!0),Bm=()=>({tr:n,commands:e})=>e.setTextSelection({from:0,to:n.doc.content.size}),Rm=()=>({state:n,dispatch:e})=>wp(n,e),Im=()=>({state:n,dispatch:e})=>Ep(n,e),Pm=()=>({state:n,dispatch:e})=>_p(n,e),Lm=()=>({state:n,dispatch:e})=>Bp(n,e),$m=()=>({state:n,dispatch:e})=>Np(n,e);function yc(n,e,t={}){return Ci(n,e,{slice:!1,parseOptions:t})}const zm=(n,e=!1,t={})=>({tr:r,editor:i,dispatch:s})=>{const{doc:o}=r,a=yc(n,i.schema,t);return s&&r.replaceWith(0,o.content.size,a).setMeta("preventUpdate",!e),!0};function bc(n,e){const t=Ut(e,n.schema),{from:r,to:i,empty:s}=n.selection,o=[];s?(n.storedMarks&&o.push(...n.storedMarks),o.push(...n.selection.$head.marks())):n.doc.nodesBetween(r,i,l=>{o.push(...l.marks)});const a=o.find(l=>l.type.name===t.name);return a?{...a.attrs}:{}}const Vm=(n,e={})=>({tr:t,state:r,dispatch:i})=>{const{selection:s}=t,{empty:o,ranges:a}=s,l=Ut(n,r.schema);if(i)if(o){const c=bc(r,l);t.addStoredMark(l.create({...c,...e}))}else a.forEach(c=>{const u=c.$from.pos,d=c.$to.pos;r.doc.nodesBetween(u,d,(f,h)=>{const p=Math.max(h,u),m=Math.min(h+f.nodeSize,d);f.marks.find(b=>b.type===l)?f.marks.forEach(b=>{l===b.type&&t.addMark(p,m,l.create({...b.attrs,...e}))}):t.addMark(p,m,l.create(e))})});return!0},jm=(n,e)=>({tr:t})=>(t.setMeta(n,e),!0),Hm=(n,e={})=>({state:t,dispatch:r,chain:i})=>{const s=me(n,t.schema);return s.isTextblock?i().command(({commands:o})=>ul(s,e)(t)?!0:o.clearNodes()).command(({state:o})=>ul(s,e)(o,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},qm=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,i=j.atStart(r).from,s=j.atEnd(r).to,o=Et(n,i,s),a=P.create(r,o);e.setSelection(a)}return!0},Wm=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,{from:i,to:s}=typeof n=="number"?{from:n,to:n}:n,o=q.atStart(r).from,a=q.atEnd(r).to,l=Et(i,o,a),c=Et(s,o,a),u=q.create(r,l,c);e.setSelection(u)}return!0},Um=n=>({state:e,dispatch:t})=>{const r=me(n,e.schema);return Vp(r)(e,t)};function ui(n,e,t){return Object.fromEntries(Object.entries(t).filter(([r])=>{const i=n.find(s=>s.type===e&&s.name===r);return i?i.attribute.keepOnSplit:!1}))}function Km(n){for(let e=0;e<n.edgeCount;e+=1){const{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}function ml(n,e){const t=n.storedMarks||n.selection.$to.parentOffset&&n.selection.$from.marks();if(t){const r=t.filter(i=>e==null?void 0:e.includes(i.type.name));n.tr.ensureMarks(r)}}const Jm=({keepMarks:n=!0}={})=>({tr:e,state:t,dispatch:r,editor:i})=>{const{selection:s,doc:o}=e,{$from:a,$to:l}=s,c=i.extensionManager.attributes,u=ui(c,a.node().type.name,a.node().attrs);if(s instanceof P&&s.node.isBlock)return!a.parentOffset||!zn(o,a.pos)?!1:(r&&(n&&ml(t,i.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;if(r){const d=l.parentOffset===l.parent.content.size;s instanceof q&&e.deleteSelection();const f=a.depth===0?void 0:Km(a.node(-1).contentMatchAt(a.indexAfter(-1)));let h=d&&f?[{type:f,attrs:u}]:void 0,p=zn(e.doc,e.mapping.map(a.pos),1,h);if(!h&&!p&&zn(e.doc,e.mapping.map(a.pos),1,f?[{type:f}]:void 0)&&(p=!0,h=f?[{type:f,attrs:u}]:void 0),p&&(e.split(e.mapping.map(a.pos),1,h),f&&!d&&!a.parentOffset&&a.parent.type!==f)){const m=e.mapping.map(a.before()),y=e.doc.resolve(m);a.node(-1).canReplaceWith(y.index(),y.index()+1,f)&&e.setNodeMarkup(e.mapping.map(a.before()),f)}n&&ml(t,i.extensionManager.splittableMarks),e.scrollIntoView()}return!0},Gm=n=>({tr:e,state:t,dispatch:r,editor:i})=>{var s;const o=me(n,t.schema),{$from:a,$to:l}=t.selection,c=t.selection.node;if(c&&c.isBlock||a.depth<2||!a.sameParent(l))return!1;const u=a.node(-1);if(u.type!==o)return!1;const d=i.extensionManager.attributes;if(a.parent.content.size===0&&a.node(-1).childCount===a.indexAfter(-1)){if(a.depth===2||a.node(-3).type!==o||a.index(-2)!==a.node(-2).childCount-1)return!1;if(r){let y=w.empty;const b=a.index(-1)?1:a.index(-2)?2:3;for(let N=a.depth-b;N>=a.depth-3;N-=1)y=w.from(a.node(N).copy(y));const k=a.indexAfter(-1)<a.node(-2).childCount?1:a.indexAfter(-2)<a.node(-3).childCount?2:3,O=ui(d,a.node().type.name,a.node().attrs),g=((s=o.contentMatch.defaultType)===null||s===void 0?void 0:s.createAndFill(O))||void 0;y=y.append(w.from(o.createAndFill(null,g)||void 0));const _=a.before(a.depth-(b-1));e.replace(_,a.after(-k),new T(y,4-b,0));let A=-1;e.doc.nodesBetween(_,e.doc.content.size,(N,S)=>{if(A>-1)return!1;N.isTextblock&&N.content.size===0&&(A=S+1)}),A>-1&&e.setSelection(q.near(e.doc.resolve(A))),e.scrollIntoView()}return!0}const f=l.pos===a.end()?u.contentMatchAt(0).defaultType:null,h=ui(d,u.type.name,u.attrs),p=ui(d,a.node().type.name,a.node().attrs);e.delete(a.pos,l.pos);const m=f?[{type:o,attrs:h},{type:f,attrs:p}]:[{type:o,attrs:h}];return zn(e.doc,a.pos,2)?(r&&e.split(a.pos,2,m).scrollIntoView(),!0):!1};function Ym(n,e){for(let t=n.depth;t>0;t-=1){const r=n.node(t);if(e(r))return{pos:t>0?n.before(t):0,start:n.start(t),depth:t,node:r}}}function Ho(n){return e=>Ym(e.$from,n)}function gl(n,e){const{nodeExtensions:t}=ls(e),r=t.find(o=>o.name===n);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},s=H(M(r,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}const vl=(n,e)=>{const t=Ho(o=>o.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(Math.max(0,t.pos-1)).before(t.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return t.node.type===(i==null?void 0:i.type)&&es(n.doc,t.pos)&&n.join(t.pos),!0},yl=(n,e)=>{const t=Ho(o=>o.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(t.start).after(t.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return t.node.type===(i==null?void 0:i.type)&&es(n.doc,r)&&n.join(r),!0},Xm=(n,e)=>({editor:t,tr:r,state:i,dispatch:s,chain:o,commands:a,can:l})=>{const{extensions:c}=t.extensionManager,u=me(n,i.schema),d=me(e,i.schema),{selection:f}=i,{$from:h,$to:p}=f,m=h.blockRange(p);if(!m)return!1;const y=Ho(b=>gl(b.type.name,c))(f);if(m.depth>=1&&y&&m.depth-y.depth<=1){if(y.node.type===u)return a.liftListItem(d);if(gl(y.node.type.name,c)&&u.validContent(y.node.content)&&s)return o().command(()=>(r.setNodeMarkup(y.pos,u),!0)).command(()=>vl(r,u)).command(()=>yl(r,u)).run()}return o().command(()=>l().wrapInList(u)?!0:a.clearNodes()).wrapInList(u).command(()=>vl(r,u)).command(()=>yl(r,u)).run()};function po(n,e,t={}){const{empty:r,ranges:i}=n.selection,s=e?Ut(e,n.schema):null;if(r)return!!(n.storedMarks||n.selection.$from.marks()).filter(d=>s?s.name===d.type.name:!0).find(d=>wi(d.attrs,t,{strict:!1}));let o=0;const a=[];if(i.forEach(({$from:d,$to:f})=>{const h=d.pos,p=f.pos;n.doc.nodesBetween(h,p,(m,y)=>{if(!m.isText&&!m.marks.length)return;const b=Math.max(h,y),k=Math.min(p,y+m.nodeSize);o+=k-b,a.push(...m.marks.map(g=>({mark:g,from:b,to:k})))})}),o===0)return!1;const l=a.filter(d=>s?s.name===d.mark.type.name:!0).filter(d=>wi(d.mark.attrs,t,{strict:!1})).reduce((d,f)=>d+f.to-f.from,0),c=a.filter(d=>s?d.mark.type!==s&&d.mark.type.excludes(s):!0).reduce((d,f)=>d+f.to-f.from,0);return(l>0?l+c:l)>=o}const Qm=(n,e={},t={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:s=!1}=t,o=Ut(n,r.schema);return po(r,o,e)?i.unsetMark(o,{extendEmptyMarkRange:s}):i.setMark(o,e)},Zm=(n,e,t={})=>({state:r,commands:i})=>{const s=me(n,r.schema),o=me(e,r.schema);return Pr(r,s,t)?i.setNode(o):i.setNode(s,t)},eg=(n,e={})=>({state:t,commands:r})=>{const i=me(n,t.schema);return Pr(t,i,e)?r.lift(i):r.wrapIn(i,e)},tg=()=>({state:n,dispatch:e})=>{const t=n.plugins;for(let r=0;r<t.length;r+=1){const i=t[r];let s;if(i.spec.isInputRules&&(s=i.getState(n))){if(e){const o=n.tr,a=s.transform;for(let l=a.steps.length-1;l>=0;l-=1)o.step(a.steps[l].invert(a.docs[l]));if(s.text){const l=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,n.schema.text(s.text,l))}else o.delete(s.from,s.to)}return!0}}return!1},ng=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,{empty:r,ranges:i}=t;return r||e&&i.forEach(s=>{n.removeMark(s.$from.pos,s.$to.pos)}),!0},rg=(n,e={})=>({tr:t,state:r,dispatch:i})=>{var s;const{extendEmptyMarkRange:o=!1}=e,{selection:a}=t,l=Ut(n,r.schema),{$from:c,empty:u,ranges:d}=a;if(!i)return!0;if(u&&o){let{from:f,to:h}=a;const p=(s=c.marks().find(y=>y.type===l))===null||s===void 0?void 0:s.attrs,m=Vo(c,l,p);m&&(f=m.from,h=m.to),t.removeMark(f,h,l)}else d.forEach(f=>{t.removeMark(f.$from.pos,f.$to.pos,l)});return t.removeStoredMark(l),!0},ig=(n,e={})=>({tr:t,state:r,dispatch:i})=>{let s=null,o=null;const a=cs(typeof n=="string"?n:n.name,r.schema);return a?(a==="node"&&(s=me(n,r.schema)),a==="mark"&&(o=Ut(n,r.schema)),i&&t.selection.ranges.forEach(l=>{const c=l.$from.pos,u=l.$to.pos;r.doc.nodesBetween(c,u,(d,f)=>{s&&s===d.type&&t.setNodeMarkup(f,void 0,{...d.attrs,...e}),o&&d.marks.length&&d.marks.forEach(h=>{if(o===h.type){const p=Math.max(f,c),m=Math.min(f+d.nodeSize,u);t.addMark(p,m,o.create({...h.attrs,...e}))}})})}),!0):!1},sg=(n,e={})=>({state:t,dispatch:r})=>{const i=me(n,t.schema);return Rp(i,e)(t,r)},og=(n,e={})=>({state:t,dispatch:r})=>{const i=me(n,t.schema);return Ip(i,e)(t,r)};var ag=Object.freeze({__proto__:null,blur:im,clearContent:sm,clearNodes:om,command:am,createParagraphNear:lm,deleteNode:um,deleteRange:cm,deleteSelection:dm,enter:fm,exitCode:hm,extendMarkRange:mm,first:gm,focus:ym,forEach:bm,insertContent:Dm,insertContentAt:wm,joinBackward:Cm,joinForward:Em,keyboardShortcut:Am,lift:Om,liftEmptyBlock:Tm,liftListItem:Mm,newlineInCode:_m,resetAttributes:Fm,scrollIntoView:Nm,selectAll:Bm,selectNodeBackward:Rm,selectNodeForward:Im,selectParentNode:Pm,selectTextblockEnd:Lm,selectTextblockStart:$m,setContent:zm,setMark:Vm,setMeta:jm,setNode:Hm,setNodeSelection:qm,setTextSelection:Wm,sinkListItem:Um,splitBlock:Jm,splitListItem:Gm,toggleList:Xm,toggleMark:Qm,toggleNode:Zm,toggleWrap:eg,undoInputRule:tg,unsetAllMarks:ng,unsetMark:rg,updateAttributes:ig,wrapIn:sg,wrapInList:og});const lg=rt.create({name:"commands",addCommands(){return{...ag}}}),ug=rt.create({name:"editable",addProseMirrorPlugins(){return[new je({key:new vt("editable"),props:{editable:()=>this.editor.options.editable}})]}}),cg=rt.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:n}=this;return[new je({key:new vt("focusEvents"),props:{handleDOMEvents:{focus:(e,t)=>{n.isFocused=!0;const r=n.state.tr.setMeta("focus",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,t)=>{n.isFocused=!1;const r=n.state.tr.setMeta("blur",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),dg=rt.create({name:"keymap",addKeyboardShortcuts(){const n=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:a})=>{const{selection:l,doc:c}=a,{empty:u,$anchor:d}=l,{pos:f,parent:h}=d,p=j.atStart(c).from===f;return!u||!p||!h.type.isTextblock||h.textContent.length?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.joinForward(),()=>o.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:n,"Mod-Backspace":n,"Shift-Backspace":n,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},s={...r,"Ctrl-h":n,"Alt-Backspace":n,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return jo()||vc()?s:i},addProseMirrorPlugins(){return[new je({key:new vt("clearDocument"),appendTransaction:(n,e,t)=>{if(!(n.some(p=>p.docChanged)&&!e.doc.eq(t.doc)))return;const{empty:i,from:s,to:o}=e.selection,a=j.atStart(e.doc).from,l=j.atEnd(e.doc).to,c=s===a&&o===l,u=t.doc.textBetween(0,t.doc.content.size," "," ").length===0;if(i||!c||!u)return;const d=t.tr,f=ss({state:t,transaction:d}),{commands:h}=new as({editor:this.editor,state:f});if(h.clearNodes(),!!d.steps.length)return d}})]}}),fg=rt.create({name:"tabindex",addProseMirrorPlugins(){return[new je({key:new vt("tabindex"),props:{attributes:this.editor.isEditable?{tabindex:"0"}:{}}})]}});var hg=Object.freeze({__proto__:null,ClipboardTextSerializer:rm,Commands:lg,Editable:ug,FocusEvents:cg,Keymap:dg,Tabindex:fg});function pg(n,e){const t=me(e,n.schema),{from:r,to:i}=n.selection,s=[];n.doc.nodesBetween(r,i,a=>{s.push(a)});const o=s.reverse().find(a=>a.type.name===t.name);return o?{...o.attrs}:{}}function Dc(n,e){const t=cs(typeof e=="string"?e:e.name,n.schema);return t==="node"?pg(n,e):t==="mark"?bc(n,e):{}}function mg(n,e){const t=ct.fromSchema(e).serializeFragment(n),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(t),i.innerHTML}function gg(n,e){const t={from:0,to:n.content.size};return fc(n,t,e)}function vg(n,e,t={}){if(!e)return Pr(n,null,t)||po(n,null,t);const r=cs(e,n.schema);return r==="node"?Pr(n,e,t):r==="mark"?po(n,e,t):!1}function yg(n){var e;const t=(e=n.type.createAndFill())===null||e===void 0?void 0:e.toJSON(),r=n.toJSON();return JSON.stringify(t)===JSON.stringify(r)}const bg=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 1px !important;
  height: 1px !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function Dg(n,e){const t=document.querySelector("style[data-tiptap-style]");if(t!==null)return t;const r=document.createElement("style");return e&&r.setAttribute("nonce",e),r.setAttribute("data-tiptap-style",""),r.innerHTML=n,document.getElementsByTagName("head")[0].appendChild(r),r}class xg extends jp{constructor(e={}){super(),this.isFocused=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}))},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=Dg(bg,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e){this.setOptions({editable:e})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,t){const r=dc(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],i=this.state.reconfigure({plugins:r});this.view.updateState(i)}unregisterPlugin(e){if(this.isDestroyed)return;const t=typeof e=="string"?`${e}$`:e.key,r=this.state.reconfigure({plugins:this.state.plugins.filter(i=>!i.key.startsWith(t))});this.view.updateState(r)}createExtensionManager(){const t=[...this.options.enableCoreExtensions?Object.values(hg):[],...this.options.extensions].filter(r=>["extension","node","mark"].includes(r==null?void 0:r.type));this.extensionManager=new Nn(t,this)}createCommandManager(){this.commandManager=new as({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){const e=yc(this.options.content,this.schema,this.options.parseOptions),t=gc(e,this.options.autofocus);this.view=new up(this.options.element,{...this.options.editorProps,dispatchTransaction:this.dispatchTransaction.bind(this),state:Mn.create({doc:e,selection:t||void 0})});const r=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(r),this.createNodeViews();const i=this.view.dom;i.editor=this}createNodeViews(){this.view.setProps({nodeViews:this.extensionManager.nodeViews})}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(o=>{var a;return(a=this.capturedTransaction)===null||a===void 0?void 0:a.step(o)});return}const t=this.state.apply(e),r=!this.state.selection.eq(t.selection);this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const i=e.getMeta("focus"),s=e.getMeta("blur");i&&this.emit("focus",{editor:this,event:i.event,transaction:e}),s&&this.emit("blur",{editor:this,event:s.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return Dc(this.state,e)}isActive(e,t){const r=typeof e=="string"?e:null,i=typeof e=="string"?t:e;return vg(this.state,r,i)}getJSON(){return this.state.doc.toJSON()}getHTML(){return mg(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:t=`

`,textSerializers:r={}}=e||{};return gg(this.state.doc,{blockSeparator:t,textSerializers:{...r,...hc(this.schema)}})}get isEmpty(){return yg(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){this.emit("destroy"),this.view&&this.view.destroy(),this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}}function kg(n,e){const t=new Cu(n);return e.forEach(r=>{r.steps.forEach(i=>{t.step(i)})}),t}function wg(n,e,t){const r=[];return n.nodesBetween(e.from,e.to,(i,s)=>{t(i)&&r.push({node:i,pos:s})}),r}function Cg(n,e=JSON.stringify){const t={};return n.filter(r=>{const i=e(r);return Object.prototype.hasOwnProperty.call(t,i)?!1:t[i]=!0})}function Eg(n){const e=Cg(n);return e.length===1?e:e.filter((t,r)=>!e.filter((s,o)=>o!==r).some(s=>t.oldRange.from>=s.oldRange.from&&t.oldRange.to<=s.oldRange.to&&t.newRange.from>=s.newRange.from&&t.newRange.to<=s.newRange.to))}function Sg(n){const{mapping:e,steps:t}=n,r=[];return e.maps.forEach((i,s)=>{const o=[];if(i.ranges.length)i.forEach((a,l)=>{o.push({from:a,to:l})});else{const{from:a,to:l}=t[s];if(a===void 0||l===void 0)return;o.push({from:a,to:l})}o.forEach(({from:a,to:l})=>{const c=e.slice(s).map(a,-1),u=e.slice(s).map(l),d=e.invert().map(c,-1),f=e.invert().map(u);r.push({oldRange:{from:d,to:f},newRange:{from:c,to:u}})})}),Eg(r)}function mo(n,e,t){const r=[];return n===e?t.resolve(n).marks().forEach(i=>{const s=t.resolve(n-1),o=Vo(s,i.type);!o||r.push({mark:i,...o})}):t.nodesBetween(n,e,(i,s)=>{r.push(...i.marks.map(o=>({from:s,to:s+i.nodeSize,mark:o})))}),r}function Ag(n){return pc(n)&&n instanceof P}function xc(n,e,t){const i=n.state.doc.content.size,s=Et(e,0,i),o=Et(t,0,i),a=n.coordsAtPos(s),l=n.coordsAtPos(o,-1),c=Math.min(a.top,l.top),u=Math.max(a.bottom,l.bottom),d=Math.min(a.left,l.left),f=Math.max(a.right,l.right),h=f-d,p=u-c,b={top:c,bottom:u,left:d,right:f,width:h,height:p,x:d,y:c};return{...b,toJSON:()=>b}}function ux(n){return new Kp({find:n.find,handler:({state:e,range:t,match:r})=>{let i=n.replace,s=t.from;const o=t.to;if(r[1]){const a=r[0].lastIndexOf(r[1]);i+=r[0].slice(a+r[1].length),s+=a;const l=s-o;l>0&&(i=r[0].slice(a-l,a)+i,s=o)}e.tr.insertText(i,s,o)}})}class Ei{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=H(M(this,"addOptions",{name:this.name}))),this.storage=H(M(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Ei(e)}configure(e={}){const t=this.extend();return t.options=us(this.options,e),t.storage=H(M(t,"addStorage",{name:t.name,options:t.options})),t}extend(e={}){const t=new Ei(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=H(M(t,"addOptions",{name:t.name})),t.storage=H(M(t,"addStorage",{name:t.name,options:t.options})),t}}class Yn{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=H(M(this,"addOptions",{name:this.name}))),this.storage=H(M(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Yn(e)}configure(e={}){const t=this.extend();return t.options=us(this.options,e),t.storage=H(M(t,"addStorage",{name:t.name,options:t.options})),t}extend(e={}){const t=new Yn(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=H(M(t,"addOptions",{name:t.name})),t.storage=H(M(t,"addStorage",{name:t.name,options:t.options})),t}}function Og(n){return new Xp({find:n.find,handler:({state:e,range:t,match:r})=>{const i=H(n.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:s}=e,o=r[r.length-1],a=r[0];let l=t.to;if(o){const c=a.search(/\S/),u=t.from+a.indexOf(o),d=u+o.length;if(mo(t.from,t.to,e.doc).filter(h=>h.mark.type.excluded.find(m=>m===n.type&&m!==h.mark.type)).filter(h=>h.to>u).length)return null;d<t.to&&s.delete(d,t.to),u>t.from&&s.delete(t.from+c,u),l=t.from+c+o.length,s.addMark(t.from+c,l,n.type.create(i||{})),s.removeStoredMark(n.type)}}})}const Tg=Yn.create({name:"doc",topNode:!0,content:"block+"}),Mg=Yn.create({name:"div",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"div"}]},renderHTML({HTMLAttributes:n}){return["div",$o(this.options.HTMLAttributes,n),0]},addCommands(){return{setParagraph:()=>({commands:n})=>n.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),_g=Yn.create({name:"text",group:"inline"});function qo(n){this.j={},this.jr=[],this.jd=null,this.t=n}qo.prototype={accepts:function(){return!!this.t},tt:function(e,t){if(t&&t.j)return this.j[e]=t,t;var r=t,i=this.j[e];if(i)return r&&(i.t=r),i;i=Q();var s=Si(this,e);return s?(Object.assign(i.j,s.j),i.jr.append(s.jr),i.jr=s.jd,i.t=r||s.t):i.t=r,this.j[e]=i,i}};var Q=function(){return new qo},B=function(e){return new qo(e)},C=function(e,t,r){e.j[t]||(e.j[t]=r)},de=function(e,t,r){e.jr.push([t,r])},Si=function(e,t){var r=e.j[t];if(r)return r;for(var i=0;i<e.jr.length;i++){var s=e.jr[i][0],o=e.jr[i][1];if(s.test(t))return o}return e.jd},z=function(e,t,r){for(var i=0;i<t.length;i++)C(e,t[i],r)},Fg=function(e,t){for(var r=0;r<t.length;r++){var i=t[r][0],s=t[r][1];C(e,i,s)}},Xt=function(e,t,r,i){for(var s=0,o=t.length,a;s<o&&(a=e.j[t[s]]);)e=a,s++;if(s>=o)return[];for(;s<o-1;)a=i(),C(e,t[s],a),e=a,s++;C(e,t[o-1],r)},Xe="DOMAIN",wt="LOCALHOST",ot="TLD",We="NUM",Xn="PROTOCOL",Wo="MAILTO",kc="WS",Uo="NL",Bn="OPENBRACE",Sr="OPENBRACKET",Ar="OPENANGLEBRACKET",Or="OPENPAREN",tn="CLOSEBRACE",Rn="CLOSEBRACKET",In="CLOSEANGLEBRACKET",Pn="CLOSEPAREN",Ai="AMPERSAND",Oi="APOSTROPHE",Ti="ASTERISK",Ln="AT",Mi="BACKSLASH",_i="BACKTICK",Fi="CARET",Tr="COLON",Ko="COMMA",Ni="DOLLAR",Bt="DOT",Bi="EQUALS",Jo="EXCLAMATION",Ri="HYPHEN",Ii="PERCENT",Pi="PIPE",Li="PLUS",$i="POUND",zi="QUERY",Go="QUOTE",Yo="SEMI",Ct="SLASH",Vi="TILDE",ji="UNDERSCORE",Hi="SYM",Ng=Object.freeze({__proto__:null,DOMAIN:Xe,LOCALHOST:wt,TLD:ot,NUM:We,PROTOCOL:Xn,MAILTO:Wo,WS:kc,NL:Uo,OPENBRACE:Bn,OPENBRACKET:Sr,OPENANGLEBRACKET:Ar,OPENPAREN:Or,CLOSEBRACE:tn,CLOSEBRACKET:Rn,CLOSEANGLEBRACKET:In,CLOSEPAREN:Pn,AMPERSAND:Ai,APOSTROPHE:Oi,ASTERISK:Ti,AT:Ln,BACKSLASH:Mi,BACKTICK:_i,CARET:Fi,COLON:Tr,COMMA:Ko,DOLLAR:Ni,DOT:Bt,EQUALS:Bi,EXCLAMATION:Jo,HYPHEN:Ri,PERCENT:Ii,PIPE:Pi,PLUS:Li,POUND:$i,QUERY:zi,QUOTE:Go,SEMI:Yo,SLASH:Ct,TILDE:Vi,UNDERSCORE:ji,SYM:Hi}),bl="aaa aarp abarth abb abbott abbvie abc able abogado abudhabi ac academy accenture accountant accountants aco actor ad adac ads adult ae aeg aero aetna af afamilycompany afl africa ag agakhan agency ai aig airbus airforce airtel akdn al alfaromeo alibaba alipay allfinanz allstate ally alsace alstom am amazon americanexpress americanfamily amex amfam amica amsterdam analytics android anquan anz ao aol apartments app apple aq aquarelle ar arab aramco archi army arpa art arte as asda asia associates at athleta attorney au auction audi audible audio auspost author auto autos avianca aw aws ax axa az azure ba baby baidu banamex bananarepublic band bank bar barcelona barclaycard barclays barefoot bargains baseball basketball bauhaus bayern bb bbc bbt bbva bcg bcn bd be beats beauty beer bentley berlin best bestbuy bet bf bg bh bharti bi bible bid bike bing bingo bio biz bj black blackfriday blockbuster blog bloomberg blue bm bms bmw bn bnpparibas bo boats boehringer bofa bom bond boo book booking bosch bostik boston bot boutique box br bradesco bridgestone broadway broker brother brussels bs bt budapest bugatti build builders business buy buzz bv bw by bz bzh ca cab cafe cal call calvinklein cam camera camp cancerresearch canon capetown capital capitalone car caravan cards care career careers cars casa case cash casino cat catering catholic cba cbn cbre cbs cc cd center ceo cern cf cfa cfd cg ch chanel channel charity chase chat cheap chintai christmas chrome church ci cipriani circle cisco citadel citi citic city cityeats ck cl claims cleaning click clinic clinique clothing cloud club clubmed cm cn co coach codes coffee college cologne com comcast commbank community company compare computer comsec condos construction consulting contact contractors cooking cookingchannel cool coop corsica country coupon coupons courses cpa cr credit creditcard creditunion cricket crown crs cruise cruises csc cu cuisinella cv cw cx cy cymru cyou cz dabur dad dance data date dating datsun day dclk dds de deal dealer deals degree delivery dell deloitte delta democrat dental dentist desi design dev dhl diamonds diet digital direct directory discount discover dish diy dj dk dm dnp do docs doctor dog domains dot download drive dtv dubai duck dunlop dupont durban dvag dvr dz earth eat ec eco edeka edu education ee eg email emerck energy engineer engineering enterprises epson equipment er ericsson erni es esq estate et etisalat eu eurovision eus events exchange expert exposed express extraspace fage fail fairwinds faith family fan fans farm farmers fashion fast fedex feedback ferrari ferrero fi fiat fidelity fido film final finance financial fire firestone firmdale fish fishing fit fitness fj fk flickr flights flir florist flowers fly fm fo foo food foodnetwork football ford forex forsale forum foundation fox fr free fresenius frl frogans frontdoor frontier ftr fujitsu fujixerox fun fund furniture futbol fyi ga gal gallery gallo gallup game games gap garden gay gb gbiz gd gdn ge gea gent genting george gf gg ggee gh gi gift gifts gives giving gl glade glass gle global globo gm gmail gmbh gmo gmx gn godaddy gold goldpoint golf goo goodyear goog google gop got gov gp gq gr grainger graphics gratis green gripe grocery group gs gt gu guardian gucci guge guide guitars guru gw gy hair hamburg hangout haus hbo hdfc hdfcbank health healthcare help helsinki here hermes hgtv hiphop hisamitsu hitachi hiv hk hkt hm hn hockey holdings holiday homedepot homegoods homes homesense honda horse hospital host hosting hot hoteles hotels hotmail house how hr hsbc ht hu hughes hyatt hyundai ibm icbc ice icu id ie ieee ifm ikano il im imamat imdb immo immobilien in inc industries infiniti info ing ink institute insurance insure int international intuit investments io ipiranga iq ir irish is ismaili ist istanbul it itau itv iveco jaguar java jcb je jeep jetzt jewelry jio jll jm jmp jnj jo jobs joburg jot joy jp jpmorgan jprs juegos juniper kaufen kddi ke kerryhotels kerrylogistics kerryproperties kfh kg kh ki kia kim kinder kindle kitchen kiwi km kn koeln komatsu kosher kp kpmg kpn kr krd kred kuokgroup kw ky kyoto kz la lacaixa lamborghini lamer lancaster lancia land landrover lanxess lasalle lat latino latrobe law lawyer lb lc lds lease leclerc lefrak legal lego lexus lgbt li lidl life lifeinsurance lifestyle lighting like lilly limited limo lincoln linde link lipsy live living lixil lk llc llp loan loans locker locus loft lol london lotte lotto love lpl lplfinancial lr ls lt ltd ltda lu lundbeck luxe luxury lv ly ma macys madrid maif maison makeup man management mango map market marketing markets marriott marshalls maserati mattel mba mc mckinsey md me med media meet melbourne meme memorial men menu merckmsd mg mh miami microsoft mil mini mint mit mitsubishi mk ml mlb mls mm mma mn mo mobi mobile moda moe moi mom monash money monster mormon mortgage moscow moto motorcycles mov movie mp mq mr ms msd mt mtn mtr mu museum mutual mv mw mx my mz na nab nagoya name nationwide natura navy nba nc ne nec net netbank netflix network neustar new news next nextdirect nexus nf nfl ng ngo nhk ni nico nike nikon ninja nissan nissay nl no nokia northwesternmutual norton now nowruz nowtv np nr nra nrw ntt nu nyc nz obi observer off office okinawa olayan olayangroup oldnavy ollo om omega one ong onl online onyourside ooo open oracle orange org organic origins osaka otsuka ott ovh pa page panasonic paris pars partners parts party passagens pay pccw pe pet pf pfizer pg ph pharmacy phd philips phone photo photography photos physio pics pictet pictures pid pin ping pink pioneer pizza pk pl place play playstation plumbing plus pm pn pnc pohl poker politie porn post pr pramerica praxi press prime pro prod productions prof progressive promo properties property protection pru prudential ps pt pub pw pwc py qa qpon quebec quest qvc racing radio raid re read realestate realtor realty recipes red redstone redumbrella rehab reise reisen reit reliance ren rent rentals repair report republican rest restaurant review reviews rexroth rich richardli ricoh ril rio rip rmit ro rocher rocks rodeo rogers room rs rsvp ru rugby ruhr run rw rwe ryukyu sa saarland safe safety sakura sale salon samsclub samsung sandvik sandvikcoromant sanofi sap sarl sas save saxo sb sbi sbs sc sca scb schaeffler schmidt scholarships school schule schwarz science scjohnson scot sd se search seat secure security seek select sener services ses seven sew sex sexy sfr sg sh shangrila sharp shaw shell shia shiksha shoes shop shopping shouji show showtime si silk sina singles site sj sk ski skin sky skype sl sling sm smart smile sn sncf so soccer social softbank software sohu solar solutions song sony soy spa space sport spot spreadbetting sr srl ss st stada staples star statebank statefarm stc stcgroup stockholm storage store stream studio study style su sucks supplies supply support surf surgery suzuki sv swatch swiftcover swiss sx sy sydney systems sz tab taipei talk taobao target tatamotors tatar tattoo tax taxi tc tci td tdk team tech technology tel temasek tennis teva tf tg th thd theater theatre tiaa tickets tienda tiffany tips tires tirol tj tjmaxx tjx tk tkmaxx tl tm tmall tn to today tokyo tools top toray toshiba total tours town toyota toys tr trade trading training travel travelchannel travelers travelersinsurance trust trv tt tube tui tunes tushu tv tvs tw tz ua ubank ubs ug uk unicom university uno uol ups us uy uz va vacations vana vanguard vc ve vegas ventures verisign versicherung vet vg vi viajes video vig viking villas vin vip virgin visa vision viva vivo vlaanderen vn vodka volkswagen volvo vote voting voto voyage vu vuelos wales walmart walter wang wanggou watch watches weather weatherchannel webcam weber website wed wedding weibo weir wf whoswho wien wiki williamhill win windows wine winners wme wolterskluwer woodside work works world wow ws wtc wtf xbox xerox xfinity xihuan xin xxx xyz yachts yahoo yamaxun yandex ye yodobashi yoga yokohama you youtube yt yun za zappos zara zero zip zm zone zuerich zw verm\xF6gensberater-ctb verm\xF6gensberatung-pwb \u03B5\u03BB \u03B5\u03C5 \u0431\u0433 \u0431\u0435\u043B \u0434\u0435\u0442\u0438 \u0435\u044E \u043A\u0430\u0442\u043E\u043B\u0438\u043A \u043A\u043E\u043C \u049B\u0430\u0437 \u043C\u043A\u0434 \u043C\u043E\u043D \u043C\u043E\u0441\u043A\u0432\u0430 \u043E\u043D\u043B\u0430\u0439\u043D \u043E\u0440\u0433 \u0440\u0443\u0441 \u0440\u0444 \u0441\u0430\u0439\u0442 \u0441\u0440\u0431 \u0443\u043A\u0440 \u10D2\u10D4 \u0570\u0561\u0575 \u05D9\u05E9\u05E8\u05D0\u05DC \u05E7\u05D5\u05DD \u0627\u0628\u0648\u0638\u0628\u064A \u0627\u062A\u0635\u0627\u0644\u0627\u062A \u0627\u0631\u0627\u0645\u0643\u0648 \u0627\u0644\u0627\u0631\u062F\u0646 \u0627\u0644\u0628\u062D\u0631\u064A\u0646 \u0627\u0644\u062C\u0632\u0627\u0626\u0631 \u0627\u0644\u0633\u0639\u0648\u062F\u064A\u0629 \u0627\u0644\u0639\u0644\u064A\u0627\u0646 \u0627\u0644\u0645\u063A\u0631\u0628 \u0627\u0645\u0627\u0631\u0627\u062A \u0627\u06CC\u0631\u0627\u0646 \u0628\u0627\u0631\u062A \u0628\u0627\u0632\u0627\u0631 \u0628\u06BE\u0627\u0631\u062A \u0628\u064A\u062A\u0643 \u067E\u0627\u06A9\u0633\u062A\u0627\u0646 \u0680\u0627\u0631\u062A \u062A\u0648\u0646\u0633 \u0633\u0648\u062F\u0627\u0646 \u0633\u0648\u0631\u064A\u0629 \u0634\u0628\u0643\u0629 \u0639\u0631\u0627\u0642 \u0639\u0631\u0628 \u0639\u0645\u0627\u0646 \u0641\u0644\u0633\u0637\u064A\u0646 \u0642\u0637\u0631 \u0643\u0627\u062B\u0648\u0644\u064A\u0643 \u0643\u0648\u0645 \u0645\u0635\u0631 \u0645\u0644\u064A\u0633\u064A\u0627 \u0645\u0648\u0631\u064A\u062A\u0627\u0646\u064A\u0627 \u0645\u0648\u0642\u0639 \u0647\u0645\u0631\u0627\u0647 \u0915\u0949\u092E \u0928\u0947\u091F \u092D\u093E\u0930\u0924 \u092D\u093E\u0930\u0924\u092E\u094D \u092D\u093E\u0930\u094B\u0924 \u0938\u0902\u0917\u0920\u0928 \u09AC\u09BE\u0982\u09B2\u09BE \u09AD\u09BE\u09B0\u09A4 \u09AD\u09BE\u09F0\u09A4 \u0A2D\u0A3E\u0A30\u0A24 \u0AAD\u0ABE\u0AB0\u0AA4 \u0B2D\u0B3E\u0B30\u0B24 \u0B87\u0BA8\u0BCD\u0BA4\u0BBF\u0BAF\u0BBE \u0B87\u0BB2\u0B99\u0BCD\u0B95\u0BC8 \u0B9A\u0BBF\u0B99\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0BC2\u0BB0\u0BCD \u0C2D\u0C3E\u0C30\u0C24\u0C4D \u0CAD\u0CBE\u0CB0\u0CA4 \u0D2D\u0D3E\u0D30\u0D24\u0D02 \u0DBD\u0D82\u0D9A\u0DCF \u0E04\u0E2D\u0E21 \u0E44\u0E17\u0E22 \u0EA5\u0EB2\u0EA7 \uB2F7\uB137 \uB2F7\uCEF4 \uC0BC\uC131 \uD55C\uAD6D \u30A2\u30DE\u30BE\u30F3 \u30B0\u30FC\u30B0\u30EB \u30AF\u30E9\u30A6\u30C9 \u30B3\u30E0 \u30B9\u30C8\u30A2 \u30BB\u30FC\u30EB \u30D5\u30A1\u30C3\u30B7\u30E7\u30F3 \u30DD\u30A4\u30F3\u30C8 \u307F\u3093\u306A \u4E16\u754C \u4E2D\u4FE1 \u4E2D\u56FD \u4E2D\u570B \u4E2D\u6587\u7F51 \u4E9A\u9A6C\u900A \u4F01\u4E1A \u4F5B\u5C71 \u4FE1\u606F \u5065\u5EB7 \u516B\u5366 \u516C\u53F8 \u516C\u76CA \u53F0\u6E7E \u53F0\u7063 \u5546\u57CE \u5546\u5E97 \u5546\u6807 \u5609\u91CC \u5609\u91CC\u5927\u9152\u5E97 \u5728\u7EBF \u5927\u4F17\u6C7D\u8F66 \u5927\u62FF \u5929\u4E3B\u6559 \u5A31\u4E50 \u5BB6\u96FB \u5E7F\u4E1C \u5FAE\u535A \u6148\u5584 \u6211\u7231\u4F60 \u624B\u673A \u62DB\u8058 \u653F\u52A1 \u653F\u5E9C \u65B0\u52A0\u5761 \u65B0\u95FB \u65F6\u5C1A \u66F8\u7C4D \u673A\u6784 \u6DE1\u9A6C\u9521 \u6E38\u620F \u6FB3\u9580 \u70B9\u770B \u79FB\u52A8 \u7EC4\u7EC7\u673A\u6784 \u7F51\u5740 \u7F51\u5E97 \u7F51\u7AD9 \u7F51\u7EDC \u8054\u901A \u8BFA\u57FA\u4E9A \u8C37\u6B4C \u8D2D\u7269 \u901A\u8CA9 \u96C6\u56E2 \u96FB\u8A0A\u76C8\u79D1 \u98DE\u5229\u6D66 \u98DF\u54C1 \u9910\u5385 \u9999\u683C\u91CC\u62C9 \u9999\u6E2F".split(" "),dr=/(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/,fr=/(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26A7\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5-\uDED7\uDEDD-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFC\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDDFF\uDE70-\uDE74\uDE78-\uDE7C\uDE80-\uDE86\uDE90-\uDEAC\uDEB0-\uDEBA\uDEC0-\uDEC5\uDED0-\uDED9\uDEE0-\uDEE7\uDEF0-\uDEF6])/,hr=/\uFE0F/,pr=/\d/,Dl=/\s/;function Bg(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=Q(),t=B(We),r=B(Xe),i=Q(),s=B(kc),o=[[pr,r],[dr,r],[fr,r],[hr,r]],a=function(){var g=B(Xe);return g.j={"-":i},g.jr=[].concat(o),g},l=function(g){var _=a();return _.t=g,_};Fg(e,[["'",B(Oi)],["{",B(Bn)],["[",B(Sr)],["<",B(Ar)],["(",B(Or)],["}",B(tn)],["]",B(Rn)],[">",B(In)],[")",B(Pn)],["&",B(Ai)],["*",B(Ti)],["@",B(Ln)],["`",B(_i)],["^",B(Fi)],[":",B(Tr)],[",",B(Ko)],["$",B(Ni)],[".",B(Bt)],["=",B(Bi)],["!",B(Jo)],["-",B(Ri)],["%",B(Ii)],["|",B(Pi)],["+",B(Li)],["#",B($i)],["?",B(zi)],['"',B(Go)],["/",B(Ct)],[";",B(Yo)],["~",B(Vi)],["_",B(ji)],["\\",B(Mi)]]),C(e,`
`,B(Uo)),de(e,Dl,s),C(s,`
`,Q()),de(s,Dl,s);for(var c=0;c<bl.length;c++)Xt(e,bl[c],l(ot),a);var u=a(),d=a(),f=a(),h=a();Xt(e,"file",u,a),Xt(e,"ftp",d,a),Xt(e,"http",f,a),Xt(e,"mailto",h,a);var p=a(),m=B(Xn),y=B(Wo);C(d,"s",p),C(d,":",m),C(f,"s",p),C(f,":",m),C(u,":",m),C(p,":",m),C(h,":",y);for(var b=a(),k=0;k<n.length;k++)Xt(e,n[k],b,a);return C(b,":",m),Xt(e,"localhost",l(wt),a),de(e,pr,t),de(e,dr,r),de(e,fr,r),de(e,hr,r),de(t,pr,t),de(t,dr,r),de(t,fr,r),de(t,hr,r),C(t,"-",i),C(r,"-",i),C(i,"-",i),de(r,pr,r),de(r,dr,r),de(r,fr,r),de(r,hr,r),de(i,pr,r),de(i,dr,r),de(i,fr,r),de(i,hr,r),e.jd=B(Hi),e}function Rg(n,e){for(var t=Ig(e.replace(/[A-Z]/g,function(h){return h.toLowerCase()})),r=t.length,i=[],s=0,o=0;o<r;){for(var a=n,l=null,c=0,u=null,d=-1,f=-1;o<r&&(l=Si(a,t[o]));)a=l,a.accepts()?(d=0,f=0,u=a):d>=0&&(d+=t[o].length,f++),c+=t[o].length,s+=t[o].length,o++;s-=d,o-=f,c-=d,i.push({t:u.t,v:e.substr(s-c,c),s:s-c,e:s})}return i}function Ig(n){for(var e=[],t=n.length,r=0;r<t;){var i=n.charCodeAt(r),s=void 0,o=i<55296||i>56319||r+1===t||(s=n.charCodeAt(r+1))<56320||s>57343?n[r]:n.slice(r,r+2);e.push(o),r+=o.length}return e}function ci(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ci=function(e){return typeof e}:ci=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ci(n)}var be={defaultProtocol:"http",events:null,format:xl,formatHref:xl,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:0,className:null,attributes:null,ignoreTags:[]};function Pg(n){n=n||{},this.defaultProtocol="defaultProtocol"in n?n.defaultProtocol:be.defaultProtocol,this.events="events"in n?n.events:be.events,this.format="format"in n?n.format:be.format,this.formatHref="formatHref"in n?n.formatHref:be.formatHref,this.nl2br="nl2br"in n?n.nl2br:be.nl2br,this.tagName="tagName"in n?n.tagName:be.tagName,this.target="target"in n?n.target:be.target,this.rel="rel"in n?n.rel:be.rel,this.validate="validate"in n?n.validate:be.validate,this.truncate="truncate"in n?n.truncate:be.truncate,this.className="className"in n?n.className:be.className,this.attributes=n.attributes||be.attributes,this.ignoreTags=[];for(var e=("ignoreTags"in n)?n.ignoreTags:be.ignoreTags,t=0;t<e.length;t++)this.ignoreTags.push(e[t].toUpperCase())}Pg.prototype={resolve:function(e){var t=e.toHref(this.defaultProtocol);return{formatted:this.get("format",e.toString(),e),formattedHref:this.get("formatHref",t,e),tagName:this.get("tagName",t,e),className:this.get("className",t,e),target:this.get("target",t,e),rel:this.get("rel",t,e),events:this.getObject("events",t,e),attributes:this.getObject("attributes",t,e),truncate:this.get("truncate",t,e)}},check:function(e){return this.get("validate",e.toString(),e)},get:function(e,t,r){var i=this[e];if(!i)return i;var s;switch(ci(i)){case"function":return i(t,r.t);case"object":return s=r.t in i?i[r.t]:be[e],typeof s=="function"?s(t,r.t):s}return i},getObject:function(e,t,r){var i=this[e];return typeof i=="function"?i(t,r.t):i}};function xl(n){return n}function Lg(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=Object.create(n.prototype);for(var i in t)r[i]=t[i];return r.constructor=e,e.prototype=r,e}function qi(){}qi.prototype={t:"token",isLink:!1,toString:function(){return this.v},toHref:function(){return this.toString()},startIndex:function(){return this.tk[0].s},endIndex:function(){return this.tk[this.tk.length-1].e},toObject:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:be.defaultProtocol;return{type:this.t,value:this.v,isLink:this.isLink,href:this.toHref(e),start:this.startIndex(),end:this.endIndex()}}};function bn(n,e){function t(r,i){this.t=n,this.v=r,this.tk=i}return Lg(qi,t,e),t}var wc=bn("email",{isLink:!0}),go=bn("email",{isLink:!0,toHref:function(){return"mailto:"+this.toString()}}),vo=bn("text"),Cc=bn("nl"),Nt=bn("url",{isLink:!0,toHref:function(){for(var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:be.defaultProtocol,t=this.tk,r=!1,i=!1,s=[],o=0;t[o].t===Xn;)r=!0,s.push(t[o].v),o++;for(;t[o].t===Ct;)i=!0,s.push(t[o].v),o++;for(;o<t.length;o++)s.push(t[o].v);return s=s.join(""),r||i||(s="".concat(e,"://").concat(s)),s},hasProtocol:function(){return this.tk[0].t===Xn}}),$g=Object.freeze({__proto__:null,MultiToken:qi,Base:qi,createTokenClass:bn,MailtoEmail:wc,Email:go,Text:vo,Nl:Cc,Url:Nt});function zg(){var n=Q(),e=Q(),t=Q(),r=Q(),i=Q(),s=Q(),o=Q(),a=B(Nt),l=Q(),c=B(Nt),u=B(Nt),d=Q(),f=Q(),h=Q(),p=Q(),m=Q(),y=B(Nt),b=B(Nt),k=B(Nt),O=B(Nt),g=Q(),_=Q(),A=Q(),N=Q(),S=Q(),W=Q(),G=B(go),ie=Q(),ne=B(go),J=B(wc),ye=Q(),ae=Q(),re=Q(),le=Q(),ue=B(Cc);C(n,Uo,ue),C(n,Xn,e),C(n,Wo,t),C(e,Ct,r),C(r,Ct,i),C(n,ot,s),C(n,Xe,s),C(n,wt,a),C(n,We,s),C(i,ot,u),C(i,Xe,u),C(i,We,u),C(i,wt,u),C(s,Bt,o),C(S,Bt,W),C(o,ot,a),C(o,Xe,s),C(o,We,s),C(o,wt,s),C(W,ot,G),C(W,Xe,S),C(W,We,S),C(W,wt,S),C(a,Bt,o),C(G,Bt,W),C(a,Tr,l),C(a,Ct,u),C(l,We,c),C(c,Ct,u),C(G,Tr,ie),C(ie,We,ne);var Z=[Ai,Ti,Ln,Mi,_i,Fi,Ni,Xe,Bi,Ri,wt,We,Ii,Pi,Li,$i,Xn,Ct,Hi,Vi,ot,ji],ee=[Oi,In,tn,Rn,Pn,Tr,Ko,Bt,Jo,Ar,Bn,Sr,Or,zi,Go,Yo];C(u,Bn,f),C(u,Sr,h),C(u,Ar,p),C(u,Or,m),C(d,Bn,f),C(d,Sr,h),C(d,Ar,p),C(d,Or,m),C(f,tn,u),C(h,Rn,u),C(p,In,u),C(m,Pn,u),C(y,tn,u),C(b,Rn,u),C(k,In,u),C(O,Pn,u),C(g,tn,u),C(_,Rn,u),C(A,In,u),C(N,Pn,u),z(f,Z,y),z(h,Z,b),z(p,Z,k),z(m,Z,O),z(f,ee,g),z(h,ee,_),z(p,ee,A),z(m,ee,N),z(y,Z,y),z(b,Z,b),z(k,Z,k),z(O,Z,O),z(y,ee,y),z(b,ee,b),z(k,ee,k),z(O,ee,O),z(g,Z,y),z(_,Z,b),z(A,Z,k),z(N,Z,O),z(g,ee,g),z(_,ee,_),z(A,ee,A),z(N,ee,N),z(u,Z,u),z(d,Z,u),z(u,ee,d),z(d,ee,d),C(t,ot,J),C(t,Xe,J),C(t,We,J),C(t,wt,J),z(J,Z,J),z(J,ee,ye),z(ye,Z,J),z(ye,ee,ye);var Ie=[Ai,Oi,Ti,Mi,_i,Fi,tn,Ni,Xe,Bi,Ri,We,Bn,Ii,Pi,Li,$i,zi,Ct,Hi,Vi,ot,ji];return z(s,Ie,ae),C(s,Ln,re),z(a,Ie,ae),C(a,Ln,re),z(o,Ie,ae),z(ae,Ie,ae),C(ae,Ln,re),C(ae,Bt,le),z(le,Ie,ae),C(re,ot,S),C(re,Xe,S),C(re,We,S),C(re,wt,G),n}function Vg(n,e,t){for(var r=t.length,i=0,s=[],o=[];i<r;){for(var a=n,l=null,c=null,u=0,d=null,f=-1;i<r&&!(l=Si(a,t[i].t));)o.push(t[i++]);for(;i<r&&(c=l||Si(a,t[i].t));)l=null,a=c,a.accepts()?(f=0,d=a):f>=0&&f++,i++,u++;if(f<0)for(var h=i-u;h<i;h++)o.push(t[h]);else{o.length>0&&(s.push(Hs(vo,e,o)),o=[]),i-=f,u-=f;var p=d.t,m=t.slice(i-u,i);s.push(Hs(p,e,m))}}return o.length>0&&s.push(Hs(vo,e,o)),s}function Hs(n,e,t){var r=t[0].s,i=t[t.length-1].e,s=e.substr(r,i-r);return new n(s,t)}var jg=typeof console<"u"&&console&&console.warn||function(){},Pe={scanner:null,parser:null,pluginQueue:[],customProtocols:[],initialized:!1};function Hg(n){if(Pe.initialized&&jg('linkifyjs: already initialized - will not register custom protocol "'.concat(n,'" until you manually call linkify.init(). To avoid this warning, please register all custom protocols before invoking linkify the first time.')),!/^[a-z-]+$/.test(n))throw Error("linkifyjs: protocols containing characters other than a-z or - (hyphen) are not supported");Pe.customProtocols.push(n)}function qg(){Pe.scanner={start:Bg(Pe.customProtocols),tokens:Ng},Pe.parser={start:zg(),tokens:$g};for(var n={createTokenClass:bn},e=0;e<Pe.pluginQueue.length;e++)Pe.pluginQueue[e][1]({scanner:Pe.scanner,parser:Pe.parser,utils:n});Pe.initialized=!0}function Ec(n){return Pe.initialized||qg(),Vg(Pe.parser.start,n,Rg(Pe.scanner.start,n))}function Xo(n){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,t=Ec(n),r=[],i=0;i<t.length;i++){var s=t[i];s.isLink&&(!e||s.t===e)&&r.push(s.toObject())}return r}function kl(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,t=Ec(n);return t.length===1&&t[0].isLink&&(!e||t[0].t===e)}function Wg(n){return new je({key:new vt("autolink"),appendTransaction:(e,t,r)=>{const i=e.some(u=>u.docChanged)&&!t.doc.eq(r.doc),s=e.some(u=>u.getMeta("preventAutolink"));if(!i||s)return;const{tr:o}=r,a=kg(t.doc,[...e]),{mapping:l}=a;if(Sg(a).forEach(({oldRange:u,newRange:d})=>{mo(u.from,u.to,t.doc).filter(f=>f.mark.type===n.type).forEach(f=>{const h=l.map(f.from),p=l.map(f.to),m=mo(h,p,r.doc).filter(_=>_.mark.type===n.type);if(!m.length)return;const y=m[0],b=t.doc.textBetween(f.from,f.to,void 0," "),k=r.doc.textBetween(y.from,y.to,void 0," "),O=kl(b),g=kl(k);O&&!g&&o.removeMark(y.from,y.to,n.type)}),wg(r.doc,d,f=>f.isTextblock).forEach(f=>{const h=r.doc.textBetween(f.pos,f.pos+f.node.nodeSize,void 0," ");Xo(h).filter(p=>p.isLink).filter(p=>n.validate?n.validate(p.value):!0).map(p=>({...p,from:f.pos+p.start+1,to:f.pos+p.end+1})).filter(p=>{const m=d.from>=p.from&&d.from<=p.to,y=d.to>=p.from&&d.to<=p.to;return m||y}).forEach(p=>{o.addMark(p.from,p.to,n.type.create({href:p.href}))})})}),!!o.steps.length)return o}})}function Ug(n){return new je({key:new vt("handleClickLink"),props:{handleClick:(e,t,r)=>{var i;const s=Dc(e.state,n.type.name);return((i=r.target)===null||i===void 0?void 0:i.closest("a"))&&s.href?(window.open(s.href,s.target),!0):!1}}})}function Kg(n){return new je({key:new vt("handlePasteLink"),props:{handlePaste:(e,t,r)=>{const{state:i}=e,{selection:s}=i,{empty:o}=s;if(o)return!1;let a="";r.content.forEach(c=>{a+=c.textContent});const l=Xo(a).find(c=>c.isLink&&c.value===a);return!a||!l?!1:(n.editor.commands.setMark(n.type,{href:l.href}),!0)}}})}const Jg=Ei.create({name:"link",priority:1e3,keepOnSplit:!1,onCreate(){this.options.protocols.forEach(Hg)},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,linkOnPaste:!0,autolink:!0,protocols:[],HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},validate:void 0}},addAttributes(){return{href:{default:null},target:{default:this.options.HTMLAttributes.target},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:'a[href]:not([href *= "javascript:" i])'}]},renderHTML({HTMLAttributes:n}){return["a",$o(this.options.HTMLAttributes,n),0]},addCommands(){return{setLink:n=>({chain:e})=>e().setMark(this.name,n).setMeta("preventAutolink",!0).run(),toggleLink:n=>({chain:e})=>e().toggleMark(this.name,n,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run(),unsetLink:()=>({chain:n})=>n().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[Og({find:n=>Xo(n).filter(e=>this.options.validate?this.options.validate(e.value):!0).filter(e=>e.isLink).map(e=>({text:e.value,index:e.start,data:e})),type:this.type,getAttributes:n=>{var e;return{href:(e=n.data)===null||e===void 0?void 0:e.href}}})]},addProseMirrorPlugins(){const n=[];return this.options.autolink&&n.push(Wg({type:this.type,validate:this.options.validate})),this.options.openOnClick&&n.push(Ug({type:this.type})),this.options.linkOnPaste&&n.push(Kg({editor:this.editor,type:this.type})),n}}),ds=()=>({defaultExtensions:[Tg,Mg,_g,Jg.configure({openOnClick:!1})],insertEmoji:({editorId:i,emoji:s})=>{s.hasOwnProperty("native")&&ma.emit("insertEmoji",{editorId:i,emoji:s})},focusEditor:({editorId:i})=>{ma.emit("focusEditor",{editorId:i})},isDocEmpty:i=>i==="<div></div>"?!0:i===""}),Gg={class:"relative"},Yg=["src"],Xg={__name:"OneImage",props:{media:{type:Object,required:!0}},setup(n){return(e,t)=>(x(),E("div",Gg,[v("img",{src:n.media.thumb_url,draggable:"false",class:"rounded-xl h-full w-full",alt:"Image"},null,8,Yg)]))}},Qg={},Zg={class:"block p-0 m-0 relative box-border align-middle select-none w-full"};function e0(n,e){return x(),E("div",Zg,[Hn(n.$slots,"default")])}const St=zr(Qg,[["render",e0]]),t0=v("div",{class:"block w-full",style:{"padding-bottom":"56.25%"}},null,-1),n0={class:"flex flex-row gap-1 absolute top-0 left-0 w-full h-full"},r0={class:"absolute flex flex-col top-0 bottom-0 left-0 right-0 overflow-hidden"},i0={__name:"TwoImage",props:{media:{type:Array,required:!0}},setup(n){return(e,t)=>(x(),K(St,null,{default:$(()=>[t0,v("div",n0,[(x(!0),E(se,null,_e(n.media,r=>(x(),E("div",{key:n.media.id,class:"flex-grow basis-0 relative w-full h-full basis-auto"},[v("div",r0,[v("div",{class:"bg-cover bg-center h-full w-full",style:he({backgroundImage:"url("+r.thumb_url+")"})},null,4)])]))),128))])]),_:1}))}},s0={class:"block relative"},o0=v("div",{class:"block w-full",style:{"padding-bottom":"56.25%"}},null,-1),a0={class:"flex flex-row gap-1 absolute top-0 left-0 w-full h-full"},l0={class:"flex flex-col flex-grow basis-0"},u0={class:"flex-grow basis-0 relative w-full h-full basis-auto"},c0={class:"absolute flex flex-col top-0 bottom-0 left-0 right-0 overflow-hidden"},d0={class:"flex flex-col flex-grow gap-1 basis-0"},f0={class:"absolute flex flex-col top-0 bottom-0 left-0 right-0 overflow-hidden"},h0={__name:"ThreeImage",props:{media:{type:Array,required:!0}},setup(n){return(e,t)=>(x(),E("div",s0,[o0,v("div",a0,[v("div",l0,[v("div",u0,[v("div",c0,[v("div",{class:"bg-cover bg-center h-full w-full rounded-tl-xl rounded-bl-xl",style:he({backgroundImage:"url("+n.media[0].thumb_url+")"})},null,4)])])]),v("div",d0,[(x(!0),E(se,null,_e(n.media.slice(1),r=>(x(),E("div",{key:r.id,class:"flex-grow basis-0 relative w-full h-full basis-auto"},[v("div",f0,[v("div",{class:"bg-cover bg-center h-full w-full",style:he({backgroundImage:"url("+r.thumb_url+")"})},null,4)])]))),128))])])]))}},p0={class:"block relative overflow-hidden"},m0=v("div",{class:"block w-full",style:{"padding-bottom":"56.25%"}},null,-1),g0={class:"flex flex-col gap-1 absolute top-0 left-0 w-full h-full"},v0={class:"flex flex-row flex-grow gap-1 basis-0"},y0={class:"absolute flex flex-col top-0 bottom-0 left-0 right-0 overflow-hidden"},b0={class:"flex flex-row flex-grow gap-1 basis-0"},D0={class:"absolute flex flex-col top-0 bottom-0 left-0 right-0 overflow-hidden"},x0={__name:"FourImage",props:{media:{type:Array,required:!0}},setup(n){return(e,t)=>(x(),E("div",p0,[m0,v("div",g0,[v("div",v0,[(x(!0),E(se,null,_e(n.media.slice(0,2),r=>(x(),E("div",{key:r.id,class:"flex-grow basis-0 relative w-full h-full basis-auto"},[v("div",y0,[v("div",{class:"bg-cover bg-center h-full w-full",style:he({backgroundImage:"url("+r.thumb_url+")"})},null,4)])]))),128))]),v("div",b0,[(x(!0),E(se,null,_e(n.media.slice(2,4),r=>(x(),E("div",{key:r.id,class:"flex-grow basis-0 relative w-full h-full basis-auto"},[v("div",D0,[v("div",{class:"bg-cover bg-center h-full w-full",style:he({backgroundImage:"url("+r.thumb_url+")"})},null,4)])]))),128))])])]))}},k0={},w0={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},C0=v("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.348a1.125 1.125 0 010 1.971l-11.54 6.347a1.125 1.125 0 01-1.667-.985V5.653z"},null,-1),E0=[C0];function S0(n,e){return x(),E("svg",w0,E0)}const Qo=zr(k0,[["render",S0]]),A0={class:"relative"},O0={class:"w-full h-full absolute flex items-center justify-center"},T0=["src"],M0={key:1,class:"w-auto h-full mx-auto",controls:"",autoplay:"",media:""},_0=["src","type"],F0=ce(" Your browser does not support the video tag. "),N0={__name:"Video",props:{media:{type:Object,required:!0}},setup(n){const e=fe(!1);return(t,r)=>(x(),E("div",A0,[v("div",O0,[e.value?L("",!0):(x(),E("button",{key:0,onClick:r[0]||(r[0]=i=>e.value=!0),class:"w-16 h-16 border-2 border-white rounded-full flex items-center justify-center text-white bg-twitter"},[R(Qo,{class:"!w-10 !h-10"})]))]),e.value?L("",!0):(x(),E("img",{key:0,src:n.media.thumb_url,draggable:"false",class:"rounded-xl h-full w-full",alt:"Image"},null,8,T0)),e.value?(x(),E("video",M0,[v("source",{src:n.media.url,type:n.media.mime_type},null,8,_0),F0])):L("",!0)]))}},B0={key:0},R0={key:0,class:"overflow-hidden rounded-xl"},I0={key:1,class:"overflow-hidden rounded-xl"},P0={__name:"TwitterGallery",props:{media:{type:Array,required:!0}},setup(n){return(e,t)=>n.media.length?(x(),E("div",B0,[n.media[0].is_video?(x(),E("div",R0,[R(N0,{media:n.media[0]},null,8,["media"])])):(x(),E("div",I0,[n.media.length===1?(x(),K(Xg,{key:0,media:n.media[0]},null,8,["media"])):L("",!0),n.media.length===2?(x(),K(i0,{key:1,media:n.media},null,8,["media"])):L("",!0),n.media.length===3?(x(),K(h0,{key:2,media:n.media},null,8,["media"])):L("",!0),n.media.length>3?(x(),K(x0,{key:3,media:n.media},null,8,["media"])):L("",!0)]))])):L("",!0)}};var Fe="top",Je="bottom",Ge="right",Ne="left",Zo="auto",Hr=[Fe,Je,Ge,Ne],Qn="start",Lr="end",L0="clippingParents",Sc="viewport",mr="popper",$0="reference",wl=Hr.reduce(function(n,e){return n.concat([e+"-"+Qn,e+"-"+Lr])},[]),Ac=[].concat(Hr,[Zo]).reduce(function(n,e){return n.concat([e,e+"-"+Qn,e+"-"+Lr])},[]),z0="beforeRead",V0="read",j0="afterRead",H0="beforeMain",q0="main",W0="afterMain",U0="beforeWrite",K0="write",J0="afterWrite",G0=[z0,V0,j0,H0,q0,W0,U0,K0,J0];function gt(n){return n?(n.nodeName||"").toLowerCase():null}function it(n){if(n==null)return window;if(n.toString()!=="[object Window]"){var e=n.ownerDocument;return e&&e.defaultView||window}return n}function Zn(n){var e=it(n).Element;return n instanceof e||n instanceof Element}function Ke(n){var e=it(n).HTMLElement;return n instanceof e||n instanceof HTMLElement}function ea(n){if(typeof ShadowRoot>"u")return!1;var e=it(n).ShadowRoot;return n instanceof e||n instanceof ShadowRoot}function Y0(n){var e=n.state;Object.keys(e.elements).forEach(function(t){var r=e.styles[t]||{},i=e.attributes[t]||{},s=e.elements[t];!Ke(s)||!gt(s)||(Object.assign(s.style,r),Object.keys(i).forEach(function(o){var a=i[o];a===!1?s.removeAttribute(o):s.setAttribute(o,a===!0?"":a)}))})}function X0(n){var e=n.state,t={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,t.popper),e.styles=t,e.elements.arrow&&Object.assign(e.elements.arrow.style,t.arrow),function(){Object.keys(e.elements).forEach(function(r){var i=e.elements[r],s=e.attributes[r]||{},o=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:t[r]),a=o.reduce(function(l,c){return l[c]="",l},{});!Ke(i)||!gt(i)||(Object.assign(i.style,a),Object.keys(s).forEach(function(l){i.removeAttribute(l)}))})}}const Oc={name:"applyStyles",enabled:!0,phase:"write",fn:Y0,effect:X0,requires:["computeStyles"]};function ht(n){return n.split("-")[0]}var pn=Math.max,Wi=Math.min,er=Math.round;function tr(n,e){e===void 0&&(e=!1);var t=n.getBoundingClientRect(),r=1,i=1;if(Ke(n)&&e){var s=n.offsetHeight,o=n.offsetWidth;o>0&&(r=er(t.width)/o||1),s>0&&(i=er(t.height)/s||1)}return{width:t.width/r,height:t.height/i,top:t.top/i,right:t.right/r,bottom:t.bottom/i,left:t.left/r,x:t.left/r,y:t.top/i}}function ta(n){var e=tr(n),t=n.offsetWidth,r=n.offsetHeight;return Math.abs(e.width-t)<=1&&(t=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:n.offsetLeft,y:n.offsetTop,width:t,height:r}}function Tc(n,e){var t=e.getRootNode&&e.getRootNode();if(n.contains(e))return!0;if(t&&ea(t)){var r=e;do{if(r&&n.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function Ot(n){return it(n).getComputedStyle(n)}function Q0(n){return["table","td","th"].indexOf(gt(n))>=0}function Kt(n){return((Zn(n)?n.ownerDocument:n.document)||window.document).documentElement}function fs(n){return gt(n)==="html"?n:n.assignedSlot||n.parentNode||(ea(n)?n.host:null)||Kt(n)}function Cl(n){return!Ke(n)||Ot(n).position==="fixed"?null:n.offsetParent}function Z0(n){var e=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1,t=navigator.userAgent.indexOf("Trident")!==-1;if(t&&Ke(n)){var r=Ot(n);if(r.position==="fixed")return null}var i=fs(n);for(ea(i)&&(i=i.host);Ke(i)&&["html","body"].indexOf(gt(i))<0;){var s=Ot(i);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||e&&s.willChange==="filter"||e&&s.filter&&s.filter!=="none")return i;i=i.parentNode}return null}function qr(n){for(var e=it(n),t=Cl(n);t&&Q0(t)&&Ot(t).position==="static";)t=Cl(t);return t&&(gt(t)==="html"||gt(t)==="body"&&Ot(t).position==="static")?e:t||Z0(n)||e}function na(n){return["top","bottom"].indexOf(n)>=0?"x":"y"}function Mr(n,e,t){return pn(n,Wi(e,t))}function ev(n,e,t){var r=Mr(n,e,t);return r>t?t:r}function Mc(){return{top:0,right:0,bottom:0,left:0}}function _c(n){return Object.assign({},Mc(),n)}function Fc(n,e){return e.reduce(function(t,r){return t[r]=n,t},{})}var tv=function(e,t){return e=typeof e=="function"?e(Object.assign({},t.rects,{placement:t.placement})):e,_c(typeof e!="number"?e:Fc(e,Hr))};function nv(n){var e,t=n.state,r=n.name,i=n.options,s=t.elements.arrow,o=t.modifiersData.popperOffsets,a=ht(t.placement),l=na(a),c=[Ne,Ge].indexOf(a)>=0,u=c?"height":"width";if(!(!s||!o)){var d=tv(i.padding,t),f=ta(s),h=l==="y"?Fe:Ne,p=l==="y"?Je:Ge,m=t.rects.reference[u]+t.rects.reference[l]-o[l]-t.rects.popper[u],y=o[l]-t.rects.reference[l],b=qr(s),k=b?l==="y"?b.clientHeight||0:b.clientWidth||0:0,O=m/2-y/2,g=d[h],_=k-f[u]-d[p],A=k/2-f[u]/2+O,N=Mr(g,A,_),S=l;t.modifiersData[r]=(e={},e[S]=N,e.centerOffset=N-A,e)}}function rv(n){var e=n.state,t=n.options,r=t.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||!Tc(e.elements.popper,i)||(e.elements.arrow=i))}const iv={name:"arrow",enabled:!0,phase:"main",fn:nv,effect:rv,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function nr(n){return n.split("-")[1]}var sv={top:"auto",right:"auto",bottom:"auto",left:"auto"};function ov(n){var e=n.x,t=n.y,r=window,i=r.devicePixelRatio||1;return{x:er(e*i)/i||0,y:er(t*i)/i||0}}function El(n){var e,t=n.popper,r=n.popperRect,i=n.placement,s=n.variation,o=n.offsets,a=n.position,l=n.gpuAcceleration,c=n.adaptive,u=n.roundOffsets,d=n.isFixed,f=o.x,h=f===void 0?0:f,p=o.y,m=p===void 0?0:p,y=typeof u=="function"?u({x:h,y:m}):{x:h,y:m};h=y.x,m=y.y;var b=o.hasOwnProperty("x"),k=o.hasOwnProperty("y"),O=Ne,g=Fe,_=window;if(c){var A=qr(t),N="clientHeight",S="clientWidth";if(A===it(t)&&(A=Kt(t),Ot(A).position!=="static"&&a==="absolute"&&(N="scrollHeight",S="scrollWidth")),A=A,i===Fe||(i===Ne||i===Ge)&&s===Lr){g=Je;var W=d&&A===_&&_.visualViewport?_.visualViewport.height:A[N];m-=W-r.height,m*=l?1:-1}if(i===Ne||(i===Fe||i===Je)&&s===Lr){O=Ge;var G=d&&A===_&&_.visualViewport?_.visualViewport.width:A[S];h-=G-r.width,h*=l?1:-1}}var ie=Object.assign({position:a},c&&sv),ne=u===!0?ov({x:h,y:m}):{x:h,y:m};if(h=ne.x,m=ne.y,l){var J;return Object.assign({},ie,(J={},J[g]=k?"0":"",J[O]=b?"0":"",J.transform=(_.devicePixelRatio||1)<=1?"translate("+h+"px, "+m+"px)":"translate3d("+h+"px, "+m+"px, 0)",J))}return Object.assign({},ie,(e={},e[g]=k?m+"px":"",e[O]=b?h+"px":"",e.transform="",e))}function av(n){var e=n.state,t=n.options,r=t.gpuAcceleration,i=r===void 0?!0:r,s=t.adaptive,o=s===void 0?!0:s,a=t.roundOffsets,l=a===void 0?!0:a,c={placement:ht(e.placement),variation:nr(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,El(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,El(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const lv={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:av,data:{}};var si={passive:!0};function uv(n){var e=n.state,t=n.instance,r=n.options,i=r.scroll,s=i===void 0?!0:i,o=r.resize,a=o===void 0?!0:o,l=it(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&c.forEach(function(u){u.addEventListener("scroll",t.update,si)}),a&&l.addEventListener("resize",t.update,si),function(){s&&c.forEach(function(u){u.removeEventListener("scroll",t.update,si)}),a&&l.removeEventListener("resize",t.update,si)}}const cv={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:uv,data:{}};var dv={left:"right",right:"left",bottom:"top",top:"bottom"};function di(n){return n.replace(/left|right|bottom|top/g,function(e){return dv[e]})}var fv={start:"end",end:"start"};function Sl(n){return n.replace(/start|end/g,function(e){return fv[e]})}function ra(n){var e=it(n),t=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:t,scrollTop:r}}function ia(n){return tr(Kt(n)).left+ra(n).scrollLeft}function hv(n){var e=it(n),t=Kt(n),r=e.visualViewport,i=t.clientWidth,s=t.clientHeight,o=0,a=0;return r&&(i=r.width,s=r.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(o=r.offsetLeft,a=r.offsetTop)),{width:i,height:s,x:o+ia(n),y:a}}function pv(n){var e,t=Kt(n),r=ra(n),i=(e=n.ownerDocument)==null?void 0:e.body,s=pn(t.scrollWidth,t.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),o=pn(t.scrollHeight,t.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-r.scrollLeft+ia(n),l=-r.scrollTop;return Ot(i||t).direction==="rtl"&&(a+=pn(t.clientWidth,i?i.clientWidth:0)-s),{width:s,height:o,x:a,y:l}}function sa(n){var e=Ot(n),t=e.overflow,r=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(t+i+r)}function Nc(n){return["html","body","#document"].indexOf(gt(n))>=0?n.ownerDocument.body:Ke(n)&&sa(n)?n:Nc(fs(n))}function _r(n,e){var t;e===void 0&&(e=[]);var r=Nc(n),i=r===((t=n.ownerDocument)==null?void 0:t.body),s=it(r),o=i?[s].concat(s.visualViewport||[],sa(r)?r:[]):r,a=e.concat(o);return i?a:a.concat(_r(fs(o)))}function yo(n){return Object.assign({},n,{left:n.x,top:n.y,right:n.x+n.width,bottom:n.y+n.height})}function mv(n){var e=tr(n);return e.top=e.top+n.clientTop,e.left=e.left+n.clientLeft,e.bottom=e.top+n.clientHeight,e.right=e.left+n.clientWidth,e.width=n.clientWidth,e.height=n.clientHeight,e.x=e.left,e.y=e.top,e}function Al(n,e){return e===Sc?yo(hv(n)):Zn(e)?mv(e):yo(pv(Kt(n)))}function gv(n){var e=_r(fs(n)),t=["absolute","fixed"].indexOf(Ot(n).position)>=0,r=t&&Ke(n)?qr(n):n;return Zn(r)?e.filter(function(i){return Zn(i)&&Tc(i,r)&&gt(i)!=="body"}):[]}function vv(n,e,t){var r=e==="clippingParents"?gv(n):[].concat(e),i=[].concat(r,[t]),s=i[0],o=i.reduce(function(a,l){var c=Al(n,l);return a.top=pn(c.top,a.top),a.right=Wi(c.right,a.right),a.bottom=Wi(c.bottom,a.bottom),a.left=pn(c.left,a.left),a},Al(n,s));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}function Bc(n){var e=n.reference,t=n.element,r=n.placement,i=r?ht(r):null,s=r?nr(r):null,o=e.x+e.width/2-t.width/2,a=e.y+e.height/2-t.height/2,l;switch(i){case Fe:l={x:o,y:e.y-t.height};break;case Je:l={x:o,y:e.y+e.height};break;case Ge:l={x:e.x+e.width,y:a};break;case Ne:l={x:e.x-t.width,y:a};break;default:l={x:e.x,y:e.y}}var c=i?na(i):null;if(c!=null){var u=c==="y"?"height":"width";switch(s){case Qn:l[c]=l[c]-(e[u]/2-t[u]/2);break;case Lr:l[c]=l[c]+(e[u]/2-t[u]/2);break}}return l}function $r(n,e){e===void 0&&(e={});var t=e,r=t.placement,i=r===void 0?n.placement:r,s=t.boundary,o=s===void 0?L0:s,a=t.rootBoundary,l=a===void 0?Sc:a,c=t.elementContext,u=c===void 0?mr:c,d=t.altBoundary,f=d===void 0?!1:d,h=t.padding,p=h===void 0?0:h,m=_c(typeof p!="number"?p:Fc(p,Hr)),y=u===mr?$0:mr,b=n.rects.popper,k=n.elements[f?y:u],O=vv(Zn(k)?k:k.contextElement||Kt(n.elements.popper),o,l),g=tr(n.elements.reference),_=Bc({reference:g,element:b,strategy:"absolute",placement:i}),A=yo(Object.assign({},b,_)),N=u===mr?A:g,S={top:O.top-N.top+m.top,bottom:N.bottom-O.bottom+m.bottom,left:O.left-N.left+m.left,right:N.right-O.right+m.right},W=n.modifiersData.offset;if(u===mr&&W){var G=W[i];Object.keys(S).forEach(function(ie){var ne=[Ge,Je].indexOf(ie)>=0?1:-1,J=[Fe,Je].indexOf(ie)>=0?"y":"x";S[ie]+=G[J]*ne})}return S}function yv(n,e){e===void 0&&(e={});var t=e,r=t.placement,i=t.boundary,s=t.rootBoundary,o=t.padding,a=t.flipVariations,l=t.allowedAutoPlacements,c=l===void 0?Ac:l,u=nr(r),d=u?a?wl:wl.filter(function(p){return nr(p)===u}):Hr,f=d.filter(function(p){return c.indexOf(p)>=0});f.length===0&&(f=d);var h=f.reduce(function(p,m){return p[m]=$r(n,{placement:m,boundary:i,rootBoundary:s,padding:o})[ht(m)],p},{});return Object.keys(h).sort(function(p,m){return h[p]-h[m]})}function bv(n){if(ht(n)===Zo)return[];var e=di(n);return[Sl(n),e,Sl(e)]}function Dv(n){var e=n.state,t=n.options,r=n.name;if(!e.modifiersData[r]._skip){for(var i=t.mainAxis,s=i===void 0?!0:i,o=t.altAxis,a=o===void 0?!0:o,l=t.fallbackPlacements,c=t.padding,u=t.boundary,d=t.rootBoundary,f=t.altBoundary,h=t.flipVariations,p=h===void 0?!0:h,m=t.allowedAutoPlacements,y=e.options.placement,b=ht(y),k=b===y,O=l||(k||!p?[di(y)]:bv(y)),g=[y].concat(O).reduce(function(yt,Ye){return yt.concat(ht(Ye)===Zo?yv(e,{placement:Ye,boundary:u,rootBoundary:d,padding:c,flipVariations:p,allowedAutoPlacements:m}):Ye)},[]),_=e.rects.reference,A=e.rects.popper,N=new Map,S=!0,W=g[0],G=0;G<g.length;G++){var ie=g[G],ne=ht(ie),J=nr(ie)===Qn,ye=[Fe,Je].indexOf(ne)>=0,ae=ye?"width":"height",re=$r(e,{placement:ie,boundary:u,rootBoundary:d,altBoundary:f,padding:c}),le=ye?J?Ge:Ne:J?Je:Fe;_[ae]>A[ae]&&(le=di(le));var ue=di(le),Z=[];if(s&&Z.push(re[ne]<=0),a&&Z.push(re[le]<=0,re[ue]<=0),Z.every(function(yt){return yt})){W=ie,S=!1;break}N.set(ie,Z)}if(S)for(var ee=p?3:1,Ie=function(Ye){var bt=g.find(function(Dn){var Dt=N.get(Dn);if(Dt)return Dt.slice(0,Ye).every(function(xn){return xn})});if(bt)return W=bt,"break"},st=ee;st>0;st--){var Jt=Ie(st);if(Jt==="break")break}e.placement!==W&&(e.modifiersData[r]._skip=!0,e.placement=W,e.reset=!0)}}const xv={name:"flip",enabled:!0,phase:"main",fn:Dv,requiresIfExists:["offset"],data:{_skip:!1}};function Ol(n,e,t){return t===void 0&&(t={x:0,y:0}),{top:n.top-e.height-t.y,right:n.right-e.width+t.x,bottom:n.bottom-e.height+t.y,left:n.left-e.width-t.x}}function Tl(n){return[Fe,Ge,Je,Ne].some(function(e){return n[e]>=0})}function kv(n){var e=n.state,t=n.name,r=e.rects.reference,i=e.rects.popper,s=e.modifiersData.preventOverflow,o=$r(e,{elementContext:"reference"}),a=$r(e,{altBoundary:!0}),l=Ol(o,r),c=Ol(a,i,s),u=Tl(l),d=Tl(c);e.modifiersData[t]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:d},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}const wv={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:kv};function Cv(n,e,t){var r=ht(n),i=[Ne,Fe].indexOf(r)>=0?-1:1,s=typeof t=="function"?t(Object.assign({},e,{placement:n})):t,o=s[0],a=s[1];return o=o||0,a=(a||0)*i,[Ne,Ge].indexOf(r)>=0?{x:a,y:o}:{x:o,y:a}}function Ev(n){var e=n.state,t=n.options,r=n.name,i=t.offset,s=i===void 0?[0,0]:i,o=Ac.reduce(function(u,d){return u[d]=Cv(d,e.rects,s),u},{}),a=o[e.placement],l=a.x,c=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=c),e.modifiersData[r]=o}const Sv={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Ev};function Av(n){var e=n.state,t=n.name;e.modifiersData[t]=Bc({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const Ov={name:"popperOffsets",enabled:!0,phase:"read",fn:Av,data:{}};function Tv(n){return n==="x"?"y":"x"}function Mv(n){var e=n.state,t=n.options,r=n.name,i=t.mainAxis,s=i===void 0?!0:i,o=t.altAxis,a=o===void 0?!1:o,l=t.boundary,c=t.rootBoundary,u=t.altBoundary,d=t.padding,f=t.tether,h=f===void 0?!0:f,p=t.tetherOffset,m=p===void 0?0:p,y=$r(e,{boundary:l,rootBoundary:c,padding:d,altBoundary:u}),b=ht(e.placement),k=nr(e.placement),O=!k,g=na(b),_=Tv(g),A=e.modifiersData.popperOffsets,N=e.rects.reference,S=e.rects.popper,W=typeof m=="function"?m(Object.assign({},e.rects,{placement:e.placement})):m,G=typeof W=="number"?{mainAxis:W,altAxis:W}:Object.assign({mainAxis:0,altAxis:0},W),ie=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,ne={x:0,y:0};if(!!A){if(s){var J,ye=g==="y"?Fe:Ne,ae=g==="y"?Je:Ge,re=g==="y"?"height":"width",le=A[g],ue=le+y[ye],Z=le-y[ae],ee=h?-S[re]/2:0,Ie=k===Qn?N[re]:S[re],st=k===Qn?-S[re]:-N[re],Jt=e.elements.arrow,yt=h&&Jt?ta(Jt):{width:0,height:0},Ye=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:Mc(),bt=Ye[ye],Dn=Ye[ae],Dt=Mr(0,N[re],yt[re]),xn=O?N[re]/2-ee-Dt-bt-G.mainAxis:Ie-Dt-bt-G.mainAxis,Tt=O?-N[re]/2+ee+Dt+Dn+G.mainAxis:st+Dt+Dn+G.mainAxis,kn=e.elements.arrow&&qr(e.elements.arrow),Wr=kn?g==="y"?kn.clientTop||0:kn.clientLeft||0:0,sr=(J=ie==null?void 0:ie[g])!=null?J:0,Ur=le+xn-sr-Wr,Kr=le+Tt-sr,or=Mr(h?Wi(ue,Ur):ue,le,h?pn(Z,Kr):Z);A[g]=or,ne[g]=or-le}if(a){var ar,Jr=g==="x"?Fe:Ne,Gr=g==="x"?Je:Ge,xt=A[_],Mt=_==="y"?"height":"width",lr=xt+y[Jr],Gt=xt-y[Gr],ur=[Fe,Ne].indexOf(b)!==-1,Yr=(ar=ie==null?void 0:ie[_])!=null?ar:0,Xr=ur?lr:xt-N[Mt]-S[Mt]-Yr+G.altAxis,Qr=ur?xt+N[Mt]+S[Mt]-Yr-G.altAxis:Gt,Zr=h&&ur?ev(Xr,xt,Qr):Mr(h?Xr:lr,xt,h?Qr:Gt);A[_]=Zr,ne[_]=Zr-xt}e.modifiersData[r]=ne}}const _v={name:"preventOverflow",enabled:!0,phase:"main",fn:Mv,requiresIfExists:["offset"]};function Fv(n){return{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}}function Nv(n){return n===it(n)||!Ke(n)?ra(n):Fv(n)}function Bv(n){var e=n.getBoundingClientRect(),t=er(e.width)/n.offsetWidth||1,r=er(e.height)/n.offsetHeight||1;return t!==1||r!==1}function Rv(n,e,t){t===void 0&&(t=!1);var r=Ke(e),i=Ke(e)&&Bv(e),s=Kt(e),o=tr(n,i),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!t)&&((gt(e)!=="body"||sa(s))&&(a=Nv(e)),Ke(e)?(l=tr(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):s&&(l.x=ia(s))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function Iv(n){var e=new Map,t=new Set,r=[];n.forEach(function(s){e.set(s.name,s)});function i(s){t.add(s.name);var o=[].concat(s.requires||[],s.requiresIfExists||[]);o.forEach(function(a){if(!t.has(a)){var l=e.get(a);l&&i(l)}}),r.push(s)}return n.forEach(function(s){t.has(s.name)||i(s)}),r}function Pv(n){var e=Iv(n);return G0.reduce(function(t,r){return t.concat(e.filter(function(i){return i.phase===r}))},[])}function Lv(n){var e;return function(){return e||(e=new Promise(function(t){Promise.resolve().then(function(){e=void 0,t(n())})})),e}}function $v(n){var e=n.reduce(function(t,r){var i=t[r.name];return t[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,t},{});return Object.keys(e).map(function(t){return e[t]})}var Ml={placement:"bottom",modifiers:[],strategy:"absolute"};function _l(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function zv(n){n===void 0&&(n={});var e=n,t=e.defaultModifiers,r=t===void 0?[]:t,i=e.defaultOptions,s=i===void 0?Ml:i;return function(a,l,c){c===void 0&&(c=s);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},Ml,s),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},d=[],f=!1,h={state:u,setOptions:function(b){var k=typeof b=="function"?b(u.options):b;m(),u.options=Object.assign({},s,u.options,k),u.scrollParents={reference:Zn(a)?_r(a):a.contextElement?_r(a.contextElement):[],popper:_r(l)};var O=Pv($v([].concat(r,u.options.modifiers)));return u.orderedModifiers=O.filter(function(g){return g.enabled}),p(),h.update()},forceUpdate:function(){if(!f){var b=u.elements,k=b.reference,O=b.popper;if(!!_l(k,O)){u.rects={reference:Rv(k,qr(O),u.options.strategy==="fixed"),popper:ta(O)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(G){return u.modifiersData[G.name]=Object.assign({},G.data)});for(var g=0;g<u.orderedModifiers.length;g++){if(u.reset===!0){u.reset=!1,g=-1;continue}var _=u.orderedModifiers[g],A=_.fn,N=_.options,S=N===void 0?{}:N,W=_.name;typeof A=="function"&&(u=A({state:u,options:S,name:W,instance:h})||u)}}}},update:Lv(function(){return new Promise(function(y){h.forceUpdate(),y(u)})}),destroy:function(){m(),f=!0}};if(!_l(a,l))return h;h.setOptions(c).then(function(y){!f&&c.onFirstUpdate&&c.onFirstUpdate(y)});function p(){u.orderedModifiers.forEach(function(y){var b=y.name,k=y.options,O=k===void 0?{}:k,g=y.effect;if(typeof g=="function"){var _=g({state:u,name:b,instance:h,options:O}),A=function(){};d.push(_||A)}})}function m(){d.forEach(function(y){return y()}),d=[]}return h}}var Vv=[cv,Ov,lv,Oc,Sv,xv,_v,iv,wv],jv=zv({defaultModifiers:Vv}),Hv="tippy-box",Rc="tippy-content",qv="tippy-backdrop",Ic="tippy-arrow",Pc="tippy-svg-arrow",Zt={passive:!0,capture:!0},Lc=function(){return document.body};function qs(n,e,t){if(Array.isArray(n)){var r=n[e];return r==null?Array.isArray(t)?t[e]:t:r}return n}function oa(n,e){var t={}.toString.call(n);return t.indexOf("[object")===0&&t.indexOf(e+"]")>-1}function $c(n,e){return typeof n=="function"?n.apply(void 0,e):n}function Fl(n,e){if(e===0)return n;var t;return function(r){clearTimeout(t),t=setTimeout(function(){n(r)},e)}}function Wv(n){return n.split(/\s+/).filter(Boolean)}function Tn(n){return[].concat(n)}function Nl(n,e){n.indexOf(e)===-1&&n.push(e)}function Uv(n){return n.filter(function(e,t){return n.indexOf(e)===t})}function Kv(n){return n.split("-")[0]}function Ui(n){return[].slice.call(n)}function Bl(n){return Object.keys(n).reduce(function(e,t){return n[t]!==void 0&&(e[t]=n[t]),e},{})}function Fr(){return document.createElement("div")}function hs(n){return["Element","Fragment"].some(function(e){return oa(n,e)})}function Jv(n){return oa(n,"NodeList")}function Gv(n){return oa(n,"MouseEvent")}function Yv(n){return!!(n&&n._tippy&&n._tippy.reference===n)}function Xv(n){return hs(n)?[n]:Jv(n)?Ui(n):Array.isArray(n)?n:Ui(document.querySelectorAll(n))}function Ws(n,e){n.forEach(function(t){t&&(t.style.transitionDuration=e+"ms")})}function Rl(n,e){n.forEach(function(t){t&&t.setAttribute("data-state",e)})}function Qv(n){var e,t=Tn(n),r=t[0];return r!=null&&(e=r.ownerDocument)!=null&&e.body?r.ownerDocument:document}function Zv(n,e){var t=e.clientX,r=e.clientY;return n.every(function(i){var s=i.popperRect,o=i.popperState,a=i.props,l=a.interactiveBorder,c=Kv(o.placement),u=o.modifiersData.offset;if(!u)return!0;var d=c==="bottom"?u.top.y:0,f=c==="top"?u.bottom.y:0,h=c==="right"?u.left.x:0,p=c==="left"?u.right.x:0,m=s.top-r+d>l,y=r-s.bottom-f>l,b=s.left-t+h>l,k=t-s.right-p>l;return m||y||b||k})}function Us(n,e,t){var r=e+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(i){n[r](i,t)})}function Il(n,e){for(var t=e;t;){var r;if(n.contains(t))return!0;t=t.getRootNode==null||(r=t.getRootNode())==null?void 0:r.host}return!1}var at={isTouch:!1},Pl=0;function ey(){at.isTouch||(at.isTouch=!0,window.performance&&document.addEventListener("mousemove",zc))}function zc(){var n=performance.now();n-Pl<20&&(at.isTouch=!1,document.removeEventListener("mousemove",zc)),Pl=n}function ty(){var n=document.activeElement;if(Yv(n)){var e=n._tippy;n.blur&&!e.state.isVisible&&n.blur()}}function ny(){document.addEventListener("touchstart",ey,Zt),window.addEventListener("blur",ty)}var ry=typeof window<"u"&&typeof document<"u",iy=ry?!!window.msCrypto:!1,sy={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},oy={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},et=Object.assign({appendTo:Lc,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},sy,oy),ay=Object.keys(et),ly=function(e){var t=Object.keys(e);t.forEach(function(r){et[r]=e[r]})};function Vc(n){var e=n.plugins||[],t=e.reduce(function(r,i){var s=i.name,o=i.defaultValue;if(s){var a;r[s]=n[s]!==void 0?n[s]:(a=et[s])!=null?a:o}return r},{});return Object.assign({},n,t)}function uy(n,e){var t=e?Object.keys(Vc(Object.assign({},et,{plugins:e}))):ay,r=t.reduce(function(i,s){var o=(n.getAttribute("data-tippy-"+s)||"").trim();if(!o)return i;if(s==="content")i[s]=o;else try{i[s]=JSON.parse(o)}catch{i[s]=o}return i},{});return r}function Ll(n,e){var t=Object.assign({},e,{content:$c(e.content,[n])},e.ignoreAttributes?{}:uy(n,e.plugins));return t.aria=Object.assign({},et.aria,t.aria),t.aria={expanded:t.aria.expanded==="auto"?e.interactive:t.aria.expanded,content:t.aria.content==="auto"?e.interactive?null:"describedby":t.aria.content},t}var cy=function(){return"innerHTML"};function bo(n,e){n[cy()]=e}function $l(n){var e=Fr();return n===!0?e.className=Ic:(e.className=Pc,hs(n)?e.appendChild(n):bo(e,n)),e}function zl(n,e){hs(e.content)?(bo(n,""),n.appendChild(e.content)):typeof e.content!="function"&&(e.allowHTML?bo(n,e.content):n.textContent=e.content)}function Do(n){var e=n.firstElementChild,t=Ui(e.children);return{box:e,content:t.find(function(r){return r.classList.contains(Rc)}),arrow:t.find(function(r){return r.classList.contains(Ic)||r.classList.contains(Pc)}),backdrop:t.find(function(r){return r.classList.contains(qv)})}}function jc(n){var e=Fr(),t=Fr();t.className=Hv,t.setAttribute("data-state","hidden"),t.setAttribute("tabindex","-1");var r=Fr();r.className=Rc,r.setAttribute("data-state","hidden"),zl(r,n.props),e.appendChild(t),t.appendChild(r),i(n.props,n.props);function i(s,o){var a=Do(e),l=a.box,c=a.content,u=a.arrow;o.theme?l.setAttribute("data-theme",o.theme):l.removeAttribute("data-theme"),typeof o.animation=="string"?l.setAttribute("data-animation",o.animation):l.removeAttribute("data-animation"),o.inertia?l.setAttribute("data-inertia",""):l.removeAttribute("data-inertia"),l.style.maxWidth=typeof o.maxWidth=="number"?o.maxWidth+"px":o.maxWidth,o.role?l.setAttribute("role",o.role):l.removeAttribute("role"),(s.content!==o.content||s.allowHTML!==o.allowHTML)&&zl(c,n.props),o.arrow?u?s.arrow!==o.arrow&&(l.removeChild(u),l.appendChild($l(o.arrow))):l.appendChild($l(o.arrow)):u&&l.removeChild(u)}return{popper:e,onUpdate:i}}jc.$$tippy=!0;var dy=1,oi=[],Ks=[];function fy(n,e){var t=Ll(n,Object.assign({},et,Vc(Bl(e)))),r,i,s,o=!1,a=!1,l=!1,c=!1,u,d,f,h=[],p=Fl(Ur,t.interactiveDebounce),m,y=dy++,b=null,k=Uv(t.plugins),O={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},g={id:y,reference:n,popper:Fr(),popperInstance:b,props:t,state:O,plugins:k,clearDelayTimeouts:Xr,setProps:Qr,setContent:Zr,show:ld,hide:ud,hideWithInteractivity:cd,enable:ur,disable:Yr,unmount:dd,destroy:fd};if(!t.render)return g;var _=t.render(g),A=_.popper,N=_.onUpdate;A.setAttribute("data-tippy-root",""),A.id="tippy-"+g.id,g.popper=A,n._tippy=g,A._tippy=g;var S=k.map(function(D){return D.fn(g)}),W=n.hasAttribute("aria-expanded");return kn(),ee(),le(),ue("onCreate",[g]),t.showOnCreate&&lr(),A.addEventListener("mouseenter",function(){g.props.interactive&&g.state.isVisible&&g.clearDelayTimeouts()}),A.addEventListener("mouseleave",function(){g.props.interactive&&g.props.trigger.indexOf("mouseenter")>=0&&ye().addEventListener("mousemove",p)}),g;function G(){var D=g.props.touch;return Array.isArray(D)?D:[D,0]}function ie(){return G()[0]==="hold"}function ne(){var D;return!!((D=g.props.render)!=null&&D.$$tippy)}function J(){return m||n}function ye(){var D=J().parentNode;return D?Qv(D):document}function ae(){return Do(A)}function re(D){return g.state.isMounted&&!g.state.isVisible||at.isTouch||u&&u.type==="focus"?0:qs(g.props.delay,D?0:1,et.delay)}function le(D){D===void 0&&(D=!1),A.style.pointerEvents=g.props.interactive&&!D?"":"none",A.style.zIndex=""+g.props.zIndex}function ue(D,F,I){if(I===void 0&&(I=!0),S.forEach(function(U){U[D]&&U[D].apply(U,F)}),I){var Y;(Y=g.props)[D].apply(Y,F)}}function Z(){var D=g.props.aria;if(!!D.content){var F="aria-"+D.content,I=A.id,Y=Tn(g.props.triggerTarget||n);Y.forEach(function(U){var Ce=U.getAttribute(F);if(g.state.isVisible)U.setAttribute(F,Ce?Ce+" "+I:I);else{var He=Ce&&Ce.replace(I,"").trim();He?U.setAttribute(F,He):U.removeAttribute(F)}})}}function ee(){if(!(W||!g.props.aria.expanded)){var D=Tn(g.props.triggerTarget||n);D.forEach(function(F){g.props.interactive?F.setAttribute("aria-expanded",g.state.isVisible&&F===J()?"true":"false"):F.removeAttribute("aria-expanded")})}}function Ie(){ye().removeEventListener("mousemove",p),oi=oi.filter(function(D){return D!==p})}function st(D){if(!(at.isTouch&&(l||D.type==="mousedown"))){var F=D.composedPath&&D.composedPath()[0]||D.target;if(!(g.props.interactive&&Il(A,F))){if(Tn(g.props.triggerTarget||n).some(function(I){return Il(I,F)})){if(at.isTouch||g.state.isVisible&&g.props.trigger.indexOf("click")>=0)return}else ue("onClickOutside",[g,D]);g.props.hideOnClick===!0&&(g.clearDelayTimeouts(),g.hide(),a=!0,setTimeout(function(){a=!1}),g.state.isMounted||bt())}}}function Jt(){l=!0}function yt(){l=!1}function Ye(){var D=ye();D.addEventListener("mousedown",st,!0),D.addEventListener("touchend",st,Zt),D.addEventListener("touchstart",yt,Zt),D.addEventListener("touchmove",Jt,Zt)}function bt(){var D=ye();D.removeEventListener("mousedown",st,!0),D.removeEventListener("touchend",st,Zt),D.removeEventListener("touchstart",yt,Zt),D.removeEventListener("touchmove",Jt,Zt)}function Dn(D,F){xn(D,function(){!g.state.isVisible&&A.parentNode&&A.parentNode.contains(A)&&F()})}function Dt(D,F){xn(D,F)}function xn(D,F){var I=ae().box;function Y(U){U.target===I&&(Us(I,"remove",Y),F())}if(D===0)return F();Us(I,"remove",d),Us(I,"add",Y),d=Y}function Tt(D,F,I){I===void 0&&(I=!1);var Y=Tn(g.props.triggerTarget||n);Y.forEach(function(U){U.addEventListener(D,F,I),h.push({node:U,eventType:D,handler:F,options:I})})}function kn(){ie()&&(Tt("touchstart",sr,{passive:!0}),Tt("touchend",Kr,{passive:!0})),Wv(g.props.trigger).forEach(function(D){if(D!=="manual")switch(Tt(D,sr),D){case"mouseenter":Tt("mouseleave",Kr);break;case"focus":Tt(iy?"focusout":"blur",or);break;case"focusin":Tt("focusout",or);break}})}function Wr(){h.forEach(function(D){var F=D.node,I=D.eventType,Y=D.handler,U=D.options;F.removeEventListener(I,Y,U)}),h=[]}function sr(D){var F,I=!1;if(!(!g.state.isEnabled||ar(D)||a)){var Y=((F=u)==null?void 0:F.type)==="focus";u=D,m=D.currentTarget,ee(),!g.state.isVisible&&Gv(D)&&oi.forEach(function(U){return U(D)}),D.type==="click"&&(g.props.trigger.indexOf("mouseenter")<0||o)&&g.props.hideOnClick!==!1&&g.state.isVisible?I=!0:lr(D),D.type==="click"&&(o=!I),I&&!Y&&Gt(D)}}function Ur(D){var F=D.target,I=J().contains(F)||A.contains(F);if(!(D.type==="mousemove"&&I)){var Y=Mt().concat(A).map(function(U){var Ce,He=U._tippy,wn=(Ce=He.popperInstance)==null?void 0:Ce.state;return wn?{popperRect:U.getBoundingClientRect(),popperState:wn,props:t}:null}).filter(Boolean);Zv(Y,D)&&(Ie(),Gt(D))}}function Kr(D){var F=ar(D)||g.props.trigger.indexOf("click")>=0&&o;if(!F){if(g.props.interactive){g.hideWithInteractivity(D);return}Gt(D)}}function or(D){g.props.trigger.indexOf("focusin")<0&&D.target!==J()||g.props.interactive&&D.relatedTarget&&A.contains(D.relatedTarget)||Gt(D)}function ar(D){return at.isTouch?ie()!==D.type.indexOf("touch")>=0:!1}function Jr(){Gr();var D=g.props,F=D.popperOptions,I=D.placement,Y=D.offset,U=D.getReferenceClientRect,Ce=D.moveTransition,He=ne()?Do(A).arrow:null,wn=U?{getBoundingClientRect:U,contextElement:U.contextElement||J()}:n,pa={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(ei){var Cn=ei.state;if(ne()){var hd=ae(),bs=hd.box;["placement","reference-hidden","escaped"].forEach(function(ti){ti==="placement"?bs.setAttribute("data-placement",Cn.placement):Cn.attributes.popper["data-popper-"+ti]?bs.setAttribute("data-"+ti,""):bs.removeAttribute("data-"+ti)}),Cn.attributes.popper={}}}},Yt=[{name:"offset",options:{offset:Y}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!Ce}},pa];ne()&&He&&Yt.push({name:"arrow",options:{element:He,padding:3}}),Yt.push.apply(Yt,(F==null?void 0:F.modifiers)||[]),g.popperInstance=jv(wn,A,Object.assign({},F,{placement:I,onFirstUpdate:f,modifiers:Yt}))}function Gr(){g.popperInstance&&(g.popperInstance.destroy(),g.popperInstance=null)}function xt(){var D=g.props.appendTo,F,I=J();g.props.interactive&&D===Lc||D==="parent"?F=I.parentNode:F=$c(D,[I]),F.contains(A)||F.appendChild(A),g.state.isMounted=!0,Jr()}function Mt(){return Ui(A.querySelectorAll("[data-tippy-root]"))}function lr(D){g.clearDelayTimeouts(),D&&ue("onTrigger",[g,D]),Ye();var F=re(!0),I=G(),Y=I[0],U=I[1];at.isTouch&&Y==="hold"&&U&&(F=U),F?r=setTimeout(function(){g.show()},F):g.show()}function Gt(D){if(g.clearDelayTimeouts(),ue("onUntrigger",[g,D]),!g.state.isVisible){bt();return}if(!(g.props.trigger.indexOf("mouseenter")>=0&&g.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(D.type)>=0&&o)){var F=re(!1);F?i=setTimeout(function(){g.state.isVisible&&g.hide()},F):s=requestAnimationFrame(function(){g.hide()})}}function ur(){g.state.isEnabled=!0}function Yr(){g.hide(),g.state.isEnabled=!1}function Xr(){clearTimeout(r),clearTimeout(i),cancelAnimationFrame(s)}function Qr(D){if(!g.state.isDestroyed){ue("onBeforeUpdate",[g,D]),Wr();var F=g.props,I=Ll(n,Object.assign({},F,Bl(D),{ignoreAttributes:!0}));g.props=I,kn(),F.interactiveDebounce!==I.interactiveDebounce&&(Ie(),p=Fl(Ur,I.interactiveDebounce)),F.triggerTarget&&!I.triggerTarget?Tn(F.triggerTarget).forEach(function(Y){Y.removeAttribute("aria-expanded")}):I.triggerTarget&&n.removeAttribute("aria-expanded"),ee(),le(),N&&N(F,I),g.popperInstance&&(Jr(),Mt().forEach(function(Y){requestAnimationFrame(Y._tippy.popperInstance.forceUpdate)})),ue("onAfterUpdate",[g,D])}}function Zr(D){g.setProps({content:D})}function ld(){var D=g.state.isVisible,F=g.state.isDestroyed,I=!g.state.isEnabled,Y=at.isTouch&&!g.props.touch,U=qs(g.props.duration,0,et.duration);if(!(D||F||I||Y)&&!J().hasAttribute("disabled")&&(ue("onShow",[g],!1),g.props.onShow(g)!==!1)){if(g.state.isVisible=!0,ne()&&(A.style.visibility="visible"),le(),Ye(),g.state.isMounted||(A.style.transition="none"),ne()){var Ce=ae(),He=Ce.box,wn=Ce.content;Ws([He,wn],0)}f=function(){var Yt;if(!(!g.state.isVisible||c)){if(c=!0,A.offsetHeight,A.style.transition=g.props.moveTransition,ne()&&g.props.animation){var ys=ae(),ei=ys.box,Cn=ys.content;Ws([ei,Cn],U),Rl([ei,Cn],"visible")}Z(),ee(),Nl(Ks,g),(Yt=g.popperInstance)==null||Yt.forceUpdate(),ue("onMount",[g]),g.props.animation&&ne()&&Dt(U,function(){g.state.isShown=!0,ue("onShown",[g])})}},xt()}}function ud(){var D=!g.state.isVisible,F=g.state.isDestroyed,I=!g.state.isEnabled,Y=qs(g.props.duration,1,et.duration);if(!(D||F||I)&&(ue("onHide",[g],!1),g.props.onHide(g)!==!1)){if(g.state.isVisible=!1,g.state.isShown=!1,c=!1,o=!1,ne()&&(A.style.visibility="hidden"),Ie(),bt(),le(!0),ne()){var U=ae(),Ce=U.box,He=U.content;g.props.animation&&(Ws([Ce,He],Y),Rl([Ce,He],"hidden"))}Z(),ee(),g.props.animation?ne()&&Dn(Y,g.unmount):g.unmount()}}function cd(D){ye().addEventListener("mousemove",p),Nl(oi,p),p(D)}function dd(){g.state.isVisible&&g.hide(),g.state.isMounted&&(Gr(),Mt().forEach(function(D){D._tippy.unmount()}),A.parentNode&&A.parentNode.removeChild(A),Ks=Ks.filter(function(D){return D!==g}),g.state.isMounted=!1,ue("onHidden",[g]))}function fd(){g.state.isDestroyed||(g.clearDelayTimeouts(),g.unmount(),Wr(),delete n._tippy,g.state.isDestroyed=!0,ue("onDestroy",[g]))}}function ir(n,e){e===void 0&&(e={});var t=et.plugins.concat(e.plugins||[]);ny();var r=Object.assign({},e,{plugins:t}),i=Xv(n),s=i.reduce(function(o,a){var l=a&&fy(a,r);return l&&o.push(l),o},[]);return hs(n)?s[0]:s}ir.defaultProps=et;ir.setDefaultProps=ly;ir.currentInput=at;Object.assign({},Oc,{effect:function(e){var t=e.state,r={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(t.elements.popper.style,r.popper),t.styles=r,t.elements.arrow&&Object.assign(t.elements.arrow.style,r.arrow)}});ir.setDefaultProps({render:jc});class hy{constructor({editor:e,element:t,view:r,tippyOptions:i={},shouldShow:s}){this.preventHide=!1,this.shouldShow=({view:o,state:a,from:l,to:c})=>{const{doc:u,selection:d}=a,{empty:f}=d,h=!u.textBetween(l,c).length&&mc(a.selection);return!(!o.hasFocus()||f||h)},this.mousedownHandler=()=>{this.preventHide=!0},this.dragstartHandler=()=>{this.hide()},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:o})=>{var a;if(this.preventHide){this.preventHide=!1;return}(o==null?void 0:o.relatedTarget)&&((a=this.element.parentNode)===null||a===void 0?void 0:a.contains(o.relatedTarget))||this.hide()},this.editor=e,this.element=t,this.view=r,s&&(this.shouldShow=s),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.addEventListener("dragstart",this.dragstartHandler),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.tippyOptions=i,this.element.remove(),this.element.style.visibility="visible"}createTooltip(){const{element:e}=this.editor.options,t=!!e.parentElement;this.tippy||!t||(this.tippy=ir(e,{duration:0,getReferenceClientRect:null,content:this.element,interactive:!0,trigger:"manual",placement:"top",hideOnClick:"toggle",...this.tippyOptions}),this.tippy.popper.firstChild&&this.tippy.popper.firstChild.addEventListener("blur",r=>{this.blurHandler({event:r})}))}update(e,t){var r,i,s;const{state:o,composing:a}=e,{doc:l,selection:c}=o,u=t&&t.doc.eq(l)&&t.selection.eq(c);if(a||u)return;this.createTooltip();const{ranges:d}=c,f=Math.min(...d.map(m=>m.$from.pos)),h=Math.max(...d.map(m=>m.$to.pos));if(!((r=this.shouldShow)===null||r===void 0?void 0:r.call(this,{editor:this.editor,view:e,state:o,oldState:t,from:f,to:h}))){this.hide();return}(i=this.tippy)===null||i===void 0||i.setProps({getReferenceClientRect:((s=this.tippyOptions)===null||s===void 0?void 0:s.getReferenceClientRect)||(()=>{if(Ag(o.selection)){const m=e.nodeDOM(f);if(m)return m.getBoundingClientRect()}return xc(e,f,h)})}),this.show()}show(){var e;(e=this.tippy)===null||e===void 0||e.show()}hide(){var e;(e=this.tippy)===null||e===void 0||e.hide()}destroy(){var e;(e=this.tippy)===null||e===void 0||e.destroy(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.removeEventListener("dragstart",this.dragstartHandler),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler)}}const Hc=n=>new je({key:typeof n.pluginKey=="string"?new vt(n.pluginKey):n.pluginKey,view:e=>new hy({view:e,...n})});rt.create({name:"bubbleMenu",addOptions(){return{element:null,tippyOptions:{},pluginKey:"bubbleMenu",shouldShow:null}},addProseMirrorPlugins(){return this.options.element?[Hc({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,tippyOptions:this.options.tippyOptions,shouldShow:this.options.shouldShow})]:[]}});class py{constructor({editor:e,element:t,view:r,tippyOptions:i={},shouldShow:s}){this.preventHide=!1,this.shouldShow=({view:o,state:a})=>{const{selection:l}=a,{$anchor:c,empty:u}=l,d=c.depth===1,f=c.parent.isTextblock&&!c.parent.type.spec.code&&!c.parent.textContent;return!(!o.hasFocus()||!u||!d||!f)},this.mousedownHandler=()=>{this.preventHide=!0},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:o})=>{var a;if(this.preventHide){this.preventHide=!1;return}(o==null?void 0:o.relatedTarget)&&((a=this.element.parentNode)===null||a===void 0?void 0:a.contains(o.relatedTarget))||this.hide()},this.editor=e,this.element=t,this.view=r,s&&(this.shouldShow=s),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.tippyOptions=i,this.element.remove(),this.element.style.visibility="visible"}createTooltip(){const{element:e}=this.editor.options,t=!!e.parentElement;this.tippy||!t||(this.tippy=ir(e,{duration:0,getReferenceClientRect:null,content:this.element,interactive:!0,trigger:"manual",placement:"right",hideOnClick:"toggle",...this.tippyOptions}),this.tippy.popper.firstChild&&this.tippy.popper.firstChild.addEventListener("blur",r=>{this.blurHandler({event:r})}))}update(e,t){var r,i,s;const{state:o}=e,{doc:a,selection:l}=o,{from:c,to:u}=l;if(t&&t.doc.eq(a)&&t.selection.eq(l))return;if(this.createTooltip(),!((r=this.shouldShow)===null||r===void 0?void 0:r.call(this,{editor:this.editor,view:e,state:o,oldState:t}))){this.hide();return}(i=this.tippy)===null||i===void 0||i.setProps({getReferenceClientRect:((s=this.tippyOptions)===null||s===void 0?void 0:s.getReferenceClientRect)||(()=>xc(e,c,u))}),this.show()}show(){var e;(e=this.tippy)===null||e===void 0||e.show()}hide(){var e;(e=this.tippy)===null||e===void 0||e.hide()}destroy(){var e;(e=this.tippy)===null||e===void 0||e.destroy(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler)}}const qc=n=>new je({key:typeof n.pluginKey=="string"?new vt(n.pluginKey):n.pluginKey,view:e=>new py({view:e,...n})});rt.create({name:"floatingMenu",addOptions(){return{element:null,tippyOptions:{},pluginKey:"floatingMenu",shouldShow:null}},addProseMirrorPlugins(){return this.options.element?[qc({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,tippyOptions:this.options.tippyOptions,shouldShow:this.options.shouldShow})]:[]}});Vr({name:"BubbleMenu",props:{pluginKey:{type:null,default:"bubbleMenu"},editor:{type:Object,required:!0},tippyOptions:{type:Object,default:()=>({})},shouldShow:{type:Function,default:null}},setup(n,{slots:e}){const t=fe(null);return Yi(()=>{const{pluginKey:r,editor:i,tippyOptions:s,shouldShow:o}=n;i.registerPlugin(Hc({pluginKey:r,editor:i,element:t.value,tippyOptions:s,shouldShow:o}))}),Xi(()=>{const{pluginKey:r,editor:i}=n;i.unregisterPlugin(r)}),()=>{var r;return un("div",{ref:t},(r=e.default)===null||r===void 0?void 0:r.call(e))}}});function Vl(n){return xd((e,t)=>({get(){return e(),n},set(r){n=r,requestAnimationFrame(()=>{requestAnimationFrame(()=>{t()})})}}))}class my extends xg{constructor(e={}){return super(e),this.vueRenderers=yd(new Map),this.contentComponent=null,this.reactiveState=Vl(this.view.state),this.reactiveExtensionStorage=Vl(this.extensionStorage),this.on("transaction",()=>{this.reactiveState.value=this.view.state,this.reactiveExtensionStorage.value=this.extensionStorage}),bd(this)}get state(){return this.reactiveState?this.reactiveState.value:this.view.state}get storage(){return this.reactiveExtensionStorage?this.reactiveExtensionStorage.value:super.storage}registerPlugin(e,t){super.registerPlugin(e,t),this.reactiveState.value=this.view.state}unregisterPlugin(e){super.unregisterPlugin(e),this.reactiveState.value=this.view.state}}const gy=Vr({name:"EditorContent",props:{editor:{default:null,type:Object}},setup(n){const e=fe(),t=Dd();return md(()=>{const r=n.editor;r&&r.options.element&&e.value&&Ql(()=>{if(!e.value||!r.options.element.firstChild)return;const i=V(e.value);e.value.append(...r.options.element.childNodes),r.contentComponent=t.ctx._,r.setOptions({element:i}),r.createNodeViews()})}),Xi(()=>{const r=n.editor;if(!r||(r.isDestroyed||r.view.setProps({nodeViews:{}}),r.contentComponent=null,!r.options.element.firstChild))return;const i=document.createElement("div");i.append(...r.options.element.childNodes),r.setOptions({element:i})}),{rootEl:e}},render(){const n=[];return this.editor&&this.editor.vueRenderers.forEach(e=>{const t=un(gd,{to:e.teleportElement,key:e.id},un(e.component,{ref:e.id,...e.props}));n.push(t)}),un("div",{ref:e=>{this.rootEl=e}},...n)}});Vr({name:"FloatingMenu",props:{pluginKey:{type:null,default:"floatingMenu"},editor:{type:Object,required:!0},tippyOptions:{type:Object,default:()=>({})},shouldShow:{type:Function,default:null}},setup(n,{slots:e}){const t=fe(null);return Yi(()=>{const{pluginKey:r,editor:i,tippyOptions:s,shouldShow:o}=n;i.registerPlugin(qc({pluginKey:r,editor:i,element:t.value,tippyOptions:s,shouldShow:o}))}),Xi(()=>{const{pluginKey:r,editor:i}=n;i.unregisterPlugin(r)}),()=>{var r;return un("div",{ref:t},(r=e.default)===null||r===void 0?void 0:r.call(e))}}});Vr({props:{as:{type:String,default:"div"}},render(){return un(this.as,{style:{whiteSpace:"pre-wrap"},"data-node-view-content":""})}});Vr({props:{as:{type:String,default:"div"}},inject:["onDragStart","decorationClasses"],render(){var n,e;return un(this.as,{class:this.decorationClasses.value,style:{whiteSpace:"normal"},"data-node-view-wrapper":"",onDragstart:this.onDragStart},(e=(n=this.$slots).default)===null||e===void 0?void 0:e.call(n))}});const vy=(n={})=>{const e=vd();return Yi(()=>{e.value=new my(n)}),Xi(()=>{var t;(t=e.value)===null||t===void 0||t.destroy()}),e},aa={__name:"EditorReadOnly",props:{value:{required:!0}},setup(n){const e=n,{defaultExtensions:t}=ds(),r=vy({editable:!1,content:e.value,extensions:t});return kd(()=>e.value,()=>{r.value.commands.setContent(e.value)}),(i,s)=>(x(),K(V(gy),{editor:V(r)},null,8,["editor"]))}},yy={class:"absolute right-0 top-0 -mt-sm -mr-xs"},by={class:"flex items-center justify-center p-2 w-7 h-7 rounded-full bg-white border border-gray-200"},Dy={class:"flex items-start"},xy={class:"mr-sm"},ky={class:"inline-flex justify-center items-center flex-shrink-0 w-10 h-10 rounded-full"},wy=["src"],Cy={class:"w-full"},Ey={class:"flex items-center"},Sy={class:"font-medium mr-xs"},Ay={class:"text-gray-400"},Oy=v("div",{class:"mt-5 flex items-center justify-between"},[v("div",{class:"flex items-center"},[v("svg",{class:"w-5 h-5",viewBox:"0 0 24 24","aria-hidden":"true"},[v("g",null,[v("path",{d:"M14.046 2.242l-4.148-.01h-.002c-4.374 0-7.8 3.427-7.8 7.802 0 4.098 3.186 7.206 7.465 7.37v3.828c0 .108.044.286.12.403.142.225.384.347.632.347.138 0 .277-.038.402-.118.264-.168 6.473-4.14 8.088-5.506 1.902-1.61 3.04-3.97 3.043-6.312v-.017c-.006-4.367-3.43-7.787-7.8-7.788zm3.787 12.972c-1.134.96-4.862 3.405-6.772 4.643V16.67c0-.414-.335-.75-.75-.75h-.396c-3.66 0-6.318-2.476-6.318-5.886 0-3.534 2.768-6.302 6.3-6.302l4.147.01h.002c3.532 0 6.3 2.766 6.302 6.296-.003 1.91-.942 3.844-2.514 5.176z"})])]),v("div",{class:"ml-xs"},"0")]),v("div",{class:"flex items-center"},[v("svg",{class:"w-5 h-5",viewBox:"0 0 24 24","aria-hidden":"true"},[v("g",null,[v("path",{d:"M23.77 15.67c-.292-.293-.767-.293-1.06 0l-2.22 2.22V7.65c0-2.068-1.683-3.75-3.75-3.75h-5.85c-.414 0-.75.336-.75.75s.336.75.75.75h5.85c1.24 0 2.25 1.01 2.25 2.25v10.24l-2.22-2.22c-.293-.293-.768-.293-1.06 0s-.294.768 0 1.06l3.5 3.5c.145.147.337.22.53.22s.383-.072.53-.22l3.5-3.5c.294-.292.294-.767 0-1.06zm-10.66 3.28H7.26c-1.24 0-2.25-1.01-2.25-2.25V6.46l2.22 2.22c.148.147.34.22.532.22s.384-.073.53-.22c.293-.293.293-.768 0-1.06l-3.5-3.5c-.293-.294-.768-.294-1.06 0l-3.5 3.5c-.294.292-.294.767 0 1.06s.767.293 1.06 0l2.22-2.22V16.7c0 2.068 1.683 3.75 3.75 3.75h5.85c.414 0 .75-.336.75-.75s-.337-.75-.75-.75z"})])]),v("div",{class:"ml-xs"},"27")]),v("div",{class:"flex items-center"},[v("svg",{class:"w-5 h-5",viewBox:"0 0 24 24","aria-hidden":"true"},[v("g",null,[v("path",{d:"M12 21.638h-.014C9.403 21.59 1.95 14.856 1.95 8.478c0-3.064 2.525-5.754 5.403-5.754 2.29 0 3.83 1.58 4.646 2.73.814-1.148 2.354-2.73 4.645-2.73 2.88 0 5.404 2.69 5.404 5.755 0 6.376-7.454 13.11-10.037 13.157H12zM7.354 4.225c-2.08 0-3.903 1.988-3.903 4.255 0 5.74 7.034 11.596 8.55 11.658 1.518-.062 8.55-5.917 8.55-11.658 0-2.267-1.823-4.255-3.903-4.255-2.528 0-3.94 2.936-3.952 2.965-.23.562-1.156.562-1.387 0-.014-.03-1.425-2.965-3.954-2.965z"})])]),v("div",{class:"ml-xs"},"312")]),v("div",null,[v("svg",{class:"w-5 h-5",viewBox:"0 0 24 24","data-testid":"iconOutgoing","aria-hidden":"true"},[v("g",null,[v("path",{d:"M17.53 7.47l-5-5c-.293-.293-.768-.293-1.06 0l-5 5c-.294.293-.294.768 0 1.06s.767.294 1.06 0l3.72-3.72V15c0 .414.336.75.75.75s.75-.336.75-.75V4.81l3.72 3.72c.146.147.338.22.53.22s.384-.072.53-.22c.293-.293.293-.767 0-1.06z"}),v("path",{d:"M19.708 21.944H4.292C3.028 21.944 2 20.916 2 19.652V14c0-.414.336-.75.75-.75s.75.336.75.75v5.652c0 .437.355.792.792.792h15.416c.437 0 .792-.355.792-.792V14c0-.414.336-.75.75-.75s.75.336.75.75v5.652c0 1.264-1.028 2.292-2.292 2.292z"})])])])],-1),Ty={__name:"PostPreviewTwitter",props:{name:{required:!0,type:String},username:{required:!0,type:String},image:{required:!0,type:String},content:{required:!0,type:Array},textLimitReached:{type:Boolean,default:!1}},setup(n){const e=n,{isDocEmpty:t}=ds(),r=At(()=>e.content[0]);return(i,s)=>(x(),E(se,null,[n.textLimitReached?(x(),K(qn,{key:0,variant:"error",closeable:!1,class:"mb-xs"},{default:$(()=>[ce(" ["+we(n.name)+"] : You have reached the maximum character limit ",1)]),_:1})):L("",!0),V(r).media.length>4?(x(),K(qn,{key:1,variant:"warning",class:"mb-xs"},{default:$(()=>[ce("["+we(n.name)+"]: Twitter accepts a maximum of 4 pictures. Don't worry, if you have selected several pictures, Mixpost will only post the first 4.",1)]),_:1})):L("",!0),R(Qi,{class:Ve([{"border-red-500":n.textLimitReached},"relative"])},{default:$(()=>[v("div",yy,[v("div",by,[v("div",null,[R(Eo,{provider:"twitter",class:"!w-5 !h-5"})])])]),v("div",Dy,[v("div",xy,[v("span",ky,[v("img",{src:n.image,class:"object-cover w-full h-full rounded-full",alt:""},null,8,wy)])]),v("div",Cy,[v("div",Ey,[v("div",Sy,we(n.name),1),v("div",Ay,"@"+we(n.username),1)]),R(aa,{value:V(r).body,class:Ve({"mt-xs":!V(t)(V(r).body),"mb-xs":V(r).media.length})},null,8,["value","class"]),R(P0,{media:V(r).media},null,8,["media"]),Oy])])]),_:1},8,["class"])],64))}},My="/vendor/mixpost/assets/fb-like.59c2ede2.svg",_y="/vendor/mixpost/assets/fb-wow.ca50712c.svg",Fy=["src","alt","title"],sn={__name:"CoverStyle",props:{src:{type:String,required:!0},alt:{type:String,default:""},title:{type:String,default:""}},emits:["load"],setup(n){return(e,t)=>(x(),E("img",{src:n.src,class:"h-full w-full object-cover",alt:n.alt,title:n.title,onLoad:t[0]||(t[0]=r=>e.$emit("load",r))},null,40,Fy))}},Ny={class:"w-full h-full absolute flex items-center justify-center"},By={key:1,class:"w-auto h-full mx-auto",controls:"",autoplay:"",media:""},Ry=["src","type"],Iy=ce(" Your browser does not support the video tag. "),Py={__name:"Video",props:{media:{type:Object,required:!0}},setup(n){const e=fe(!1);return(t,r)=>(x(),K(St,null,{default:$(()=>[v("div",Ny,[e.value?L("",!0):(x(),E("button",{key:0,onClick:r[0]||(r[0]=i=>e.value=!0),class:"w-16 h-16 border-2 border-white rounded-full flex items-center justify-center text-white"},[R(Qo,{class:"!w-10 !h-10"})]))]),e.value?L("",!0):(x(),K(sn,{key:0,src:n.media.thumb_url,alt:"Image"},null,8,["src"])),e.value?(x(),E("video",By,[v("source",{src:n.media.url,type:n.media.mime_type},null,8,Ry),Iy])):L("",!0)]),_:1}))}},Ly={__name:"OneImage",props:{media:{type:Object,required:!0}},setup(n){return(e,t)=>(x(),K(St,null,{default:$(()=>[R(sn,{src:n.media.thumb_url,alt:"Image"},null,8,["src"])]),_:1}))}},$y={key:1,class:"block relative"},zy={class:"absolute block top-0 left-0 bottom-0 right-0"},Dr={__name:"AspectRatioBox",props:{ratio:{type:Number,default:1}},setup(n){return(e,t)=>(x(),E(se,null,[n.ratio?L("",!0):Hn(e.$slots,"default",{key:0}),n.ratio?(x(),E("div",$y,[v("div",zy,[Hn(e.$slots,"default")]),v("div",{class:"block",style:he({paddingBottom:1/n.ratio*100+"%"})},null,4)])):L("",!0)],64))}},Vy={class:"flex flex-row gap-1"},jy={__name:"TwoImage",props:{media:{type:Array,required:!0}},setup(n){return(e,t)=>(x(),E("div",Vy,[(x(!0),E(se,null,_e(n.media,r=>(x(),E("div",{key:n.media.id,class:"w-1/2 grow-0"},[R(St,null,{default:$(()=>[R(Dr,null,{default:$(()=>[R(sn,{src:r.thumb_url},null,8,["src"])]),_:2},1024)]),_:2},1024)]))),128))]))}},Hy=["src"],qy={key:0,class:"flex flex-wrap gap-1"},Wy={class:"w-full h-full flex grow-0 gap-1"},Uy={class:"w-full flex grow-0 gap-1"},Ky={key:0,class:"absolute top-0 right-0 bottom-0 left-0 flex items-center justify-center bg-black bg-opacity-60"},Jy={class:"font-semibold text-3xl text-white"},Gy={class:"flex flex-row gap-1"},Yy={class:"flex flex-wrap gap-1"},Xy={__name:"ThreeAndMoreImage",props:{media:{type:Array,required:!0}},setup(n){const e=fe(null),t=fe(null),r=()=>{if(!e.value)return;const i=e.value.naturalHeight>e.value.naturalWidth?"VERTICAL":"HORIZONTAL";t.value!==i&&(t.value=i)};return(i,s)=>(x(),E(se,null,[v("img",{ref_key:"firstImageRef",ref:e,src:n.media[0].thumb_url,onLoad:r,alt:"Image",class:"hidden"},null,40,Hy),t.value==="HORIZONTAL"||n.media.length>4?(x(),E("div",qy,[v("div",Wy,[(x(!0),E(se,null,_e(n.media.slice(0,n.media.length<5?1:2),o=>(x(),K(St,{key:o.id},{default:$(()=>[R(Dr,{ratio:n.media.length<5?null:1},{default:$(()=>[R(sn,{src:o.thumb_url},null,8,["src"])]),_:2},1032,["ratio"])]),_:2},1024))),128))]),v("div",Uy,[(x(!0),E(se,null,_e(n.media.slice(n.media.length<5?1:2,5),(o,a)=>(x(),K(St,null,{default:$(()=>[R(Dr,null,{default:$(()=>[R(sn,{src:o.thumb_url},null,8,["src"])]),_:2},1024),a===2&&n.media.length>5?(x(),E("div",Ky,[v("span",Jy,"+"+we(n.media.length-5),1)])):L("",!0)]),_:2},1024))),256))])])):(x(),K(Dr,{key:1},{default:$(()=>[v("div",Gy,[v("div",{class:Ve(["flex grow-0",{"w-1/2":n.media.length===3,"w-2/3":n.media.length>3}])},[R(St,null,{default:$(()=>[R(sn,{src:n.media[0].thumb_url},null,8,["src"])]),_:1})],2),v("div",{class:Ve(["block",{"w-1/2":n.media.length===3,"w-1/3":n.media.length>3}])},[v("div",Yy,[(x(!0),E(se,null,_e(n.media.slice(1),o=>(x(),K(St,null,{default:$(()=>[R(Dr,null,{default:$(()=>[R(sn,{src:o.thumb_url},null,8,["src"])]),_:2},1024)]),_:2},1024))),256))])],2)])]),_:1}))],64))}},Qy={key:0},Zy={key:0,class:"rounded-md overflow-hidden"},eb={key:1,class:"rounded-md overflow-hidden"},tb={__name:"FacebookGallery",props:{media:{type:Array,required:!0}},setup(n){return(e,t)=>n.media.length?(x(),E("div",Qy,[n.media[0].is_video?(x(),E("div",Zy,[R(Py,{media:n.media[0]},null,8,["media"])])):(x(),E("div",eb,[n.media.length===1?(x(),K(Ly,{key:0,media:n.media[0]},null,8,["media"])):L("",!0),n.media.length===2?(x(),K(jy,{key:1,media:n.media},null,8,["media"])):L("",!0),n.media.length>2?(x(),K(Xy,{key:2,media:n.media},null,8,["media"])):L("",!0)]))])):L("",!0)}},Js="/vendor/mixpost/assets/fb-icons.855a0fcf.png";const nb={class:"absolute right-0 top-0 -mt-sm -mr-xs"},rb={class:"flex items-center justify-center p-2 w-7 h-7 rounded-full bg-white border border-gray-200"},ib={class:"flex items-center"},sb={class:"inline-flex justify-center items-center flex-shrink-0 w-10 h-10 rounded-full mr-sm"},ob=["src"],ab={class:"flex flex-col"},lb={class:"font-medium mr-xs"},ub=v("div",{class:"text-gray-400 text-sm"},"19h",-1),cb={class:"w-full"},db=v("div",{class:"mt-5 flex items-center justify-between"},[v("div",{class:"flex items-center"},[v("div",{class:"flex mr-xs"},[v("img",{src:My,class:"w-5 h-5 z-10",alt:""}),v("img",{src:_y,class:"w-5 h-5 -ml-1",alt:""})]),v("div",{class:"text-gray-500"},"116")]),v("div",{class:"text-gray-500"},"0 comments")],-1),fb={class:"mt-5 flex items-center justify-around border-t border-b border-gray-200 text-gray-500 py-2"},hb={class:"flex items-center"},pb=v("span",{class:"ml-1 font-semibold"},"Like",-1),mb={class:"flex items-center"},gb=v("span",{class:"ml-1 font-semibold"},"Comment",-1),vb={class:"flex items-center"},yb=v("span",{class:"ml-1 font-semibold"},"Share",-1),jl={__name:"PostPreviewFacebook",props:{name:{required:!0,type:String},username:{required:!0,type:String},image:{required:!0,type:String},content:{required:!0,type:Array},textLimitReached:{type:Boolean,default:!1}},setup(n){const e=n,{isDocEmpty:t}=ds(),r=At(()=>e.content[0]);return(i,s)=>(x(),E(se,null,[n.textLimitReached?(x(),K(qn,{key:0,variant:"error",closeable:!1,class:"mb-xs"},{default:$(()=>[ce("["+we(n.name)+"] : You have reached the maximum character limit ",1)]),_:1})):L("",!0),R(Qi,{class:Ve([{"border-red-500":n.textLimitReached},"relative"])},{default:$(()=>[v("div",nb,[v("div",rb,[v("div",null,[R(Eo,{provider:"facebook",class:"!w-5 !h-5"})])])]),v("div",ib,[v("span",sb,[v("img",{src:n.image,class:"object-cover w-full h-full rounded-full",alt:""},null,8,ob)]),v("div",ab,[v("div",lb,we(n.name),1),ub])]),v("div",cb,[R(aa,{value:V(r).body,class:Ve({"mt-xs":!V(t)(V(r).body),"mb-xs":V(r).media.length})},null,8,["value","class"]),R(tb,{media:V(r).media},null,8,["media"])]),db,v("div",fb,[v("div",hb,[v("i",{style:he({backgroundImage:`url(${V(Js)})`,backgroundPosition:"0px -342px",backgroundSize:"25px 867px"}),class:"facebook-toolbar-icon"},null,4),pb]),v("div",mb,[v("i",{style:he({backgroundImage:`url(${V(Js)})`,backgroundPosition:"0px -304px",backgroundSize:"25px 867px"}),class:"facebook-toolbar-icon"},null,4),gb]),v("div",vb,[v("i",{style:he({backgroundImage:`url(${V(Js)})`,backgroundPosition:"0px -361px",backgroundSize:"25px 867px"}),class:"facebook-toolbar-icon"},null,4),yb])])]),_:1},8,["class"])],64))}},bb={class:"h-[308.25px]"},Db={class:"w-full h-full inset-0 rounded-lg bg-black relative"},xb={class:"w-full h-full absolute flex items-center justify-center"},kb=["src"],wb={key:1,class:"w-auto h-full mx-auto",controls:"",autoplay:"",media:""},Cb=["src","type"],Eb=ce(" Your browser does not support the video tag. "),Sb={__name:"Video",props:{media:{type:Object,required:!0}},setup(n){const e=fe(!1);return(t,r)=>(x(),E("div",bb,[v("div",Db,[v("div",xb,[e.value?L("",!0):(x(),E("button",{key:0,onClick:r[0]||(r[0]=i=>e.value=!0),class:"w-16 h-16 border-2 border-white rounded-full flex items-center justify-center text-white bg-black bg-opacity-50"},[R(Qo,{class:"!w-10 !h-10"})]))]),e.value?L("",!0):(x(),E("img",{key:0,src:n.media.thumb_url,draggable:"false",class:"h-full mx-auto",alt:"Image"},null,8,kb)),e.value?(x(),E("video",wb,[v("source",{src:n.media.url,type:n.media.mime_type},null,8,Cb),Eb])):L("",!0)])]))}},Ab={class:"h-[308.25px]"},Ob={class:"w-full h-full inset-0 rounded-lg relative"},Tb=["src"],Mb={__name:"OneImage",props:{media:{type:Object,required:!0}},setup(n){return(e,t)=>(x(),E("div",Ab,[v("div",Ob,[v("img",{src:n.media.thumb_url,draggable:"false",class:"rounded-lg h-full w-full object-cover object-center",alt:"Image"},null,8,Tb)])]))}},_b=v("div",{class:"block w-full",style:{"padding-bottom":"56.25%"}},null,-1),Fb={class:"flex flex-row gap-1 absolute top-0 left-0 w-full h-full"},Nb={class:"absolute flex flex-col top-0 bottom-0 left-0 right-0 overflow-hidden"},Bb={__name:"TwoImage",props:{media:{type:Array,required:!0}},setup(n){return(e,t)=>(x(),K(St,null,{default:$(()=>[_b,v("div",Fb,[(x(!0),E(se,null,_e(n.media,r=>(x(),E("div",{key:n.media.id,class:"flex-grow basis-0 relative w-full h-full basis-auto"},[v("div",Nb,[v("div",{class:"bg-cover bg-center h-full w-full",style:he({backgroundImage:"url("+r.thumb_url+")"})},null,4)])]))),128))])]),_:1}))}},Rb={class:"block relative"},Ib=v("div",{class:"block w-full",style:{"padding-bottom":"56.25%"}},null,-1),Pb={class:"flex flex-row gap-1 absolute top-0 left-0 w-full h-full"},Lb={class:"flex flex-col flex-grow basis-0"},$b={class:"flex-grow basis-0 relative w-full h-full basis-auto"},zb={class:"absolute flex flex-col top-0 bottom-0 left-0 right-0 overflow-hidden"},Vb={class:"flex flex-col flex-grow gap-1 basis-0"},jb={class:"absolute flex flex-col top-0 bottom-0 left-0 right-0 overflow-hidden"},Hb={__name:"ThreeImage",props:{media:{type:Array,required:!0}},setup(n){return(e,t)=>(x(),E("div",Rb,[Ib,v("div",Pb,[v("div",Lb,[v("div",$b,[v("div",zb,[v("div",{class:"bg-cover bg-center h-full w-full rounded-tl-xl rounded-bl-xl",style:he({backgroundImage:"url("+n.media[0].thumb_url+")"})},null,4)])])]),v("div",Vb,[(x(!0),E(se,null,_e(n.media.slice(1),r=>(x(),E("div",{key:r.id,class:"flex-grow basis-0 relative w-full h-full basis-auto"},[v("div",jb,[v("div",{class:"bg-cover bg-center h-full w-full",style:he({backgroundImage:"url("+r.thumb_url+")"})},null,4)])]))),128))])])]))}},qb={class:"block relative overflow-hidden"},Wb=v("div",{class:"block w-full",style:{"padding-bottom":"56.25%"}},null,-1),Ub={class:"flex flex-col gap-1 absolute top-0 left-0 w-full h-full"},Kb={class:"flex flex-row flex-grow gap-1 basis-0"},Jb={class:"absolute flex flex-col top-0 bottom-0 left-0 right-0 overflow-hidden"},Gb={class:"flex flex-row flex-grow gap-1 basis-0"},Yb={class:"absolute flex flex-col top-0 bottom-0 left-0 right-0 overflow-hidden"},Xb={__name:"FourImage",props:{media:{type:Array,required:!0}},setup(n){return(e,t)=>(x(),E("div",qb,[Wb,v("div",Ub,[v("div",Kb,[(x(!0),E(se,null,_e(n.media.slice(0,2),r=>(x(),E("div",{key:r.id,class:"flex-grow basis-0 relative w-full h-full basis-auto"},[v("div",Jb,[v("div",{class:"bg-cover bg-center h-full w-full",style:he({backgroundImage:"url("+r.thumb_url+")"})},null,4)])]))),128))]),v("div",Gb,[(x(!0),E(se,null,_e(n.media.slice(2,4),r=>(x(),E("div",{key:r.id,class:"flex-grow basis-0 relative w-full h-full basis-auto"},[v("div",Yb,[v("div",{class:"bg-cover bg-center h-full w-full",style:he({backgroundImage:"url("+r.thumb_url+")"})},null,4)])]))),128))])])]))}},Qb={key:0},Zb={key:0,class:"overflow-hidden rounded-md"},e1={key:1,class:"overflow-hidden rounded-md"},t1={__name:"MastodonGallery",props:{media:{type:Array,required:!0}},setup(n){return(e,t)=>n.media.length?(x(),E("div",Qb,[n.media[0].is_video?(x(),E("div",Zb,[R(Sb,{media:n.media[0]},null,8,["media"])])):(x(),E("div",e1,[n.media.length===1?(x(),K(Mb,{key:0,media:n.media[0]},null,8,["media"])):L("",!0),n.media.length===2?(x(),K(Bb,{key:1,media:n.media},null,8,["media"])):L("",!0),n.media.length===3?(x(),K(Hb,{key:2,media:n.media},null,8,["media"])):L("",!0),n.media.length>3?(x(),K(Xb,{key:3,media:n.media},null,8,["media"])):L("",!0)]))])):L("",!0)}},n1="/vendor/mixpost/assets/globe.4f41e2b3.svg",r1="/vendor/mixpost/assets/reply.69e79af6.svg",i1="/vendor/mixpost/assets/retweet.0437347b.svg",s1="/vendor/mixpost/assets/star.abade377.svg",o1="/vendor/mixpost/assets/bookmark.331e5819.svg",a1="/vendor/mixpost/assets/ellipsis.065dffec.svg",l1={class:"absolute right-0 top-0 -mt-sm -mr-xs"},u1={class:"flex items-center justify-center p-2 w-7 h-7 rounded-full bg-white border border-gray-200"},c1={class:"flex items-start justify-between"},d1={class:"flex items-center"},f1={class:"mr-sm"},h1={class:"inline-flex justify-center items-center flex-shrink-0 w-10 h-10 rounded-full"},p1=["src"],m1={class:"font-medium mr-xs font-semibold"},g1={class:"text-gray-400"},v1={class:"flex items-center"},y1={class:"mr-xs"},b1=["src"],D1=v("span",{class:"text-gray-400 text-sm"},"19h",-1),x1={class:"w-full"},k1={class:"mt-5 flex items-center justify-between"},w1={class:"flex items-center"},C1=["src"],E1=v("div",{class:"ml-xs"},"0",-1),S1={class:"flex items-center"},A1=["src"],O1={class:"flex items-center"},T1=["src"],M1={class:"flex items-center"},_1=["src"],F1={class:"flex items-center"},N1=["src"],B1={__name:"PostPreviewMastodon",props:{name:{required:!0,type:String},username:{required:!0,type:String},image:{required:!0,type:String},content:{required:!0,type:Array},textLimitReached:{type:Boolean,default:!1}},setup(n){const e=n,{isDocEmpty:t}=ds(),r=At(()=>e.content[0]);return(i,s)=>(x(),E(se,null,[n.textLimitReached?(x(),K(qn,{key:0,variant:"error",closeable:!1,class:"mb-xs"},{default:$(()=>[ce(" ["+we(n.name)+"] : You have reached the maximum character limit ",1)]),_:1})):L("",!0),V(r).media.length>4?(x(),K(qn,{key:1,variant:"warning",class:"mb-xs"},{default:$(()=>[ce("["+we(n.name)+"]: Twitter accepts a maximum of 4 pictures. Don't worry, if you have selected several pictures, Mixpost will only post the first 4.",1)]),_:1})):L("",!0),R(Qi,{class:Ve([{"border-red-500":n.textLimitReached},"relative"])},{default:$(()=>[v("div",l1,[v("div",u1,[v("div",null,[R(Eo,{provider:"mastodon",class:"!w-5 !h-5"})])])]),v("div",c1,[v("div",d1,[v("div",f1,[v("span",h1,[v("img",{src:n.image,class:"object-cover w-full h-full rounded",alt:""},null,8,p1)])]),v("div",null,[v("div",m1,we(n.name),1),v("div",g1,"@"+we(n.username),1)])]),v("div",v1,[v("span",y1,[v("img",{src:V(n1),alt:"Globe",class:"w-4 h-4"},null,8,b1)]),D1])]),v("div",x1,[R(aa,{value:V(r).body,class:Ve({"mt-xs":!V(t)(V(r).body),"mb-xs":V(r).media.length})},null,8,["value","class"]),R(t1,{media:V(r).media},null,8,["media"]),v("div",k1,[v("div",w1,[v("img",{src:V(r1),alt:"Reply",class:"w-5 h-5"},null,8,C1),E1]),v("div",S1,[v("img",{src:V(i1),alt:"Retweet",class:"w-5 h-5"},null,8,A1)]),v("div",O1,[v("img",{src:V(s1),alt:"Star",class:"w-5 h-5"},null,8,T1)]),v("div",M1,[v("img",{src:V(o1),alt:"Bookmark",class:"w-5 h-5"},null,8,_1)]),v("div",F1,[v("img",{src:V(a1),alt:"Ellipsis",class:"w-5 h-5"},null,8,N1)])])])]),_:1},8,["class"])],64))}},R1={class:"mb-lg last:mb-0"},I1=v("div",null,[v("div",null,"Hi \u{1F44B}"),v("div",null,"Select an account and start writing your post in the left panel to start.")],-1),P1=v("div",{class:"flex items-start"},[v("div",{class:"mr-sm"},[v("span",{class:"inline-flex justify-center items-center flex-shrink-0 w-10 h-10 rounded-full bg-gray-100"})]),v("div",{class:"w-full"},[v("div",{class:"flex items-center"},[v("div",{class:"mr-xs bg-gray-100 w-2/12 h-4"}),v("div",{class:"bg-gray-100 w-3/12 h-4"})]),v("div",{class:"mt-5"},[v("div",{class:"bg-gray-100 w-3/4 h-4"}),v("div",{class:"bg-gray-100 w-full h-4 mt-xs"}),v("div",{class:"bg-gray-100 w-2/5 h-4 mt-xs"})])])],-1),cx={__name:"PostPreviewProviders",props:{accounts:{required:!0,type:Array},selectedAccounts:{required:!0,type:Array},versions:{required:!0,type:Array}},setup(n){const e=n,{getOriginalVersion:t,getAccountVersion:r}=Td(),i=At(()=>t(e.versions)),s=At(()=>e.accounts.filter(o=>e.selectedAccounts.includes(o.id)).map(o=>{const a=r(e.versions,o.id);return{account:o,content:a?a.content:i.value.content,providerComponent:{twitter:Ty,facebook_page:jl,facebook_group:jl,mastodon:B1}[o.provider]}}));return(o,a)=>n.selectedAccounts.length?(x(!0),E(se,{key:0},_e(V(s),l=>(x(),E(se,{key:l.id},[l.account.errors&&l.account.errors.length?(x(),K(qn,{key:0,variant:"error",closeable:!1,class:"mb-1"},{default:$(()=>[ce(we(l.account.errors.join(",")),1)]),_:2},1024)):L("",!0),v("div",R1,[(x(),K(wd(l.providerComponent),{name:l.account.name,username:l.account.username,image:l.account.image,content:l.content},null,8,["name","username","image","content"]))])],64))),128)):(x(),E(se,{key:1},[I1,R(Qi,{class:"mt-lg"},{default:$(()=>[P1]),_:1})],64))}};/*!
 * iro.js v5.5.2
 * 2016-2021 James Daniel
 * Licensed under MPL 2.0
 * github.com/jaames/iro.js
 */var oe,Ki,Wc,xo,Uc,zt={},la=[],L1=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|^--/i;function Pt(n,e){for(var t in e)n[t]=e[t];return n}function Kc(n){var e=n.parentNode;e&&e.removeChild(n)}function te(n,e,t){var r,i,s,o,a=arguments;if(e=Pt({},e),arguments.length>3)for(t=[t],r=3;r<arguments.length;r++)t.push(a[r]);if(t!=null&&(e.children=t),n!=null&&n.defaultProps!=null)for(i in n.defaultProps)e[i]===void 0&&(e[i]=n.defaultProps[i]);return o=e.key,(s=e.ref)!=null&&delete e.ref,o!=null&&delete e.key,ko(n,e,o,s)}function ko(n,e,t,r){var i={type:n,props:e,key:t,ref:r,__k:null,__p:null,__b:0,__e:null,l:null,__c:null,constructor:void 0};return oe.vnode&&oe.vnode(i),i}function ps(n){return n.children}function $1(n){if(n==null||typeof n=="boolean")return null;if(typeof n=="string"||typeof n=="number")return ko(null,n,null,null);if(n.__e!=null||n.__c!=null){var e=ko(n.type,n.props,n.key,null);return e.__e=n.__e,e}return n}function jn(n,e){this.props=n,this.context=e}function Ji(n,e){if(e==null)return n.__p?Ji(n.__p,n.__p.__k.indexOf(n)+1):null;for(var t;e<n.__k.length;e++)if((t=n.__k[e])!=null&&t.__e!=null)return t.__e;return typeof n.type=="function"?Ji(n):null}function Jc(n){var e,t;if((n=n.__p)!=null&&n.__c!=null){for(n.__e=n.__c.base=null,e=0;e<n.__k.length;e++)if((t=n.__k[e])!=null&&t.__e!=null){n.__e=n.__c.base=t.__e;break}return Jc(n)}}function Gs(n){(!n.__d&&(n.__d=!0)&&Ki.push(n)===1||xo!==oe.debounceRendering)&&(xo=oe.debounceRendering,(oe.debounceRendering||Wc)(z1))}function z1(){var n,e,t,r,i,s,o,a;for(Ki.sort(function(l,c){return c.__v.__b-l.__v.__b});n=Ki.pop();)n.__d&&(t=void 0,r=void 0,s=(i=(e=n).__v).__e,o=e.__P,a=e.u,e.u=!1,o&&(t=[],r=ca(o,i,Pt({},i),e.__n,o.ownerSVGElement!==void 0,null,t,a,s==null?Ji(i):s),Yc(t,i),r!=s&&Jc(i)))}function Gc(n,e,t,r,i,s,o,a,l){var c,u,d,f,h,p,m,y=t&&t.__k||la,b=y.length;if(a==zt&&(a=s!=null?s[0]:b?Ji(t,0):null),c=0,e.__k=ua(e.__k,function(k){if(k!=null){if(k.__p=e,k.__b=e.__b+1,(d=y[c])===null||d&&k.key==d.key&&k.type===d.type)y[c]=void 0;else for(u=0;u<b;u++){if((d=y[u])&&k.key==d.key&&k.type===d.type){y[u]=void 0;break}d=null}if(f=ca(n,k,d=d||zt,r,i,s,o,null,a,l),(u=k.ref)&&d.ref!=u&&(m||(m=[])).push(u,k.__c||f,k),f!=null){if(p==null&&(p=f),k.l!=null)f=k.l,k.l=null;else if(s==d||f!=a||f.parentNode==null){e:if(a==null||a.parentNode!==n)n.appendChild(f);else{for(h=a,u=0;(h=h.nextSibling)&&u<b;u+=2)if(h==f)break e;n.insertBefore(f,a)}e.type=="option"&&(n.value="")}a=f.nextSibling,typeof e.type=="function"&&(e.l=f)}}return c++,k}),e.__e=p,s!=null&&typeof e.type!="function")for(c=s.length;c--;)s[c]!=null&&Kc(s[c]);for(c=b;c--;)y[c]!=null&&Qc(y[c],y[c]);if(m)for(c=0;c<m.length;c++)Xc(m[c],m[++c],m[++c])}function ua(n,e,t){if(t==null&&(t=[]),n==null||typeof n=="boolean")e&&t.push(e(null));else if(Array.isArray(n))for(var r=0;r<n.length;r++)ua(n[r],e,t);else t.push(e?e($1(n)):n);return t}function V1(n,e,t,r,i){var s;for(s in t)s in e||ql(n,s,null,t[s],r);for(s in e)i&&typeof e[s]!="function"||s==="value"||s==="checked"||t[s]===e[s]||ql(n,s,e[s],t[s],r)}function Hl(n,e,t){e[0]==="-"?n.setProperty(e,t):n[e]=typeof t=="number"&&L1.test(e)===!1?t+"px":t==null?"":t}function ql(n,e,t,r,i){var s,o,a,l,c;if(!((e=i?e==="className"?"class":e:e==="class"?"className":e)==="key"||e==="children"))if(e==="style")if(s=n.style,typeof t=="string")s.cssText=t;else{if(typeof r=="string"&&(s.cssText="",r=null),r)for(o in r)t&&o in t||Hl(s,o,"");if(t)for(a in t)r&&t[a]===r[a]||Hl(s,a,t[a])}else e[0]==="o"&&e[1]==="n"?(l=e!==(e=e.replace(/Capture$/,"")),c=e.toLowerCase(),e=(c in n?c:e).slice(2),t?(r||n.addEventListener(e,Wl,l),(n.t||(n.t={}))[e]=t):n.removeEventListener(e,Wl,l)):e!=="list"&&e!=="tagName"&&e!=="form"&&!i&&e in n?n[e]=t==null?"":t:typeof t!="function"&&e!=="dangerouslySetInnerHTML"&&(e!==(e=e.replace(/^xlink:?/,""))?t==null||t===!1?n.removeAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase()):n.setAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase(),t):t==null||t===!1?n.removeAttribute(e):n.setAttribute(e,t))}function Wl(n){return this.t[n.type](oe.event?oe.event(n):n)}function ca(n,e,t,r,i,s,o,a,l,c){var u,d,f,h,p,m,y,b,k,O,g=e.type;if(e.constructor!==void 0)return null;(u=oe.__b)&&u(e);try{e:if(typeof g=="function"){if(b=e.props,k=(u=g.contextType)&&r[u.__c],O=u?k?k.props.value:u.__p:r,t.__c?y=(d=e.__c=t.__c).__p=d.__E:("prototype"in g&&g.prototype.render?e.__c=d=new g(b,O):(e.__c=d=new jn(b,O),d.constructor=g,d.render=H1),k&&k.sub(d),d.props=b,d.state||(d.state={}),d.context=O,d.__n=r,f=d.__d=!0,d.__h=[]),d.__s==null&&(d.__s=d.state),g.getDerivedStateFromProps!=null&&Pt(d.__s==d.state?d.__s=Pt({},d.__s):d.__s,g.getDerivedStateFromProps(b,d.__s)),f)g.getDerivedStateFromProps==null&&d.componentWillMount!=null&&d.componentWillMount(),d.componentDidMount!=null&&o.push(d);else{if(g.getDerivedStateFromProps==null&&a==null&&d.componentWillReceiveProps!=null&&d.componentWillReceiveProps(b,O),!a&&d.shouldComponentUpdate!=null&&d.shouldComponentUpdate(b,d.__s,O)===!1){for(d.props=b,d.state=d.__s,d.__d=!1,d.__v=e,e.__e=l!=null?l!==t.__e?l:t.__e:null,e.__k=t.__k,u=0;u<e.__k.length;u++)e.__k[u]&&(e.__k[u].__p=e);break e}d.componentWillUpdate!=null&&d.componentWillUpdate(b,d.__s,O)}for(h=d.props,p=d.state,d.context=O,d.props=b,d.state=d.__s,(u=oe.__r)&&u(e),d.__d=!1,d.__v=e,d.__P=n,u=d.render(d.props,d.state,d.context),e.__k=ua(u!=null&&u.type==ps&&u.key==null?u.props.children:u),d.getChildContext!=null&&(r=Pt(Pt({},r),d.getChildContext())),f||d.getSnapshotBeforeUpdate==null||(m=d.getSnapshotBeforeUpdate(h,p)),Gc(n,e,t,r,i,s,o,l,c),d.base=e.__e;u=d.__h.pop();)d.__s&&(d.state=d.__s),u.call(d);f||h==null||d.componentDidUpdate==null||d.componentDidUpdate(h,p,m),y&&(d.__E=d.__p=null)}else e.__e=j1(t.__e,e,t,r,i,s,o,c);(u=oe.diffed)&&u(e)}catch(_){oe.__e(_,e,t)}return e.__e}function Yc(n,e){for(var t;t=n.pop();)try{t.componentDidMount()}catch(r){oe.__e(r,t.__v)}oe.__c&&oe.__c(e)}function j1(n,e,t,r,i,s,o,a){var l,c,u,d,f=t.props,h=e.props;if(i=e.type==="svg"||i,n==null&&s!=null){for(l=0;l<s.length;l++)if((c=s[l])!=null&&(e.type===null?c.nodeType===3:c.localName===e.type)){n=c,s[l]=null;break}}if(n==null){if(e.type===null)return document.createTextNode(h);n=i?document.createElementNS("http://www.w3.org/2000/svg",e.type):document.createElement(e.type),s=null}return e.type===null?f!==h&&(s!=null&&(s[s.indexOf(n)]=null),n.data=h):e!==t&&(s!=null&&(s=la.slice.call(n.childNodes)),u=(f=t.props||zt).dangerouslySetInnerHTML,d=h.dangerouslySetInnerHTML,a||(d||u)&&(d&&u&&d.__html==u.__html||(n.innerHTML=d&&d.__html||"")),V1(n,h,f,i,a),e.__k=e.props.children,d||Gc(n,e,t,r,e.type!=="foreignObject"&&i,s,o,zt,a),a||("value"in h&&h.value!==void 0&&h.value!==n.value&&(n.value=h.value==null?"":h.value),"checked"in h&&h.checked!==void 0&&h.checked!==n.checked&&(n.checked=h.checked))),n}function Xc(n,e,t){try{typeof n=="function"?n(e):n.current=e}catch(r){oe.__e(r,t)}}function Qc(n,e,t){var r,i,s;if(oe.unmount&&oe.unmount(n),(r=n.ref)&&Xc(r,null,e),t||typeof n.type=="function"||(t=(i=n.__e)!=null),n.__e=n.l=null,(r=n.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(o){oe.__e(o,e)}r.base=r.__P=null}if(r=n.__k)for(s=0;s<r.length;s++)r[s]&&Qc(r[s],e,t);i!=null&&Kc(i)}function H1(n,e,t){return this.constructor(n,t)}function q1(n,e,t){var r,i,s;oe.__p&&oe.__p(n,e),i=(r=t===Uc)?null:t&&t.__k||e.__k,n=te(ps,null,[n]),s=[],ca(e,r?e.__k=n:(t||e).__k=n,i||zt,zt,e.ownerSVGElement!==void 0,t&&!r?[t]:i?null:la.slice.call(e.childNodes),s,!1,t||zt,r),Yc(s,n)}oe={},jn.prototype.setState=function(n,e){var t=this.__s!==this.state&&this.__s||(this.__s=Pt({},this.state));(typeof n!="function"||(n=n(t,this.props)))&&Pt(t,n),n!=null&&this.__v&&(this.u=!1,e&&this.__h.push(e),Gs(this))},jn.prototype.forceUpdate=function(n){this.__v&&(n&&this.__h.push(n),this.u=!0,Gs(this))},jn.prototype.render=ps,Ki=[],Wc=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,xo=oe.debounceRendering,oe.__e=function(n,e,t){for(var r;e=e.__p;)if((r=e.__c)&&!r.__p)try{if(r.constructor&&r.constructor.getDerivedStateFromError!=null)r.setState(r.constructor.getDerivedStateFromError(n));else{if(r.componentDidCatch==null)continue;r.componentDidCatch(n)}return Gs(r.__E=r)}catch(i){n=i}throw n},Uc=zt;function Ul(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function W1(n,e,t){return e&&Ul(n.prototype,e),t&&Ul(n,t),n}function Me(){return Me=Object.assign||function(n){for(var e=arguments,t=1;t<arguments.length;t++){var r=e[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])}return n},Me.apply(this,arguments)}var U1="[-\\+]?\\d+%?",K1="[-\\+]?\\d*\\.\\d+%?",on="(?:"+K1+")|(?:"+U1+")",Zc="[\\s|\\(]+("+on+")[,|\\s]+("+on+")[,|\\s]+("+on+")\\s*\\)?",ed="[\\s|\\(]+("+on+")[,|\\s]+("+on+")[,|\\s]+("+on+")[,|\\s]+("+on+")\\s*\\)?",J1=new RegExp("rgb"+Zc),G1=new RegExp("rgba"+ed),Y1=new RegExp("hsl"+Zc),X1=new RegExp("hsla"+ed),ms="^(?:#?|0x?)",an="([0-9a-fA-F]{1})",ln="([0-9a-fA-F]{2})",Q1=new RegExp(ms+an+an+an+"$"),Z1=new RegExp(ms+an+an+an+an+"$"),eD=new RegExp(ms+ln+ln+ln+"$"),tD=new RegExp(ms+ln+ln+ln+ln+"$"),nD=2e3,rD=4e4,ai=Math.log,Sn=Math.round,gr=Math.floor;function qe(n,e,t){return Math.min(Math.max(n,e),t)}function Oe(n,e){var t=n.indexOf("%")>-1,r=parseFloat(n);return t?e/100*r:r}function Te(n){return parseInt(n,16)}function Qt(n){return n.toString(16).padStart(2,"0")}var $n=function(){function n(t,r){this.$={h:0,s:0,v:0,a:1},t&&this.set(t),this.onChange=r,this.initialValue=Me({},this.$)}var e=n.prototype;return e.set=function(r){if(typeof r=="string")/^(?:#?|0x?)[0-9a-fA-F]{3,8}$/.test(r)?this.hexString=r:/^rgba?/.test(r)?this.rgbString=r:/^hsla?/.test(r)&&(this.hslString=r);else if(typeof r=="object")r instanceof n?this.hsva=r.hsva:"r"in r&&"g"in r&&"b"in r?this.rgb=r:"h"in r&&"s"in r&&"v"in r?this.hsv=r:"h"in r&&"s"in r&&"l"in r?this.hsl=r:"kelvin"in r&&(this.kelvin=r.kelvin);else throw new Error("Invalid color value")},e.setChannel=function(r,i,s){var o;this[r]=Me({},this[r],(o={},o[i]=s,o))},e.reset=function(){this.hsva=this.initialValue},e.clone=function(){return new n(this)},e.unbind=function(){this.onChange=void 0},n.hsvToRgb=function(r){var i=r.h/60,s=r.s/100,o=r.v/100,a=gr(i),l=i-a,c=o*(1-s),u=o*(1-l*s),d=o*(1-(1-l)*s),f=a%6,h=[o,u,c,c,d,o][f],p=[d,o,o,u,c,c][f],m=[c,c,d,o,o,u][f];return{r:qe(h*255,0,255),g:qe(p*255,0,255),b:qe(m*255,0,255)}},n.rgbToHsv=function(r){var i=r.r/255,s=r.g/255,o=r.b/255,a=Math.max(i,s,o),l=Math.min(i,s,o),c=a-l,u=0,d=a,f=a===0?0:c/a;switch(a){case l:u=0;break;case i:u=(s-o)/c+(s<o?6:0);break;case s:u=(o-i)/c+2;break;case o:u=(i-s)/c+4;break}return{h:u*60%360,s:qe(f*100,0,100),v:qe(d*100,0,100)}},n.hsvToHsl=function(r){var i=r.s/100,s=r.v/100,o=(2-i)*s,a=o<=1?o:2-o,l=a<1e-9?0:i*s/a;return{h:r.h,s:qe(l*100,0,100),l:qe(o*50,0,100)}},n.hslToHsv=function(r){var i=r.l*2,s=r.s*(i<=100?i:200-i)/100,o=i+s<1e-9?0:2*s/(i+s);return{h:r.h,s:qe(o*100,0,100),v:qe((i+s)/2,0,100)}},n.kelvinToRgb=function(r){var i=r/100,s,o,a;return i<66?(s=255,o=-155.25485562709179-.44596950469579133*(o=i-2)+104.49216199393888*ai(o),a=i<20?0:-254.76935184120902+.8274096064007395*(a=i-10)+115.67994401066147*ai(a)):(s=351.97690566805693+.114206453784165*(s=i-55)-40.25366309332127*ai(s),o=325.4494125711974+.07943456536662342*(o=i-50)-28.0852963507957*ai(o),a=255),{r:qe(gr(s),0,255),g:qe(gr(o),0,255),b:qe(gr(a),0,255)}},n.rgbToKelvin=function(r){for(var i=r.r,s=r.b,o=.4,a=nD,l=rD,c;l-a>o;){c=(l+a)*.5;var u=n.kelvinToRgb(c);u.b/u.r>=s/i?l=c:a=c}return c},W1(n,[{key:"hsv",get:function(){var r=this.$;return{h:r.h,s:r.s,v:r.v}},set:function(r){var i=this.$;if(r=Me({},i,r),this.onChange){var s={h:!1,v:!1,s:!1,a:!1};for(var o in i)s[o]=r[o]!=i[o];this.$=r,(s.h||s.s||s.v||s.a)&&this.onChange(this,s)}else this.$=r}},{key:"hsva",get:function(){return Me({},this.$)},set:function(r){this.hsv=r}},{key:"hue",get:function(){return this.$.h},set:function(r){this.hsv={h:r}}},{key:"saturation",get:function(){return this.$.s},set:function(r){this.hsv={s:r}}},{key:"value",get:function(){return this.$.v},set:function(r){this.hsv={v:r}}},{key:"alpha",get:function(){return this.$.a},set:function(r){this.hsv=Me({},this.hsv,{a:r})}},{key:"kelvin",get:function(){return n.rgbToKelvin(this.rgb)},set:function(r){this.rgb=n.kelvinToRgb(r)}},{key:"red",get:function(){var r=this.rgb;return r.r},set:function(r){this.rgb=Me({},this.rgb,{r})}},{key:"green",get:function(){var r=this.rgb;return r.g},set:function(r){this.rgb=Me({},this.rgb,{g:r})}},{key:"blue",get:function(){var r=this.rgb;return r.b},set:function(r){this.rgb=Me({},this.rgb,{b:r})}},{key:"rgb",get:function(){var r=n.hsvToRgb(this.$),i=r.r,s=r.g,o=r.b;return{r:Sn(i),g:Sn(s),b:Sn(o)}},set:function(r){this.hsv=Me({},n.rgbToHsv(r),{a:r.a===void 0?1:r.a})}},{key:"rgba",get:function(){return Me({},this.rgb,{a:this.alpha})},set:function(r){this.rgb=r}},{key:"hsl",get:function(){var r=n.hsvToHsl(this.$),i=r.h,s=r.s,o=r.l;return{h:Sn(i),s:Sn(s),l:Sn(o)}},set:function(r){this.hsv=Me({},n.hslToHsv(r),{a:r.a===void 0?1:r.a})}},{key:"hsla",get:function(){return Me({},this.hsl,{a:this.alpha})},set:function(r){this.hsl=r}},{key:"rgbString",get:function(){var r=this.rgb;return"rgb("+r.r+", "+r.g+", "+r.b+")"},set:function(r){var i,s,o,a,l=1;if((i=J1.exec(r))?(s=Oe(i[1],255),o=Oe(i[2],255),a=Oe(i[3],255)):(i=G1.exec(r))&&(s=Oe(i[1],255),o=Oe(i[2],255),a=Oe(i[3],255),l=Oe(i[4],1)),i)this.rgb={r:s,g:o,b:a,a:l};else throw new Error("Invalid rgb string")}},{key:"rgbaString",get:function(){var r=this.rgba;return"rgba("+r.r+", "+r.g+", "+r.b+", "+r.a+")"},set:function(r){this.rgbString=r}},{key:"hexString",get:function(){var r=this.rgb;return"#"+Qt(r.r)+Qt(r.g)+Qt(r.b)},set:function(r){var i,s,o,a,l=255;if((i=Q1.exec(r))?(s=Te(i[1])*17,o=Te(i[2])*17,a=Te(i[3])*17):(i=Z1.exec(r))?(s=Te(i[1])*17,o=Te(i[2])*17,a=Te(i[3])*17,l=Te(i[4])*17):(i=eD.exec(r))?(s=Te(i[1]),o=Te(i[2]),a=Te(i[3])):(i=tD.exec(r))&&(s=Te(i[1]),o=Te(i[2]),a=Te(i[3]),l=Te(i[4])),i)this.rgb={r:s,g:o,b:a,a:l/255};else throw new Error("Invalid hex string")}},{key:"hex8String",get:function(){var r=this.rgba;return"#"+Qt(r.r)+Qt(r.g)+Qt(r.b)+Qt(gr(r.a*255))},set:function(r){this.hexString=r}},{key:"hslString",get:function(){var r=this.hsl;return"hsl("+r.h+", "+r.s+"%, "+r.l+"%)"},set:function(r){var i,s,o,a,l=1;if((i=Y1.exec(r))?(s=Oe(i[1],360),o=Oe(i[2],100),a=Oe(i[3],100)):(i=X1.exec(r))&&(s=Oe(i[1],360),o=Oe(i[2],100),a=Oe(i[3],100),l=Oe(i[4],1)),i)this.hsl={h:s,s:o,l:a,a:l};else throw new Error("Invalid hsl string")}},{key:"hslaString",get:function(){var r=this.hsla;return"hsla("+r.h+", "+r.s+"%, "+r.l+"%, "+r.a+")"},set:function(r){this.hslString=r}}]),n}(),iD={sliderShape:"bar",sliderType:"value",minTemperature:2200,maxTemperature:11e3};function da(n){var e,t=n.width,r=n.sliderSize,i=n.borderWidth,s=n.handleRadius,o=n.padding,a=n.sliderShape,l=n.layoutDirection==="horizontal";return r=(e=r)!=null?e:o*2+s*2,a==="circle"?{handleStart:n.padding+n.handleRadius,handleRange:t-o*2-s*2,width:t,height:t,cx:t/2,cy:t/2,radius:t/2-i/2}:{handleStart:r/2,handleRange:t-r,radius:r/2,x:0,y:0,width:l?r:t,height:l?t:r}}function sD(n,e){var t=e.hsva,r=e.rgb;switch(n.sliderType){case"red":return r.r/2.55;case"green":return r.g/2.55;case"blue":return r.b/2.55;case"alpha":return t.a*100;case"kelvin":var i=n.minTemperature,s=n.maxTemperature,o=s-i,a=(e.kelvin-i)/o*100;return Math.max(0,Math.min(a,100));case"hue":return t.h/=3.6;case"saturation":return t.s;case"value":default:return t.v}}function oD(n,e,t){var r=da(n),i=r.handleRange,s=r.handleStart,o;n.layoutDirection==="horizontal"?o=-1*t+i+s:o=e-s,o=Math.max(Math.min(o,i),0);var a=Math.round(100/i*o);switch(n.sliderType){case"kelvin":var l=n.minTemperature,c=n.maxTemperature,u=c-l;return l+u*(a/100);case"alpha":return a/100;case"hue":return a*3.6;case"red":case"blue":case"green":return a*2.55;default:return a}}function aD(n,e){var t=da(n),r=t.width,i=t.height,s=t.handleRange,o=t.handleStart,a=n.layoutDirection==="horizontal",l=sD(n,e),c=a?r/2:i/2,u=o+l/100*s;return a&&(u=-1*u+s+o*2),{x:a?c:u,y:a?u:c}}function lD(n,e){var t=e.hsv,r=e.rgb;switch(n.sliderType){case"red":return[[0,"rgb("+0+","+r.g+","+r.b+")"],[100,"rgb("+255+","+r.g+","+r.b+")"]];case"green":return[[0,"rgb("+r.r+","+0+","+r.b+")"],[100,"rgb("+r.r+","+255+","+r.b+")"]];case"blue":return[[0,"rgb("+r.r+","+r.g+","+0+")"],[100,"rgb("+r.r+","+r.g+","+255+")"]];case"alpha":return[[0,"rgba("+r.r+","+r.g+","+r.b+",0)"],[100,"rgb("+r.r+","+r.g+","+r.b+")"]];case"kelvin":for(var i=[],s=n.minTemperature,o=n.maxTemperature,a=8,l=o-s,c=s,u=0;c<o;c+=l/a,u+=1){var d=$n.kelvinToRgb(c),f=d.r,h=d.g,p=d.b;i.push([100/a*u,"rgb("+f+","+h+","+p+")"])}return i;case"hue":return[[0,"#f00"],[16.666,"#ff0"],[33.333,"#0f0"],[50,"#0ff"],[66.666,"#00f"],[83.333,"#f0f"],[100,"#f00"]];case"saturation":var m=$n.hsvToHsl({h:t.h,s:0,v:t.v}),y=$n.hsvToHsl({h:t.h,s:100,v:t.v});return[[0,"hsl("+m.h+","+m.s+"%,"+m.l+"%)"],[100,"hsl("+y.h+","+y.s+"%,"+y.l+"%)"]];case"value":default:var b=$n.hsvToHsl({h:t.h,s:t.s,v:100});return[[0,"#000"],[100,"hsl("+b.h+","+b.s+"%,"+b.l+"%)"]]}}var td=Math.PI*2,uD=function(e,t){return(e%t+t)%t},nd=function(e,t){return Math.sqrt(e*e+t*t)};function rd(n){return n.width/2-n.padding-n.handleRadius-n.borderWidth}function cD(n,e,t){var r=gs(n),i=r.cx,s=r.cy,o=n.width/2;return nd(i-e,s-t)<o}function gs(n){var e=n.width/2;return{width:n.width,radius:e-n.borderWidth,cx:e,cy:e}}function id(n,e,t){var r=n.wheelAngle,i=n.wheelDirection;return t&&i==="clockwise"?e=r+e:i==="clockwise"?e=360-r+e:t&&i==="anticlockwise"?e=r+180-e:i==="anticlockwise"&&(e=r-e),uD(e,360)}function dD(n,e){var t=e.hsv,r=gs(n),i=r.cx,s=r.cy,o=rd(n),a=(180+id(n,t.h,!0))*(td/360),l=t.s/100*o,c=n.wheelDirection==="clockwise"?-1:1;return{x:i+l*Math.cos(a)*c,y:s+l*Math.sin(a)*c}}function Kl(n,e,t){var r=gs(n),i=r.cx,s=r.cy,o=rd(n);e=i-e,t=s-t;var a=id(n,Math.atan2(-t,-e)*(360/td)),l=Math.min(nd(e,t),o);return{h:Math.round(a),s:Math.round(100/o*l)}}function fa(n){var e=n.width,t=n.boxHeight,r=n.padding,i=n.handleRadius;return{width:e,height:t!=null?t:e,radius:r+i}}function Jl(n,e,t){var r=fa(n),i=r.width,s=r.height,o=r.radius,a=o,l=i-o*2,c=s-o*2,u=(e-a)/l*100,d=(t-a)/c*100;return{s:Math.max(0,Math.min(u,100)),v:Math.max(0,Math.min(100-d,100))}}function fD(n,e){var t=fa(n),r=t.width,i=t.height,s=t.radius,o=e.hsv,a=s,l=r-s*2,c=i-s*2;return{x:a+o.s/100*l,y:a+(c-o.v/100*c)}}function hD(n,e){var t=e.hue;return[[[0,"#fff"],[100,"hsl("+t+",100%,50%)"]],[[0,"rgba(0,0,0,0)"],[100,"#000"]]]}var Ys;function pD(n){Ys||(Ys=document.getElementsByTagName("base"));var e=window.navigator.userAgent,t=/^((?!chrome|android).)*safari/i.test(e),r=/iPhone|iPod|iPad/i.test(e),i=window.location;return(t||r)&&Ys.length>0?i.protocol+"//"+i.host+i.pathname+i.search+n:n}function sd(n,e,t,r){for(var i=0;i<r.length;i++){var s=r[i].x-e,o=r[i].y-t,a=Math.sqrt(s*s+o*o);if(a<n.handleRadius)return i}return null}function ha(n){return{boxSizing:"border-box",border:n.borderWidth+"px solid "+n.borderColor}}function wo(n,e,t){return n+"-gradient("+e+", "+t.map(function(r){var i=r[0],s=r[1];return s+" "+i+"%"}).join(",")+")"}function Ee(n){return typeof n=="string"?n:n+"px"}var mD={width:300,height:300,color:"#fff",colors:[],padding:6,layoutDirection:"vertical",borderColor:"#fff",borderWidth:0,handleRadius:8,activeHandleRadius:null,handleSvg:null,handleProps:{x:0,y:0},wheelLightness:!0,wheelAngle:0,wheelDirection:"anticlockwise",sliderSize:null,sliderMargin:12,boxHeight:null},Gl=["mousemove","touchmove","mouseup","touchend"],vs=function(n){function e(t){n.call(this,t),this.uid=(Math.random()+1).toString(36).substring(5)}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.render=function(r){var i=this.handleEvent.bind(this),s={onMouseDown:i,ontouchstart:i},o=r.layoutDirection==="horizontal",a=r.margin===null?r.sliderMargin:r.margin,l={overflow:"visible",display:o?"inline-block":"block"};return r.index>0&&(l[o?"marginLeft":"marginTop"]=a),te(ps,null,r.children(this.uid,s,l))},e.prototype.handleEvent=function(r){var i=this,s=this.props.onInput,o=this.base.getBoundingClientRect();r.preventDefault();var a=r.touches?r.changedTouches[0]:r,l=a.clientX-o.left,c=a.clientY-o.top;switch(r.type){case"mousedown":case"touchstart":var u=s(l,c,0);u!==!1&&Gl.forEach(function(d){document.addEventListener(d,i,{passive:!1})});break;case"mousemove":case"touchmove":s(l,c,1);break;case"mouseup":case"touchend":s(l,c,2),Gl.forEach(function(d){document.removeEventListener(d,i,{passive:!1})});break}},e}(jn);function yn(n){var e=n.r,t=n.url,r=e,i=e;return te("svg",{className:"IroHandle IroHandle--"+n.index+" "+(n.isActive?"IroHandle--isActive":""),style:{"-webkit-tap-highlight-color":"rgba(0, 0, 0, 0);",transform:"translate("+Ee(n.x)+", "+Ee(n.y)+")",willChange:"transform",top:Ee(-e),left:Ee(-e),width:Ee(e*2),height:Ee(e*2),position:"absolute",overflow:"visible"}},t&&te("use",Object.assign({xlinkHref:pD(t)},n.props)),!t&&te("circle",{cx:r,cy:i,r:e,fill:"none","stroke-width":2,stroke:"#000"}),!t&&te("circle",{cx:r,cy:i,r:e-2,fill:n.fill,"stroke-width":2,stroke:"#fff"}))}yn.defaultProps={fill:"none",x:0,y:0,r:8,url:null,props:{x:0,y:0}};function Gi(n){var e=n.activeIndex,t=e!==void 0&&e<n.colors.length?n.colors[e]:n.color,r=da(n),i=r.width,s=r.height,o=r.radius,a=aD(n,t),l=lD(n,t);function c(u,d,f){var h=oD(n,u,d);n.parent.inputActive=!0,t[n.sliderType]=h,n.onInput(f,n.id)}return te(vs,Object.assign({},n,{onInput:c}),function(u,d,f){return te("div",Object.assign({},d,{className:"IroSlider",style:Object.assign({},{position:"relative",width:Ee(i),height:Ee(s),borderRadius:Ee(o),background:"conic-gradient(#ccc 25%, #fff 0 50%, #ccc 0 75%, #fff 0)",backgroundSize:"8px 8px"},f)}),te("div",{className:"IroSliderGradient",style:Object.assign({},{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:Ee(o),background:wo("linear",n.layoutDirection==="horizontal"?"to top":"to right",l)},ha(n))}),te(yn,{isActive:!0,index:t.index,r:n.handleRadius,url:n.handleSvg,props:n.handleProps,x:a.x,y:a.y}))})}Gi.defaultProps=Object.assign({},iD);function gD(n){var e=fa(n),t=e.width,r=e.height,i=e.radius,s=n.colors,o=n.parent,a=n.activeIndex,l=a!==void 0&&a<n.colors.length?n.colors[a]:n.color,c=hD(n,l),u=s.map(function(f){return fD(n,f)});function d(f,h,p){if(p===0){var m=sd(n,f,h,u);m!==null?o.setActiveColor(m):(o.inputActive=!0,l.hsv=Jl(n,f,h),n.onInput(p,n.id))}else p===1&&(o.inputActive=!0,l.hsv=Jl(n,f,h));n.onInput(p,n.id)}return te(vs,Object.assign({},n,{onInput:d}),function(f,h,p){return te("div",Object.assign({},h,{className:"IroBox",style:Object.assign({},{width:Ee(t),height:Ee(r),position:"relative"},p)}),te("div",{className:"IroBox",style:Object.assign({},{width:"100%",height:"100%",borderRadius:Ee(i)},ha(n),{background:wo("linear","to bottom",c[1])+","+wo("linear","to right",c[0])})}),s.filter(function(m){return m!==l}).map(function(m){return te(yn,{isActive:!1,index:m.index,fill:m.hslString,r:n.handleRadius,url:n.handleSvg,props:n.handleProps,x:u[m.index].x,y:u[m.index].y})}),te(yn,{isActive:!0,index:l.index,fill:l.hslString,r:n.activeHandleRadius||n.handleRadius,url:n.handleSvg,props:n.handleProps,x:u[l.index].x,y:u[l.index].y}))})}var vD="conic-gradient(red, yellow, lime, aqua, blue, magenta, red)",yD="conic-gradient(red, magenta, blue, aqua, lime, yellow, red)";function od(n){var e=gs(n),t=e.width,r=n.colors;n.borderWidth;var i=n.parent,s=n.color,o=s.hsv,a=r.map(function(u){return dD(n,u)}),l={position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",boxSizing:"border-box"};function c(u,d,f){if(f===0){if(!cD(n,u,d))return!1;var h=sd(n,u,d,a);h!==null?i.setActiveColor(h):(i.inputActive=!0,s.hsv=Kl(n,u,d),n.onInput(f,n.id))}else f===1&&(i.inputActive=!0,s.hsv=Kl(n,u,d));n.onInput(f,n.id)}return te(vs,Object.assign({},n,{onInput:c}),function(u,d,f){return te("div",Object.assign({},d,{className:"IroWheel",style:Object.assign({},{width:Ee(t),height:Ee(t),position:"relative"},f)}),te("div",{className:"IroWheelHue",style:Object.assign({},l,{transform:"rotateZ("+(n.wheelAngle+90)+"deg)",background:n.wheelDirection==="clockwise"?vD:yD})}),te("div",{className:"IroWheelSaturation",style:Object.assign({},l,{background:"radial-gradient(circle closest-side, #fff, transparent)"})}),n.wheelLightness&&te("div",{className:"IroWheelLightness",style:Object.assign({},l,{background:"#000",opacity:1-o.v/100})}),te("div",{className:"IroWheelBorder",style:Object.assign({},l,ha(n))}),r.filter(function(h){return h!==s}).map(function(h){return te(yn,{isActive:!1,index:h.index,fill:h.hslString,r:n.handleRadius,url:n.handleSvg,props:n.handleProps,x:a[h.index].x,y:a[h.index].y})}),te(yn,{isActive:!0,index:s.index,fill:s.hslString,r:n.activeHandleRadius||n.handleRadius,url:n.handleSvg,props:n.handleProps,x:a[s.index].x,y:a[s.index].y}))})}function bD(n){var e=function(t,r){var i,s=document.createElement("div");q1(te(n,Object.assign({},{ref:function(a){return i=a}},r)),s);function o(){var a=t instanceof Element?t:document.querySelector(t);a.appendChild(i.base),i.onMount(a)}return document.readyState!=="loading"?o():document.addEventListener("DOMContentLoaded",o),i};return e.prototype=n.prototype,Object.assign(e,n),e.__component=n,e}var ad=function(n){function e(t){var r=this;n.call(this,t),this.colors=[],this.inputActive=!1,this.events={},this.activeEvents={},this.deferredEvents={},this.id=t.id;var i=t.colors.length>0?t.colors:[t.color];i.forEach(function(s){return r.addColor(s)}),this.setActiveColor(0),this.state=Object.assign({},t,{color:this.color,colors:this.colors,layout:t.layout})}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.addColor=function(r,i){i===void 0&&(i=this.colors.length);var s=new $n(r,this.onColorChange.bind(this));this.colors.splice(i,0,s),this.colors.forEach(function(o,a){return o.index=a}),this.state&&this.setState({colors:this.colors}),this.deferredEmit("color:init",s)},e.prototype.removeColor=function(r){var i=this.colors.splice(r,1)[0];i.unbind(),this.colors.forEach(function(s,o){return s.index=o}),this.state&&this.setState({colors:this.colors}),i.index===this.color.index&&this.setActiveColor(0),this.emit("color:remove",i)},e.prototype.setActiveColor=function(r){this.color=this.colors[r],this.state&&this.setState({color:this.color}),this.emit("color:setActive",this.color)},e.prototype.setColors=function(r,i){var s=this;i===void 0&&(i=0),this.colors.forEach(function(o){return o.unbind()}),this.colors=[],r.forEach(function(o){return s.addColor(o)}),this.setActiveColor(i),this.emit("color:setAll",this.colors)},e.prototype.on=function(r,i){var s=this,o=this.events;(Array.isArray(r)?r:[r]).forEach(function(a){(o[a]||(o[a]=[])).push(i),s.deferredEvents[a]&&(s.deferredEvents[a].forEach(function(l){i.apply(null,l)}),s.deferredEvents[a]=[])})},e.prototype.off=function(r,i){var s=this;(Array.isArray(r)?r:[r]).forEach(function(o){var a=s.events[o];a&&a.splice(a.indexOf(i),1)})},e.prototype.emit=function(r){for(var i=this,s=[],o=arguments.length-1;o-- >0;)s[o]=arguments[o+1];var a=this.activeEvents,l=a.hasOwnProperty(r)?a[r]:!1;if(!l){a[r]=!0;var c=this.events[r]||[];c.forEach(function(u){return u.apply(i,s)}),a[r]=!1}},e.prototype.deferredEmit=function(r){for(var i,s=[],o=arguments.length-1;o-- >0;)s[o]=arguments[o+1];var a=this.deferredEvents;(i=this).emit.apply(i,[r].concat(s)),(a[r]||(a[r]=[])).push(s)},e.prototype.setOptions=function(r){this.setState(r)},e.prototype.resize=function(r){this.setOptions({width:r})},e.prototype.reset=function(){this.colors.forEach(function(r){return r.reset()}),this.setState({colors:this.colors})},e.prototype.onMount=function(r){this.el=r,this.deferredEmit("mount",this)},e.prototype.onColorChange=function(r,i){this.setState({color:this.color}),this.inputActive&&(this.inputActive=!1,this.emit("input:change",r,i)),this.emit("color:change",r,i)},e.prototype.emitInputEvent=function(r,i){r===0?this.emit("input:start",this.color,i):r===1?this.emit("input:move",this.color,i):r===2&&this.emit("input:end",this.color,i)},e.prototype.render=function(r,i){var s=this,o=i.layout;if(!Array.isArray(o)){switch(o){default:o=[{component:od},{component:Gi}]}i.transparency&&o.push({component:Gi,options:{sliderType:"alpha"}})}return te("div",{class:"IroColorPicker",id:i.id,style:{display:i.display}},o.map(function(a,l){var c=a.component,u=a.options;return te(c,Object.assign({},i,u,{ref:void 0,onInput:s.emitInputEvent.bind(s),parent:s,index:l}))}))},e}(jn);ad.defaultProps=Object.assign({},mD,{colors:[],display:"block",id:null,layout:"default",margin:null});var DD=bD(ad),Co;(function(n){n.version="5.5.2",n.Color=$n,n.ColorPicker=DD,function(e){e.h=te,e.ComponentBase=vs,e.Handle=yn,e.Slider=Gi,e.Wheel=od,e.Box=gD}(n.ui||(n.ui={}))})(Co||(Co={}));var xD=Co;const Yl={"slate-400":"#94a3b8","stone-400":"#a8a29e","gray-900":"#111827","red-500":"#ef4444","red-600":"#e11923","orange-400":"#fb923c","orange-700":"#c2410c","amber-400":"#fbbf24","yellow-400":"#facc15","lime-400":"#a3e635","green-400":"#4ade80","emerald-400":"#34d399","teal-400":"#2dd4bf","cyan-400":"#22d3ee","cyan-600":"#0891b2","sky-400":"#38bdf8","sky-700":"#0369a1","blue-400":"#60a5fa","indigo-400":"#818cf8","violet-400":"#a78bfa","purple-400":"#c084fc","fuchsia-400":"#e879f9","pink-400":"#f472b6","rose-400":"#fb7185"},kD=()=>{let n=[];for(const e in Yl)n.push(Yl[e]);return n},wD={class:"flex items-center justify-between"},CD={class:"grid grid-cols-4 gap-sm"},ED=["onClick"],SD={__name:"ColorPicker",props:{modelValue:{type:String,required:!0},colors:{type:Array,default:()=>kD()}},emits:["update:modelValue"],setup(n,{emit:e}){const t=n,r=fe(null);let i=null;const s=a=>{e("update:modelValue",a.hexString)},o=a=>{e("update:modelValue",a),i.color.set(a)};return Yi(()=>{i=new xD.ColorPicker(r.value,{color:t.modelValue,width:200}),i.on("color:change",s)}),Cd(()=>{i.off("color:change",s)}),(a,l)=>(x(),E("div",wD,[v("div",null,[v("div",CD,[(x(!0),E(se,null,_e(n.colors,(c,u)=>(x(),E("button",{key:u,onClick:d=>o(c),role:"button",type:"button",style:he({backgroundColor:c}),class:"flex items-center justify-center w-6 h-6 rounded-md"},[c===n.modelValue?(x(),K(Ed,{key:0,class:"text-white"})):L("",!0)],12,ED))),128))]),R(Ld,{type:"text",value:n.modelValue,"onUpdate:modelValue":o,class:"mt-4 w-32"},null,8,["value"])]),v("div",{ref_key:"el",ref:r},null,512)]))}},AD={},OD={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},TD=v("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.75 12a.75.75 0 11-1.5 0 .75.75 0 011.5 0zM12.75 12a.75.75 0 11-1.5 0 .75.75 0 011.5 0zM18.75 12a.75.75 0 11-1.5 0 .75.75 0 011.5 0z"},null,-1),MD=[TD];function _D(n,e){return x(),E("svg",OD,MD)}const FD=zr(AD,[["render",_D]]),ND={},BD={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},RD=v("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.098 19.902a3.75 3.75 0 005.304 0l6.401-6.402M6.75 21A3.75 3.75 0 013 17.25V4.125C3 3.504 3.504 3 4.125 3h5.25c.621 0 1.125.504 1.125 1.125v4.072M6.75 21a3.75 3.75 0 003.75-3.75V8.197M6.75 21h13.125c.621 0 1.125-.504 1.125-1.125v-5.25c0-.621-.504-1.125-1.125-1.125h-4.072M10.5 8.197l2.88-2.88c.438-.439 1.15-.439 1.59 0l3.712 3.713c.44.44.44 1.152 0 1.59l-2.879 2.88M6.75 17.25h.008v.008H6.75v-.008z"},null,-1),ID=[RD];function PD(n,e){return x(),E("svg",BD,ID)}const LD=zr(ND,[["render",PD]]),$D={tabindex:"0",role:"button",class:"group-btn"},zD=ce(" Rename "),VD=ce(" Change color "),jD=ce(" Delete "),HD={key:2},qD={key:3,class:"relative"},WD=["onKeyup"],UD=ce(" Change label color "),KD={class:"mt-4"},JD=ce("Cancel "),GD=ce("Save changes "),YD=ce(" Delete label "),XD=ce("Cancel "),QD=ce("Delete "),dx={__name:"Tag",props:{item:{type:Object,required:!0},removable:{type:Boolean,default:!0},editable:{type:Boolean,default:!0}},emits:["remove"],setup(n){const e=n,{notify:t}=Id(),r="min-w-[48px] px-2 rounded-md",i="#0f172a",s="#f8fafc",o=fe(!1),a=fe(null),l=fe(""),c=fe(!1),u=()=>{o.value=!0,l.value=e.item.name,Ql(()=>{a.value.focus()})},d=()=>{o.value=!1,l.value=""},f=()=>{if(e.item.name===l.value){d();return}Ds.Inertia.put(route("mixpost.tags.update",{tag:e.item.id}),{action:"name",name:l.value},{onStart(){c.value=!0},onFinish(){c.value=!1,d()}})},h=fe(!1),p=fe(""),m=fe(!1),y=()=>{h.value=!0,p.value=e.item.hex_color},b=()=>{h.value=!1,p.value=""},k=()=>{Ds.Inertia.put(route("mixpost.tags.update",{tag:e.item.id}),{action:"color",hex_color:p.value},{onStart(){m.value=!0},onFinish(){m.value=!1,b()}})},O=fe(!1),g=fe(!1),_=()=>{Ds.Inertia.delete(route("mixpost.tags.delete",{tag:e.item.id}),{onStart(){g.value=!0},onSuccess(){O.value=!1,t("success","Label deleted")},onFinish(){g.value=!1}})};return(A,N)=>(x(),E("div",null,[v("div",{style:he({backgroundColor:n.item.hex_color,color:V(va)(n.item.hex_color)==="light"?i:s}),class:Ve([r,"relative group"])},[c.value?(x(),K(Md,{key:0,size:"sm",opacity:50})):L("",!0),n.removable||n.editable?(x(),E("div",{key:1,style:he({backgroundColor:n.item.hex_color}),class:"tag-actions absolute right-0 top-0 h-full pl-0.5 hidden items-center rounded-r-md group-hover:flex"},[n.editable?(x(),K(Pd,{key:0,"width-classes":"w-48"},{trigger:$(()=>[v("div",$D,[R(FD,{class:"!w-5 !h-5 opacity-75 [.group-btn:hover_&]:opacity-100"})])]),content:$(()=>[R(xs,{onClick:u,as:"button"},{default:$(()=>[R(Kd,{class:"!w-5 !h-5 mr-1"}),zD]),_:1}),R(xs,{onClick:y,as:"button"},{default:$(()=>[R(LD,{class:"!w-5 !h-5 mr-1"}),VD]),_:1}),R(xs,{onClick:N[0]||(N[0]=S=>O.value=!0),as:"button"},{default:$(()=>[R(_d,{class:"!w-5 !h-5 mr-1 text-red-500"}),jD]),_:1})]),_:1})):L("",!0),n.removable?(x(),E("div",{key:1,onClick:N[1]||(N[1]=S=>A.$emit("remove")),tabindex:"0",role:"button",class:"ml-1 group-btn"},[R(Sd,{class:"!w-5 !h-5 opacity-75 [.group-btn:hover_&]:opacity-100"})])):L("",!0)],4)):L("",!0),o.value?L("",!0):(x(),E("div",HD,we(n.item.name),1)),o.value?(x(),E("div",qD,[Xl(v("input",{ref_key:"renameRef",ref:a,"onUpdate:modelValue":N[2]||(N[2]=S=>l.value=S),onKeyup:Od(f,["enter"]),onBlur:d,class:"p-0 w-auto outline-none focus:outline-0 focus:outline-none border-none bg-transparent rounded-md"},null,40,WD),[[Ad,l.value]])])):L("",!0)],4),n.editable?(x(),E(se,{key:0},[R(Fd,{show:h.value,"max-width":"md",onClose:b},{header:$(()=>[UD]),body:$(()=>[h.value?(x(),E(se,{key:0},[v("div",{style:he({backgroundColor:p.value,color:V(va)(p.value)==="light"?i:s}),class:Ve([r,"w-fit"])},we(n.item.name),5),v("div",KD,[R(SD,{modelValue:p.value,"onUpdate:modelValue":N[3]||(N[3]=S=>p.value=S)},null,8,["modelValue"])])],64)):L("",!0)]),footer:$(()=>[R(ga,{onClick:b,disabled:m.value,class:"mr-xs"},{default:$(()=>[JD]),_:1},8,["disabled"]),R(Rd,{onClick:k,"is-loading":m.value,disabled:m.value},{default:$(()=>[GD]),_:1},8,["is-loading","disabled"])]),_:1},8,["show"]),R(Bd,{show:O.value,variant:"danger",onClose:N[5]||(N[5]=S=>O.value=!1)},{header:$(()=>[YD]),body:$(()=>[ce(" Are you sure you want to delete the "+we(n.item.name)+" label from everywhere? ",1)]),footer:$(()=>[R(ga,{onClick:N[4]||(N[4]=S=>O.value=!1),disabled:g.value,class:"mr-xs"},{default:$(()=>[XD]),_:1},8,["disabled"]),R(Nd,{onClick:_,"is-loading":g.value,disabled:g.value},{default:$(()=>[QD]),_:1},8,["is-loading","disabled"])]),_:1},8,["show"])],64)):L("",!0)]))}},fx={__name:"Badge",props:{variant:{type:String,default:"neutral"}},setup(n){const e=n,t=At(()=>({neutral:"bg-gray-100 text-gray-800",dark:"bg-gray-800 text-gray-100",info:"bg-cyan-100 text-cyan-800",success:"bg-lime-100 text-lime-600",warning:"bg-orange-100 text-orange-600",error:"bg-red-100 text-red-600"})[e.variant]);return(r,i)=>(x(),E("span",{class:Ve([V(t),"px-2 inline-flex items-center rounded-md"])},[Hn(r.$slots,"default")],2))}},hx={__name:"VerticallyScrollableContent",props:{maxHeight:{type:String,default:"xl"}},setup(n){const e=n,t=At(()=>({md:"max-h-64",lg:"max-h-72",xl:"max-h-96"})[e.maxHeight]);return(r,i)=>(x(),E("div",{class:Ve([V(t),"overflow-y-auto"])},[Hn(r.$slots,"default")],2))}};export{kD as C,Ze as D,rt as E,wr as M,Kd as P,ax as _,lx as a,cx as b,hx as c,dx as d,fx as e,vt as f,je as g,xe as h,vy as i,gy as j,ux as t,ds as u};
